(function(){this.LocalStorage={localStorage:!1,getLocalStorage:function(){try{return window&&null!==window.localStorage&&(this.localStorage=window.localStorage),this.localStorage}catch(t){return!1}},getItem:function(t){return this.localStorage||(this.localStorage=this.getLocalStorage()),this.localStorage.getItem(t)},setItem:function(t,e){return this.localStorage||(this.localStorage=this.getLocalStorage()),this.localStorage.setItem(t,e)},removeItem:function(t){return this.localStorage||(this.localStorage=this.getLocalStorage()),this.localStorage.removeItem(t)}}}).call(this),function(){this.TwitterApi=function(){function t(){}return t.prototype.twitterConnectPath="/Twitter/Connect",t.prototype.twitterContactPath="/FriendFinder/TwitterConnectSuccess",t.prototype.localStorage=null,t.prototype.askToConnect=function(){var t,e;return e={redirect:window.location.origin+this.twitterContactPath},this.twitterWindow=window.open(this.twitterConnectPath+"?"+$.param(e),"Twitter Connect","width=500, height=300"),this.localStorage=LocalStorage.getLocalStorage(),t=new $.Deferred,this.localStorage?(this.localStorage.removeItem("twitter_connected"),this.localStorage.setItem("twitter_connected",!1),this._pollForSuccess(t)):t.reject(),t},t.prototype._pollForSuccess=function(t){var e,o;return o=(new Date).getTime(),e=setInterval(function(i){return function(){var n;return n=i.localStorage.getItem("twitter_connected"),(new Date).getTime()-o>3e5||"true"===n||i.twitterWindow.closed?(clearInterval(e),"true"===n?t.resolve():t.reject(),i.localStorage.removeItem("twitter_connected")):void 0}}(this),2e3),t},t}()}.call(this),function(){var t;(t=this.Academia).RegPath||(t.RegPath={})}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.SuggestionCollection=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.initialize=function(){return o.__super__.initialize.apply(this,arguments),this.on("sync",this._defaultToAccepted,this)},o.prototype._defaultToAccepted=function(){return this.each(function(t){return t.has("accepted")?void 0:t.set("accepted",!0)})},o.prototype.save=function(){var t,e;return t=this.select(function(t){return t.get("accepted")}),e=this.reject(function(t){return t.get("accepted")}),$.ajax({url:this.url,type:"PUT",data:{accepted_suggestions:this._sourcesById(t),rejected_suggestions:this._sourcesById(e)}})},o.prototype._sourcesById=function(t){return _(t).reduce(function(t){return function(e,o){return e[o.get(t.modelName).id]=o.get("sources").sort().join(","),e}}(this),{})},o}(Backbone.Collection)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.WelcomeNotice=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.initialize=function(t){return o.__super__.initialize.call(this,_.extend({mode:"success",fadeout:4e3,after:"#reg-path-progress-bar"},t)),$.cookie("saw_welcome_notice")?void 0:(this.render(),$.cookie("saw_welcome_notice",(new Date).getTime(),{domain:$domain,path:"/",expires:1}))},o}(ConfirmationBanner.BelowNavView)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.AddTagsPageView=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/add_tags_page",o.prototype.initialize=function(t){var e;return null==t&&(t={}),this.worksToTag=t.worksToTag||5,this.collection=new Academia.RegPath.AugmentableWorks([],{source:"reg_path_coauthors",suggestionSource:"reg_path_suggestion"}),this.currentCollectionIndex=0,e=this.collection.fetch({dataType:"jsonp"}),e.fail(function(t){return function(){return t.trigger("step_complete")}}(this)).done(function(t){return function(){return 0===t.collection.length?t.trigger("step_complete"):(t.collection.set(_.first(t.collection.models,t.worksToTag)),t.renderCurrentWork())}}(this)),this.render(),Academia.broccoli.notify("add-coauthors-page__viewed")},o.prototype.render=function(){return this.$el.html(JST[this.template]()),this.postRender()},o.prototype.postRender=function(){return this.ui={$workContainer:this.$(".js-reg-path-add-tags-work-container")}},o.prototype.renderCurrentWork=function(){var t;return null!=(t=this.currentWorkView)&&t.remove(),this.trigger("substeps_complete",this.currentCollectionIndex),this.currentWorkView=new Academia.RegPath.AddTagsWorkView({model:this.collection.at(this.currentCollectionIndex),currentCollectionIndex:this.currentCollectionIndex,worksCount:this.collection.length}),this.listenToOnce(this.currentWorkView,"step_complete",function(t){return function(){return t.stopListening(t.currentWorkView),t.showNextWork()}}(this)),this.listenToOnce(this.currentWorkView,"go_back",function(t){return function(){return t.stopListening(t.currentWorkView),t.showPreviousWork()}}(this)),this.ui.$workContainer.html(this.currentWorkView.el),this.currentWorkView.render()},o.prototype.showPreviousWork=function(){return this.currentCollectionIndex-=1,this.currentCollectionIndex<0?this.trigger("go_back"):this.renderCurrentWork()},o.prototype.showNextWork=function(){var t;return this.currentCollectionIndex+=1,this.currentCollectionIndex>=this.collection.length?(t=_.pluck(this.collection.models,"savingPromise"),$.when.apply($,t).always(function(t){return function(){return t.trigger("step_complete")}}(this))):this.renderCurrentWork()},o.prototype.remove=function(){var t;return null!=(t=this.currentWorkView)&&t.remove(),o.__super__.remove.apply(this,arguments)},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.AddTagsWorkView=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/add_tags_work",o.prototype.events={"change .js-reg-path-tags-work-title":"updateTitle",click:"closeHangingSelect2s","click .js-reg-path-tags-to-previous-work":"goBack","click .js-reg-path-tags-submit-work":"submitWork"},o.prototype.initialize=function(t){return this.currentCollectionIndex=t.currentCollectionIndex,this.worksCount=t.worksCount},o.prototype.render=function(){return this.$el.html(JST[this.template]({work:this.model.toJSON().work,currentCollectionIndex:this.currentCollectionIndex,worksCount:this.worksCount})),this.postRender()},o.prototype.postRender=function(){return this.ui={$authorsInput:this.$("#authors-input"),$coauthorsList:this.$(".js-reg-path-tags-coauthors-list"),$interestsInput:this.$("#interests-input"),$interestsList:this.$(".js-reg-path-tags-interests-list"),$workTitleInput:this.$(".js-reg-path-tags-work-title"),$submitWorkButton:this.$(".js-reg-path-tags-submit-work")},this.loadCoauthorPicker(),this.loadInterestPicker(),Academia.broccoli.notify("add-coauthors-work-page__viewed")},o.prototype.loadCoauthorPicker=function(){var t;return this.coauthorPicker=new Works.CoauthorPicker({collection:this.model.authors,searchInput:this.ui.$authorsInput}),null!=(t=this.coauthorsView)&&t.remove(),this.coauthorsView=new Works.CoauthorTagsView({el:this.ui.$coauthorsList,collection:this.model.authors}),this.coauthorsView.render()},o.prototype.loadInterestPicker=function(){var t;return this.riPicker=new Search.ResearchInterestSearch({el:this.ui.$interestsInput,collection:this.model.researchInterests}),this.riPicker.render(),null!=(t=this.riCollectionView)&&t.remove(),this.riCollectionView=new Works.SuggestableTagsView({el:this.ui.$interestsList,collection:this.model.researchInterests}),this.listenTo(this.riPicker,"item-selected",function(t){return function(e){return t.model.researchInterests.push(e)}}(this)),this.riCollectionView.render()},o.prototype.updateTitle=function(){return this.model.set("title",this.ui.$workTitleInput.val())},o.prototype.showError=function(t){return this.$("#validation-error").removeClass("hidden").find(".js-validation-text").text(t)},o.prototype.closeHangingSelect2s=function(t){return 0===$(t.currentTarget).parents(".select2-drop").length?$(".select2-offscreen").each(function(){return $(this).select2("close")}):void 0},o.prototype.submitWork=function(t){return t.preventDefault(),this.model.isValid()?(this.ui.$submitWorkButton.button("loading"),this.model.savingPromise=this.model.save(),this.trigger("step_complete")):void this.showError(this.currentWork.validationError)},o.prototype.goBack=function(){return this.trigger("go_back")},o.prototype.remove=function(){var t,e;return null!=(t=this.coauthorPicker)&&t.remove(),null!=(e=this.riPicker)&&e.remove(),o.__super__.remove.apply(this,arguments)},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.AffiliationDetails=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.ClusterCollectionController=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.loadingTemplate="reg_path/templates/step_loading",o.prototype.initialize=function(t){return null==t&&(t={}),this._maxShownClusters=t.maxShownClusters||4,this._clusterSavePromises=[],this._loadingMessage=t.loadingMessage,this._showLowConfidence=t.showLowConfidence||!1,this.suggestedClusters=Academia.RegPath.suggestedClusters,this.suggestedClusters.fetched?setTimeout(function(t){return function(){return t._renderCollection()}}(this),0):(this._renderLoader(),this.listenToOnce(this.suggestedClusters,"sync",this._renderCollection),this.listenToOnce(this.suggestedClusters,"error",function(t){return function(){return t.trigger("step_complete")}}(this)),this.suggestedClusters.fetch(),setTimeout(function(t){return function(){return t.suggestedClusters.fetching?(t.stopListening(),t.trigger("step_complete")):void 0}}(this),1e4))},o.prototype._renderLoader=function(){return this.$el.html(JST[this.loadingTemplate]({loadingText:this._loadingMessage||I18n.t("reg_path.coauthor.looking_for_papers")}))},o.prototype._renderCollection=function(){return this.suggestedClusters.organizeByConfidenceAndUpdateDefaults(this._showLowConfidence),0===this.suggestedClusters.length||!this._showLowConfidence&&0===this.suggestedClusters.getHighConfidenceClusters().length?void this.trigger("step_complete"):(this.suggestedClusters.reset(this.suggestedClusters.first(this._maxShownClusters)),this.currentClusterIndex=0,this._renderCurrentCluster())},o.prototype._renderCurrentCluster=function(){var t,e;return null!=(e=this._currentClusterReviewPage)&&e.remove(),this.trigger("substeps_complete",this.currentClusterIndex),t=this.suggestedClusters.at(this.currentClusterIndex),0===t.get("papers").length?void this._showNextCluster():(this._currentClusterReviewPage=new Academia.RegPath.ClusterReviewPage({model:t,clusterIndex:this.currentClusterIndex,papersClaimedSoFarCount:this.suggestedClusters.getTotalClaimedCount()}),this.listenToOnce(this._currentClusterReviewPage,"step_complete",this._showNextCluster),this.$el.html(this._currentClusterReviewPage.render().el),this.$(".js-cluster-review-page-work-title").trunk8({lines:2}))},o.prototype._showNextCluster=function(t){return t&&this._clusterSavePromises.push(t),this.currentClusterIndex++,this.currentClusterIndex<this.suggestedClusters.length?this._renderCurrentCluster():$.when.apply($,this._clusterSavePromises).always(function(t){return function(){return Academia.RegPath.suggestedCoauthors.fetch({dataType:"jsonp"}).always(function(){return t.trigger("step_complete")})}}(this))},o.prototype.remove=function(){var t;return null!=(t=this._currentClusterReviewPage)&&t.remove(),o.__super__.remove.apply(this,arguments)},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.ClusterReviewPage=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/cluster_review_page",o.prototype.events={"click .js-cluster-review-page-next-cluster":"_toNextCluster","click .js-cluster-review-page-next-cluster-with-none":"_toNextClusterWithNone","click .js-cluster-review-page-toggle-wrapper":"_toggleClaimForAll"},o.prototype.initialize=function(t){return this.papersClaimedSoFarCount=t.papersClaimedSoFarCount,this.listenTo(this.model.get("papers"),"change",this._updateConfirmButtons),this.listenTo(this.model.get("papers"),"change:claimStatus",this._updateToggleAllUI)},o.prototype.render=function(){return this.$el.html(JST[this.template]({confirmedCount:this.papersClaimedSoFarCount})),this._postRender(),this},o.prototype._postRender=function(){return this.ui={$suggestedWorksList:this.$(".js-cluster-review-page-works-collection"),$confirmClusterButton:this.$(".js-cluster-review-page-next-cluster"),$confirmClusterButtonText:this.$(".js-cluster-review-page-next-cluster span"),$rejectAllAndFinishButton:this.$(".js-cluster-review-page-next-cluster-with-none"),$confirmClusterButtonSpinner:this.$(".js-cluster-review-page-finish-spinner"),$toggleAllCheckbox:this.$(".js-cluster-review-page-toggle-all-checkbox")},this._suggestedWorkViews=this.model.get("papers").map(function(){return function(t){return new Academia.RegPath.SuggestedWorkView({model:t})}}(this)),this.ui.$suggestedWorksList.html(_.pluck(this._suggestedWorkViews.reverse(),"el")),this._updateToggleAllUI(),this._updateConfirmButtons(),this._trackClusterShown()},o.prototype._updateConfirmButtons=function(){var t,e;return e=this.model.get("papers").where({claimStatus:"claim"}).length,t=e===this.model.get("papers").length,0===e?(this.ui.$confirmClusterButton.addClass("btn-clear").removeClass("btn-primary"),this.ui.$confirmClusterButtonText.text("Skip"),this.ui.$rejectAllAndFinishButton.hide()):t?(this.ui.$confirmClusterButton.addClass("btn-primary").removeClass("btn-clear"),this.ui.$confirmClusterButtonText.text("Confirm All ("+e+")"),this.ui.$rejectAllAndFinishButton.show()):(this.ui.$confirmClusterButton.addClass("btn-primary").removeClass("btn-clear"),this.ui.$confirmClusterButtonText.text("Confirm Selected ("+e+")"),this.ui.$rejectAllAndFinishButton.show())},o.prototype._updateToggleAllUI=function(){var t;return t=this.model.get("papers").every(function(t){return"claim"===t.get("claimStatus")}),t?this.ui.$toggleAllCheckbox.attr("checked",!0):this.ui.$toggleAllCheckbox.attr("checked",!1)},o.prototype._toggleClaimForAll=function(){var t;return t=this.model.get("papers").every(function(t){return"claim"===t.get("claimStatus")}),t?this.model.get("papers").invoke("set",{claimStatus:"anticlaim"}):this.model.get("papers").invoke("set",{claimStatus:"claim"})},o.prototype._showSavingSpinner=function(){return this.ui.$confirmClusterButtonText.hide(),this.ui.$rejectAllAndFinishButton.hide(),this.ui.$confirmClusterButtonSpinner.removeClass("hidden")},o.prototype._toNextCluster=function(){var t;return t=this.model.save(),this._showSavingSpinner(),this.trigger("step_complete",t)},o.prototype._toNextClusterWithNone=function(){return this.model.get("papers").invoke("set",{claimStatus:"anticlaim"}),this._toNextCluster()},o.prototype._trackClusterShown=function(){var t;return heap.track("Claim Papers: Show Cluster",{"num-papers":this.model.get("papers").length}),t=new c.Server.Notification("paper_clusters"),t.notify({event:"cluster_shown",user_id:$current_user.id,bibentry_ids:this.model.get("papers").pluck("id"),confidence:this.model.get("confidence")})},o.prototype.remove=function(){return _.invoke(this._suggestedWorkViews,"remove"),o.__super__.remove.apply(this,arguments)},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.CoauthorReviewPage=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/coauthor_review_page",o.prototype.events={"click .js-coauthor-review-page-finish":"_confirmAndFinish","click .js-coauthor-review-page-reject-all":"_rejectAllAndFinish"},o.prototype.initialize=function(){return o.__super__.initialize.apply(this,arguments),this.suggestedCoauthors=Academia.RegPath.suggestedCoauthors,this.suggestedCoauthors.on({"remove change":function(t){return function(){return t._updateConfirmButtonText()}}(this),"batch-saved":function(t){return function(){return t.trigger("step_complete")}}(this)}),this.render()},o.prototype.render=function(){return this.$el.html(JST[this.template]()),this.postRender(),this},o.prototype._renderCoauthorList=function(){return this.ui.$suggestedCoauthorsList.empty(),0===this.suggestedCoauthors.models.length?this.ui.$suggestedCoauthorsList.html(JST["reg_path/templates/no_suggested_coauthors"]()):this.coauthorViews=_.map(this.suggestedCoauthors.models,function(t){return function(e){var o;return o=new Academia.RegPath.SuggestedCoauthorView({model:e}),t.ui.$suggestedCoauthorsList.append(o.render().el)}}(this)),heap.track("Claim Papers: Show Coauthors",{"num-coauthors":this.suggestedCoauthors.length}),this.suggestedCoauthors.hasExpandedCoauthor()?this.$(".js-coauthor-review-page-work-title").trunk8({lines:2}):void 0},o.prototype.postRender=function(){return this.ui={$suggestedCoauthorsList:this.$(".js-coauthor-review-page-coauthors-collection"),$confirmCoauthorsButtonText:this.$(".js-coauthor-review-page-finish span"),$confirmCoauthorsButtonSpinner:this.$(".js-coauthor-review-page-finish-spinner"),$rejectAllAndFinishButton:this.$(".js-coauthor-review-page-reject-all")},this._renderCoauthorList(),this._updateConfirmButtonText(),this._trackCoauthorsShown()},o.prototype._updateConfirmButtonText=function(){return this.ui.$confirmCoauthorsButtonText.text(this._getConfirmButtonText())},o.prototype._getConfirmButtonText=function(){var t,e;return t=this.suggestedCoauthors.where({accept:!0}).length,e=t===this.suggestedCoauthors.length,0===t?"Skip":e?"Confirm All ("+t+")":"Confirm Selected ("+t+")"},o.prototype._trackCoauthorsShown=function(){var t;return t=new c.Server.Notification("paper_clusters"),t.notify({event:"coauthors_shown",user_id:$current_user.id})},o.prototype._confirmAndFinish=function(){return this.ui.$confirmCoauthorsButtonText.hide(),this.ui.$rejectAllAndFinishButton.hide(),this.ui.$confirmCoauthorsButtonSpinner.removeClass("hidden"),this.suggestedCoauthors.batchSaveSuggestions()},o.prototype._rejectAllAndFinish=function(){return this.suggestedCoauthors.markAllAsRejected(),this._confirmAndFinish()},o.prototype.remove=function(){return _.chain(this.coauthorViews).compact().invoke("remove"),o.__super__.remove.apply(this,arguments)},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.CoauthorWelcomeNotice=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.initialize=function(){var t;return t=null!=this.invitingCoauthor?I18n.t("reg_path.coauthor.you_accepted",{invitingCoauthor:this.invitingCoauthor}):I18n.t("reg_path.coauthor.you_accepted_no_name"),o.__super__.initialize.call(this,{message:t})},o}(Academia.RegPath.WelcomeNotice)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.CombinedClaimCoauthorView=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/combined_claim/combined_claim_coauthor",o.prototype.events={"click .js-combined-claim-coauthor-toggle-paper-titles-list":"togglePaperList","click .js-clickable-paper-area":"toggleModelClaimedState"},o.prototype.initialize=function(t){return this.bgClass=null!=t?t.bgClass:void 0,this.listenTo(Academia.RegPath.eventDispatcher,"combinedClaim:optInClicked",this.toggleVisibility),this.listenTo(this.model,"change",this.updateCheckboxVisualState),this.render()},o.prototype.render=function(){return this.$el.html(JST[this.template]({coauthor:this.model.toJSON(),isClaimed:this.model.isClaimed(),bgClass:this.bgClass})),this.postRender()},o.prototype.postRender=function(){return this.ui={$coauthorObfuscatedEmail:this.$(".js-combined-claim-coauthor-obfuscated-email"),$claimCheckbox:this.$(".js-combined-claim-coauthor-claim-checkbox"),$paperTitleListItems:this.$(".js-combined-claim-coauthor-paper-title-li"),$toggleablePaperTitleListItems:this.$(".js-combined-claim-coauthor-paper-title-li:nth-of-type(n+4)"),$togglePaperTitlesText:this.$(".js-combined-claim-coauthor-toggle-paper-titles-list-text")},this.ui.$paperTitleListItems.length>3?this.hidePaperList():void 0},o.prototype.togglePaperList=function(t){var e;return t.stopPropagation(),e=this.ui.$toggleablePaperTitleListItems[0],$(e).hasClass("hidden")?this.showPaperList():this.hidePaperList()},o.prototype.hidePaperList=function(){return this.ui.$toggleablePaperTitleListItems.addClass("hidden"),this.ui.$togglePaperTitlesText.text("..."+(this.ui.$paperTitleListItems.length-3)+" more")},o.prototype.showPaperList=function(){return this.ui.$toggleablePaperTitleListItems.removeClass("hidden"),this.ui.$togglePaperTitlesText.text("..."+(this.ui.$paperTitleListItems.length-3)+" less")},o.prototype.toggleModelClaimedState=function(){return this.model.isClaimed()?this.model.set("claimStatus","anticlaim"):this.model.set("claimStatus","claim")},o.prototype.updateCheckboxVisualState=function(){return this.model.isClaimed()?this.ui.$claimCheckbox.removeClass("fa-square-o text-gray-light").addClass("fa-check-square text-success"):this.ui.$claimCheckbox.removeClass("fa-check-square text-success").addClass("fa-square-o text-gray-light")},o.prototype.toggleVisibility=function(t){return this.model.isExternal()?t?(this.model.set("optedIn",!0),this.$el.removeClass("combined-claim-panel-opted-out"),this.delegateEvents()):(this.model.set("optedIn",!1),this.$el.addClass("combined-claim-panel-opted-out"),this.undelegateEvents()):void 0},o.prototype.disable=function(){return this.undelegateEvents(),this.stopListening(),$a.log("combined claim coauthor view disabled")},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.CombinedClaimCollectionView=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.loadingTemplate="reg_path/templates/step_loading",o.prototype.initialize=function(){return this.$el.html(JST[this.loadingTemplate]({loadingText:"Loading..."})),this.renderCollection()},o.prototype.renderCollection=function(){var t,e;return t=0,e=["bg-primary","bg-success","bg-info","bg-warning"],this.combinedClaimCoauthorViews=this.collection.map(function(o){var i;return i=e[t++%e.length],new Academia.RegPath.CombinedClaimCoauthorView({model:o,bgClass:i})}),this.$el.html(_.pluck(this.combinedClaimCoauthorViews,"el"))},o.prototype.disable=function(){return _.invoke(this.combinedClaimCoauthorViews,"disable"),$a.log("combined claim collection view disabled")},o.prototype.remove=function(){return _.invoke(this.combinedClaimCoauthorViews,"remove"),o.__super__.remove.apply(this,arguments)},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.CombinedClaimConfirmButton=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/combined_claim/combined_claim_confirm_button",o.prototype.events={"click .js-combined-claim-confirm-button":"confirmButtonClicked"},o.prototype.initialize=function(t){return this.broccoliSuffix=null!=t?t.broccoliSuffix:void 0,this.spinnerActivated=!1,this.listenTo(this.collection,"change",this.render),this.render()},o.prototype.render=function(){return this.$el.html(JST[this.template]({broccoliSuffix:this.broccoliSuffix,allClaimed:this.collection.allClaimed(),numClaimed:this.collection.numClaimed(),spinnerActivated:this.spinnerActivated}))},o.prototype.postRender=function(){return this.ui={$confirmButton:this.$(".js-confirm-button"),$confirmButtonText:this.$(".js-confirm-button-text"),$confirmButtonClaimCount:this.$(".js-confirm-button-claim-count"),$confirmButtonSpinner:this.$(".js-confirm-button-spinner")}},o.prototype.confirmButtonClicked=function(){return this.spinnerActivated=!0,this.render(),Academia.RegPath.eventDispatcher.trigger("combinedClaim:confirmButtonClicked")},o.prototype.disable=function(){return this.undelegateEvents(),this.stopListening(),$a.log("combined claim confirm button disabled")},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.CombinedClaimControlBar=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/combined_claim/combined_claim_control_bar",o.prototype.initialize=function(){return this.render()},o.prototype.render=function(){return this.$el.html(JST[this.template]),this.postRender()},o.prototype.postRender=function(){return this.ui={$controlBarText:this.$(".js-combined-claim-control-bar-text-container"),$controlBarSelectAllCheckbox:this.$(".js-combined-claim-control-bar-select-all-checkbox-container")},this.subviews={controlBarText:new Academia.RegPath.CombinedClaimControlBarText({el:this.ui.$controlBarText,collection:this.collection}),selectAllCheckbox:new Academia.RegPath.CombinedClaimControlBarSelectAllCheckbox({el:this.ui.$controlBarSelectAllCheckbox,collection:this.collection})}},o.prototype.affixBar=function(){return this.$el.affix({offset:{top:this.$el.offset().top}})},o.prototype.disable=function(){return _.invoke(this.subviews,"disable"),$a.log("combined claim control bar disabled")},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.CombinedClaimControlBarSelectAllCheckbox=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/combined_claim/combined_claim_control_bar_select_all_checkbox",o.prototype.events={"click .js-combined-claim-select-all-container":"toggleSelectAll"},o.prototype.initialize=function(){return this.listenTo(this.collection,"change:claimStatus",this.render),this.listenTo(this.collection,"change:optedIn",this.render),this.render()},o.prototype.render=function(){return this.$el.html(JST[this.template]({allClaimed:this.collection.allClaimed()}))},o.prototype.toggleSelectAll=function(){return this.collection.allClaimed()?_.each(this.collection.visibleSuggestions(),function(t){return t.set("claimStatus","anticlaim")}):_.each(this.collection.visibleSuggestions(),function(t){return t.set("claimStatus","claim")})},o.prototype.disable=function(){return this.undelegateEvents(),this.stopListening(),$a.log("combined claim control bar select all checkbox disabled")},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.CombinedClaimControlBarText=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/combined_claim/combined_claim_control_bar_text",o.prototype.initialize=function(){return this.listenTo(this.collection,"change:optedIn",this.render),this.render()},o.prototype.render=function(){return this.$el.html(JST[this.template]({numCoauthors:this.collection.visibleSuggestions().length}))},o.prototype.disable=function(){return this.stopListening(),$a.log("combined claim control bar text disabled")},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.CombinedClaimFooter=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/combined_claim/combined_claim_footer",o.prototype.initialize=function(t){return this.page=null!=t?t.page:void 0,this.optInABTest="yes"===Aedu.User.current.ab_tests.opt_in_checkbox,this.broccoliSuffix="",1===this.page&&this.collection.pagination?this.broccoliSuffix="-page-1":2===this.page&&this.collection.pagination&&(this.broccoliSuffix="-page-2"),this.render()},o.prototype.render=function(){return this.$el.html(JST[this.template]({allClaimed:this.collection.allClaimed(),numClaimed:this.collection.numClaimed(),broccoliSuffix:this.broccoliSuffix,optInABTest:this.optInABTest})),this.postRender()},o.prototype.postRender=function(){return this.ui={$optInCheckboxContainer:this.$(".js-combined-claim-opt-in-container-wrapper"),$skipButtonContainer:this.$(".js-combined-claim-skip-button-container"),$confirmButtonContainer:this.$(".js-combined-claim-confirm-button-container")},this.subviews={confirmButton:new Academia.RegPath.CombinedClaimConfirmButton({el:this.ui.$confirmButtonContainer,collection:this.collection,broccoliSuffix:this.broccoliSuffix}),skipButton:new Academia.RegPath.CombinedClaimSkipButton({el:this.ui.$skipButtonContainer,broccoliSuffix:this.broccoliSuffix})},this.optInABTest?this.subviews.optInCheckbox=new Academia.RegPath.CombinedClaimOptInCheckbox({el:this.ui.$optInCheckboxContainer}):void 0},o.prototype.disable=function(){return _.invoke(this.subviews,"disable"),$a.log("combined claim footer disabled")},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.CombinedClaimHeader=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/combined_claim/combined_claim_header",o.prototype.initialize=function(t){return this.page=null!=t?t.page:void 0,this.render()},o.prototype.render=function(){return this.$el.html(JST[this.template]({numCoauthors:this.collection.length,page:this.page}))},o.prototype.disable=function(){return $a.log("combined claim header disabled")},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.CombinedClaimOptInCheckbox=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/combined_claim/combined_claim_opt_in_checkbox",o.prototype.popoverTemplate="reg_path/templates/combined_claim/combined_claim_opt_in_popover",o.prototype.events={"click .js-combined-claim-opt-in-checkbox-container":"optInCheckboxClicked"},o.prototype.initialize=function(){return this.userOptedIn=!0,this.render()},o.prototype.render=function(){return this.$el.html(JST[this.template]({userOptedIn:this.userOptedIn})),this.postRender()
},o.prototype.postRender=function(){return this.ui={$optInInfo:this.$(".js-opt-in-info")},new HoverPopover({el:this.ui.$optInInfo,placement:"top",html:!0,content:JST[this.popoverTemplate]})},o.prototype.optInCheckboxClicked=function(){return this.userOptedIn=!this.userOptedIn,Academia.RegPath.eventDispatcher.trigger("combinedClaim:optInClicked",this.userOptedIn),this.render()},o.prototype.disable=function(){return this.undelegateEvents(),this.stopListening(),$a.log("combined claim opt in checkbox disabled")},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.CombinedClaimPage=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.loadingTemplate="reg_path/templates/step_loading",o.prototype.template="reg_path/templates/combined_claim/combined_claim_page",o.prototype.initialize=function(t){return this.collection=Academia.RegPath.suggestionsByCoauthor,this.page=null!=t?t.page:void 0,this.collection.fetched?setTimeout(function(t){return function(){return t.render()}}(this),0):(this.$el.html(JST[this.loadingTemplate]({loadingText:"Loading..."})),this.listenToOnce(this.collection,"sync",this.render),this.listenToOnce(this.collection,"error",function(t){return function(){return t.trigger("step_complete")}}(this)),this.collection.fetch())},o.prototype.render=function(){return this.collection.organizeByConfidence(),0===this.collection.length||2===this.page&&!this.collection.coauthor_pagination?void this.trigger("step_complete"):(this.$el.html(JST[this.template]),this.postRender())},o.prototype.postRender=function(){return this.ui={$header:this.$(".js-combined-claim-header"),$controlBar:this.$(".js-combined-claim-control-bar"),$collectionEl:this.$(".js-combined-claim-collection"),$footer:this.$(".js-combined-claim-footer")},this.entries_to_use=1===this.page&&this.collection.coauthor_pagination?new Works.SuggestionsByCoauthor(this.collection.slice(0,30),{source:"reg_path_combined_cluster_claim"}):2===this.page&&this.collection.coauthor_pagination?new Works.SuggestionsByCoauthor(this.collection.slice(30),{source:"reg_path_combined_cluster_claim"}):this.collection,this.subviews={header:new Academia.RegPath.CombinedClaimHeader({collection:this.entries_to_use,el:this.ui.$header,page:this.page}),controlBar:new Academia.RegPath.CombinedClaimControlBar({collection:this.entries_to_use,el:this.ui.$controlBar}),collectionView:new Academia.RegPath.CombinedClaimCollectionView({collection:this.entries_to_use,el:this.ui.$collectionEl}),footer:new Academia.RegPath.CombinedClaimFooter({collection:this.entries_to_use,el:this.ui.$footer,page:this.page})},this.subviews.controlBar.affixBar(),this.listenToOnce(Academia.RegPath.eventDispatcher,"combinedClaim:confirmButtonClicked",this.toNextStep),1===this.page&&this.collection.coauthor_pagination?(Academia.RegPath.broccoli.notify("combined-claim-coauthors-shown-paginated-all",$.extend({coauthors_shown:this.collection.length},this.collection.countsByConfidence())),Academia.RegPath.broccoli.notify("combined-claim-coauthors-shown-paginated-page-1",$.extend({coauthors_shown:this.entries_to_use.length},this.entries_to_use.countsByConfidence()))):2===this.page&&this.collection.coauthor_pagination&&Academia.RegPath.broccoli.notify("combined-claim-coauthors-shown-paginated-page-2",$.extend({coauthors_shown:this.entries_to_use.length},this.entries_to_use.countsByConfidence())),1!==this.page||this.collection.coauthor_pagination?void 0:Academia.RegPath.broccoli.notify("combined-claim-coauthors-shown",$.extend({coauthors_shown:this.entries_to_use.length},this.entries_to_use.countsByConfidence()))},o.prototype.toNextStep=function(){var t;return this.disableSubviews(),t=this.entries_to_use.save(),$.when.apply($,t).always(function(t){return function(){return Academia.RegPath.broccoli.notify("combined-claim-coauthors-claimed",t.entries_to_use.countsByConfidence(!0)),1===t.page&&t.collection.coauthor_pagination||t.collection.keepOnlyAcceptedNameOnlySuggestions(),Academia.RegPath.eventDispatcher.trigger("otherPapers:step_complete"),t.trigger("step_complete")}}(this))},o.prototype.disableSubviews=function(){return _.invoke(this.subviews,"disable")},o.prototype.remove=function(){return _.each(this.subviews,function(t){return t.remove()}),o.__super__.remove.apply(this,arguments)},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.CombinedClaimSkipButton=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/combined_claim/combined_claim_skip_button",o.prototype.events={"click .js-combined-claim-skip-button":"skipButtonClicked"},o.prototype.initialize=function(t){return this.broccoliSuffix=null!=t?t.broccoliSuffix:void 0,this.spinnerActivated=!1,this.render()},o.prototype.render=function(){return this.$el.html(JST[this.template]({broccoliSuffix:this.broccoliSuffix,spinnerActivated:this.spinnerActivated}))},o.prototype.skipButtonClicked=function(){return Academia.RegPath.eventDispatcher.trigger("otherPapers:step_skipped")},o.prototype.disable=function(){return this.spinnerActivated=!0,this.render(),this.undelegateEvents(),this.stopListening(),$a.log("combined claim skip button disabled")},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.CurrentPositionGrid=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.events={"click #current-position-other":"showMoreOptions","click *[data-position]":"choosePosition"},o.prototype.initialize=function(t){return null==t&&(t={}),this.ui={$otherButton:this.$("#current-position-other"),$moreOptions:this.$("#current-position-more-options")},this.render()},o.prototype.render=function(){return this.$el.removeClass("hidden"),this},o.prototype.showMoreOptions=function(){return this.ui.$otherButton.addClass("hidden"),this.ui.$moreOptions.removeClass("hidden")},o.prototype.choosePosition=function(t){var e;return e=$(t.currentTarget).data("position"),Academia.RegPath.affiliation.set("independent"===e||"not"===e?{category:e,position:null,custom_position:{},department:null}:"private"===e?{category:"private",position:{id:4},custom_position:{name:"Researcher"},department:null}:{category:"university",position:{id:e},custom_position:{},department:null}),this.trigger("step_complete")},o.prototype.remove=function(){return this.$el.addClass("hidden"),this},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.DiscoverResearchConnectButtons=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/discover_research_connect_buttons",o.prototype.events={"click #discover-research-facebook":"clickFacebook","click #discover-research-google":"clickGoogle","click #discover-research-twitter":"clickTwitter"},o.prototype.initialize=function(){return this.render()},o.prototype.render=function(){var t;return t=JST[this.template]({facebookConnected:this.model.facebook_connected,googleConnected:this.model.google_connected,twitterConnected:this.model.twitter_connected}),this.$el.html(t),this.postRender(),this},o.prototype.postRender=function(){return this.ui={$facebookIcon:this.$("#discover-research-facebook i"),$googleIcon:this.$("#discover-research-google i"),$twitterIcon:this.$("#discover-research-twitter i")},this.on("account:connected",this.render,this)},o.prototype.clickFacebook=function(){return this.ui.$facebookIcon.removeClass("fa-facebook").addClass("fa-spinner fa-spin"),Facebook.authorize().done(function(t){return function(e){return t.handleConnect(Facebook.register_connected(e),"facebook_connected")}}(this))},o.prototype.clickGoogle=function(){return this.ui.$googleIcon.removeClass("fa-google-plus").addClass("fa-spinner fa-spin"),Google.authorize().done(function(t){return function(e){return Google.get_user_info().done(function(o){return t.handleConnect(Google.register_connected(e,o),"google_connected")})}}(this))},o.prototype.clickTwitter=function(){return this.ui.$twitterIcon.removeClass("fa-twitter").addClass("fa-spinner fa-spin"),this.handleConnect((new TwitterApi).askToConnect(),"twitter_connected")},o.prototype.handleConnect=function(t,e){return t.done(function(t){return function(){return t.model[e]=!0,t.trigger("account:connected")}}(this)),t.fail(function(t){return function(e){return t.render(),alert((null!=e?e.responseText:void 0)||"Sorry, something went wrong! Please refresh the page and try again.")}}(this))},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.DiscoverResearchFollowSuggestions=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.noSuggestionsTemplate="reg_path/templates/discover_research_suggestions_none",o.prototype.loadingTemplate="reg_path/templates/discover_research_suggestions_loader",o.prototype.initialize=function(t){return this.userSuggestions=t.userSuggestions,this.interestSuggestions=t.interestSuggestions,o.__super__.initialize.apply(this,arguments)},o.prototype.render=function(){var t;return this.userRowViews=this.userSuggestions.map(function(t){var e;return e=c.User.from_json(t.get("user")),new Academia.RegPath.DiscoverResearchSuggestionRow({model:t,suggestionView:new Academia.RegPath.SuggestedUserView({model:e})})}),this.interestRowViews=this.interestSuggestions.map(function(t){var e;return e=t.get("interest"),new Academia.RegPath.DiscoverResearchSuggestionRow({model:t,suggestionView:new Academia.RegPath.SuggestedInterestView({model:e})})}),t=this._intersperseRows(this.userRowViews,this.interestRowViews),t.length>0?this.$el.addClass("reg-path-suggestion-module-collection-view-container").html(_.pluck(t,"el")):this.$el.html(JST[this.noSuggestionsTemplate]()),this},o.prototype._intersperseRows=function(t,e){var o,i;for(o=[],i=0;t.length>2*i||e.length>i;)t.length>2*i&&o.push.apply(o,t.slice(2*i,2*i+2)),e.length>i&&o.push.apply(o,e.slice(i,i+1)),i+=1;return o},o.prototype.showLoader=function(){return this.interestSuggestions.length+this.userSuggestions.length>0?this.$el.prepend(JST[this.loadingTemplate]({text:"REFRESHING SUGGESTIONS"})):this.$el.html(JST[this.loadingTemplate]({text:"LOADING SUGGESTIONS"}))},o.prototype.remove=function(){var t;return t=this.userRowViews.concat(this.interestRowViews),_.chain(t).compact().invoke("remove"),Backbone.View.prototype.remove.call(this)},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.DiscoverResearchPage=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/discover_research_page",o.prototype.events={"click #discover-research-back":"clickBack","click #discover-research-finish":"clickFinish","click #discover-research-skip":"clickSkip"},o.prototype.initialize=function(){return this.userSuggestions=new Academia.RegPath.SuggestedUsers,this.interestSuggestions=new Academia.RegPath.SuggestedInterests,this.on("step_complete",function(){return Academia.broccoli.notify("discover-research-page__finished")}),this.render()},o.prototype.render=function(){return this.$el.html(JST[this.template]()),this.postRender(),this},o.prototype.postRender=function(){return this.ui={$connectButtons:this.$("#discover-research-connect-buttons"),$followSuggestions:this.$("#discover-research-follow-suggestions"),$finishButton:this.$("#discover-research-finish"),$skipLink:this.$("#discover-research-skip")},this.connectButtonsView=new Academia.RegPath.DiscoverResearchConnectButtons({el:this.ui.$connectButtons,model:c.User.current}),this.followSuggestionsView=new Academia.RegPath.DiscoverResearchFollowSuggestions({el:this.ui.$followSuggestions,userSuggestions:this.userSuggestions,interestSuggestions:this.interestSuggestions}),this.listenTo(this.connectButtonsView,"account:connected",this.refreshSuggestions),this.refreshSuggestions()},o.prototype.disableFinishButton=function(){return this.ui.$finishButton.addClass("disabled"),this.ui.$skipLink.addClass("hidden"),this.stopListening(this.userSuggestions,"change:accepted"),this.stopListening(this.interestSuggestions,"change:accepted")},o.prototype.updateFinishButton=function(){var t;return t=this.userSuggestions.where({accepted:!0}).length+this.interestSuggestions.where({accepted:!0}).length,t>0?this.ui.$finishButton.removeClass("disabled").text(I18n.t("reg_path.templates.discover_research_page.follow",{count:t})):this.ui.$finishButton.addClass("disabled").text(I18n.t("reg_path.templates.discover_research_page.follow",{count:0})),this.ui.$skipLink.removeClass("hidden"),this.listenTo(this.userSuggestions,"change:accepted",this.updateFinishButton),this.listenTo(this.interestSuggestions,"change:accepted",this.updateFinishButton)},o.prototype.refreshSuggestions=function(){return this.followSuggestionsView.showLoader(),this.disableFinishButton(),$.when(this.userSuggestions.fetch(),this.interestSuggestions.fetch()).always(function(t){return function(){return t.followSuggestionsView.render(),t.updateFinishButton()}}(this))},o.prototype.clickBack=function(){return this.trigger("go_back")},o.prototype.clickSkip=function(){return this.trigger("step_complete")},o.prototype.clickFinish=function(){return this.ui.$skipLink.addClass("hidden"),this.ui.$finishButton.button("loading"),$.when(this.userSuggestions.save(),this.interestSuggestions.save()).always(function(t){return function(){return t.trigger("step_complete")}}(this))},o.prototype.remove=function(){return this.connectButtonsView.remove(),this.followSuggestionsView.remove(),o.__super__.remove.apply(this,arguments)},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.DiscoverResearchSuggestionRow=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/discover_research_suggestion",o.prototype.className="panel margin-bottom-2x",o.prototype.events={"click .js-reg-path-suggestion-row":"toggleSuggestionAcceptedState"},o.prototype.initialize=function(t){return this.suggestionView=t.suggestionView,this.listenTo(this.model,"change:accepted",this.render),this.render()},o.prototype.render=function(){var t;return t=JST[this.template]({accepted:this.model.get("accepted"),suggestionView:this.suggestionView}),this.$el.html(t),this},o.prototype.toggleSuggestionAcceptedState=function(){return this.model.set("accepted",!this.model.get("accepted"))},o.prototype.remove=function(){return this.suggestionView.remove(),Backbone.View.prototype.remove.call(this)},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.NameOnlyCoauthorAvatar=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/name_only_coauthors/name_only_coauthor_avatar",o.prototype.initialize=function(t){return null==t&&(t={}),this.bgClass=t.bgClass,this.render()},o.prototype.render=function(){return this.$el.html(JST[this.template]({coauthor:this.model.toJSON(),bgClass:this.bgClass}))},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.NameOnlyCoauthorEmailInput=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/name_only_coauthors/name_only_coauthor_email_input",o.prototype.events={"keyup .js-name-only-coauthor-email-input":"updateEmail"},o.prototype.initialize=function(){return this.listenToOnce(Academia.RegPath.eventDispatcher,"nameOnlyCoauthors:contactsImported",this.contactsImported),this.render()},o.prototype.render=function(){return this.$el.html(JST[this.template]({coauthor:this.model.toJSON()})),this.postRender()},o.prototype.postRender=function(){return this.ui={$coauthorEmailInput:this.$(".js-name-only-coauthor-email-input"),$inputCheckmark:this.$(".js-name-only-coauthor-email-input-checkmark")}},o.prototype.contactsImported=function(){return this.render(),this.handleCheckmark()},o.prototype.updateEmail=function(){return this.model.set("email",this.ui.$coauthorEmailInput.val()),this.handleCheckmark()},o.prototype.handleCheckmark=function(){return this.model.hasValidEmail()?this.ui.$inputCheckmark.removeClass("hidden"):this.ui.$inputCheckmark.addClass("hidden")},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.NameOnlyCoauthorInfo=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/name_only_coauthors/name_only_coauthor_info",o.prototype.initialize=function(){return this.validEmail=!1,this.listenTo(this.model,"change",this.updateStuff),this.render()},o.prototype.render=function(){return this.$el.html(JST[this.template]({coauthor:this.model.toJSON(),validEmail:this.validEmail}))},o.prototype.updateStuff=function(){return this.model.hasValidEmail()?(this.validEmail=!0,this.render()):(this.validEmail=!1,this.render())},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.NameOnlyCoauthorView=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/name_only_coauthors/name_only_coauthor",o.prototype.initialize=function(t){return null==t&&(t={}),this.bgClass=t.bgClass,this.render()},o.prototype.render=function(){return this.$el.html(JST[this.template]({coauthor:this.model.toJSON(),isClaimed:this.model.isClaimed(),bgClass:this.bgClass})),this.postRender()},o.prototype.postRender=function(){return this.ui={$coauthorAvatar:this.$(".js-name-only-coauthor-avatar"),$coauthorInfo:this.$(".js-name-only-coauthor-info"),$coauthorEmail:this.$(".js-name-only-coauthor-email")},this.subViews={coauthorAvatar:new Academia.RegPath.NameOnlyCoauthorAvatar({model:this.model,el:this.ui.$coauthorAvatar,bgClass:this.bgClass}),coauthorInfo:new Academia.RegPath.NameOnlyCoauthorInfo({model:this.model,el:this.ui.$coauthorInfo}),coauthorEmailInput:new Academia.RegPath.NameOnlyCoauthorEmailInput({model:this.model,el:this.ui.$coauthorEmail})}},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.NameOnlyCoauthorsCollectionView=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.loadingTemplate="reg_path/templates/step_loading",o.prototype.initialize=function(){return this.$el.html(JST[this.loadingTemplate]({loadingText:"Loading..."})),this.listenTo(this.collection,"change",this.checkIfAnyValidEmails),this.renderCollection()},o.prototype.renderCollection=function(){var t,e;return t=0,e=["bg-primary","bg-success","bg-info","bg-warning"],this.nameOnlyCoauthorViews=this.collection.map(function(o){var i;return i=e[t++%e.length],new Academia.RegPath.NameOnlyCoauthorView({model:o,bgClass:i})}),this.$el.html(_.pluck(this.nameOnlyCoauthorViews,"el")),this.postRender()},o.prototype.postRender=function(){return this.listenToOnce(Academia.RegPath.eventDispatcher,"nameOnlyCoauthors:saveButtonClicked",this.updateCollection)},o.prototype.updateCollection=function(){var t;return this.collection.keepOnlyNameOnlySuggestionsWithValidEmails(),Academia.RegPath.broccoli.notify("name-only-coauthors-emails-entered",{num_emails_entered:this.collection.length}),this.collection.source="reg_path_name_only_coauthors",t=this.collection.save(),$.when.apply($,t).always(function(){return Academia.RegPath.eventDispatcher.trigger("nameOnlyCoauthors:stepFinished")})},o.prototype.checkIfAnyValidEmails=function(){return Academia.RegPath.eventDispatcher.trigger(this.collection.any(function(t){return t.hasValidEmail()})?"nameOnlyCoauthors:validEmailExists":"nameOnlyCoauthors:noValidEmailsExist")},o.prototype.remove=function(){return _.invoke(this.nameOnlyCoauthorViews,"remove"),o.__super__.remove.apply(this,arguments)},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.NameOnlyCoauthorsControlBar=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/name_only_coauthors/name_only_coauthors_control_bar",o.prototype.initialize=function(){return this.render()},o.prototype.render=function(){return this.$el.html(JST[this.template]({numCoauthors:this.collection.length}))},o.prototype.affixBar=function(){return this.$el.affix({offset:{top:this.$el.offset().top}})},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.NameOnlyCoauthorsFooter=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/name_only_coauthors/name_only_coauthors_footer",o.prototype.events={"click .js-skip-button":"skipButtonClicked","click .js-save-button":"saveButtonClicked"},o.prototype.initialize=function(){return this.render()},o.prototype.render=function(){return this.$el.html(JST[this.template]),this.postRender()},o.prototype.postRender=function(){return this.ui={$skipButton:this.$(".js-skip-button"),$skipButtonText:this.$(".js-skip-button-text"),$skipButtonSpinner:this.$(".js-skip-button-spinner"),$saveButton:this.$(".js-save-button")},this.listenTo(Academia.RegPath.eventDispatcher,"nameOnlyCoauthors:validEmailExists",this.enableSaveButton),this.listenTo(Academia.RegPath.eventDispatcher,"nameOnlyCoauthors:noValidEmailsExist",this.disableSaveButton)},o.prototype.saveButtonClicked=function(){return Academia.RegPath.eventDispatcher.trigger("nameOnlyCoauthors:saveButtonClicked")},o.prototype.skipButtonClicked=function(){return this.ui.$skipButtonText.hide(),this.ui.$skipButtonSpinner.removeClass("hidden"),1===this.step&&this.collection.invoke("set",{claimStatus:"anticlaim"}),Academia.RegPath.eventDispatcher.trigger("nameOnlyCoauthors:stepFinished")},o.prototype.enableSaveButton=function(){return this.ui.$saveButton.removeClass("btn-clear-muted disabled").addClass("btn-success")},o.prototype.disableSaveButton=function(){return this.ui.$saveButton.removeClass("btn-success").addClass("btn-clear-muted disabled")},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.NameOnlyCoauthorsHeader=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/name_only_coauthors/name_only_coauthors_header",o.prototype.events={"click .js-connect-google-button":"addGoogleContacts"},o.prototype.initialize=function(){return this.headerState="default",this.render()},o.prototype.render=function(){return this.$el.html(JST[this.template]({alertMessage:this.alertMessage(),headerState:this.headerState,alertClass:this.alertClass(),buttonTextAB:Aedu.User.current.ab_tests.name_only_coauthors})),this.postRender()},o.prototype.postRender=function(){return this.ui={$googleText:this.$(".js-connect-google-button-text")}},o.prototype.addGoogleContacts=function(){return this.headerState="clicked",this.render(),Google.authorize().done(function(t){return function(e){return Google.get_user_info().done(function(o){var i;return i=Google.register_connected(e,o),i.done(function(){return Aedu.User.current.google_connected=!0,Academia.RegPath.broccoli.notify("name-only-coauthors-google-connected"),t.getContactsFromGoogle()}),i.fail(function(t){return alert((null!=t?t.responseText:void 0)||"Sorry, something went wrong! Please refresh the page and try again.")})}).fail(function(){return t.errorAddingGoogleContacts()})}}(this)).fail(function(t){return function(){return t.errorAddingGoogleContacts()}}(this))},o.prototype.getContactsFromGoogle=function(){return this.headerState="connected",this.render(),$.ajax({url:$r.api_v0_imported_google_contacts_path({subdomain_param:"api",names_to_match:this.collection.pluck("name")}),type:"POST",dataType:"json",contentType:"application/json"}).done(function(t){return function(e){return t.collection.matchContacts(e),t.headerState="got_contacts",t.render()}}(this)).fail(function(t){return function(){return t.collection.numMatchedContacts=0,t.headerState="got_contacts",t.render()}}(this))},o.prototype.errorAddingGoogleContacts=function(){return Aedu.User.current.google_connect_error=!0,Academia.RegPath.broccoli.notify("name-only-coauthors-google-connect-failed"),Academia.RegPath.eventDispatcher.trigger("nameOnlyCoauthors:stepFinished")},o.prototype.alertMessage=function(){var t;switch(this.headerState){case"default":return I18n.t("reg_path.name_only_coauthors.header.google_alert_message.default");case"clicked":return I18n.t("reg_path.name_only_coauthors.header.google_alert_message.clicked");case"connected":return I18n.t("reg_path.name_only_coauthors.header.google_alert_message.connected");case"got_contacts":return t=this.collection.numMatchedContacts,t>0?I18n.t("reg_path.name_only_coauthors.header.google_alert_message.autofilled_x_coauthors",{count:t}):I18n.t("reg_path.name_only_coauthors.header.google_alert_message.unable_to_autofill")}},o.prototype.alertClass=function(){return"got_contacts"===this.headerState&&0===this.collection.numMatchedContacts?"alert-danger":"got_contacts"===this.headerState?"name-only-coauthors-alert-success":"alert-warning name-only-coauthors-google-red"},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.NameOnlyCoauthorsPage=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.loadingTemplate="reg_path/templates/step_loading",o.prototype.template="reg_path/templates/name_only_coauthors/name_only_coauthors_page",o.prototype.initialize=function(){return this.collection=Academia.RegPath.suggestionsByCoauthor,this.collection.fetched?setTimeout(function(t){return function(){return t.render()}}(this),0):(this.$el.html(JST[this.loadingTemplate]({loadingText:"Loading..."})),this.listenToOnce(this.collection,"sync",this.render),this.listenToOnce(this.collection,"error",function(t){return function(){return t.trigger("step_complete")}}(this)),this.collection.fetch())},o.prototype.render=function(){return 0===this.collection.length?void this.trigger("step_complete"):(this.collection.length>4&&(this.collection=this.collection.slice(0,4)),this.$el.html(JST[this.template]),this.postRender())},o.prototype.postRender=function(){return this.ui={$header:this.$(".js-name-only-coauthors-header"),$controlBar:this.$(".js-name-only-coauthors-control-bar"),$collectionEl:this.$(".js-name-only-coauthors-collection"),$footer:this.$(".js-name-only-coauthors-footer")},this.subviews={header:new Academia.RegPath.NameOnlyCoauthorsHeader({collection:this.collection,el:this.ui.$header}),controlBar:new Academia.RegPath.NameOnlyCoauthorsControlBar({collection:this.collection,el:this.ui.$controlBar}),collectionView:new Academia.RegPath.NameOnlyCoauthorsCollectionView({collection:this.collection,el:this.ui.$collectionEl}),footer:new Academia.RegPath.NameOnlyCoauthorsFooter({collection:this.collection,el:this.ui.$footer})},this.subviews.controlBar.affixBar(),this.listenToOnce(Academia.RegPath.eventDispatcher,"nameOnlyCoauthors:stepFinished",function(t){return function(){return t.trigger("step_complete")}}(this)),Academia.RegPath.broccoli.notify("name-only-coauthors-shown",{name_only_coauthors_shown:this.collection.length})},o.prototype.remove=function(){return _.each(this.subviews,function(t){return t.remove()}),o.__super__.remove.apply(this,arguments)},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.OtherPapersController=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.initialize=function(t){return this.skipUrl=null!=t?t.skipUrl:void 0,this.initializeSuggestionsCollection(),this.listenToOnce(Academia.RegPath.eventDispatcher,"otherPapers:step_complete",this.incrementSubstep),this.listenToOnce(Academia.RegPath.eventDispatcher,"otherPapers:step_skipped",this.skipAll),this.initializePageManager(),this.$el.html(this.pageManager.$el)},o.prototype.initializeSuggestionsCollection=function(){return Academia.RegPath.suggestionsByCoauthor=new Works.SuggestionsByCoauthor([],{source:"reg_path_combined_cluster_claim"}),Academia.RegPath.suggestionsByCoauthor.fetch()},o.prototype.initializePageManager=function(){return this.pageManager=new Academia.RegPath.PageManagerView({steps:this.steps(),skipUrl:this.skipUrl})},o.prototype.steps=function(){return[{viewClass:Academia.RegPath.CombinedClaimPage,options:{page:1}},{viewClass:Academia.RegPath.CombinedClaimPage,options:{page:2}},{viewClass:Academia.RegPath.NameOnlyCoauthorsPage,shouldSkip:function(t){return function(){return t.skipNameOnlyCoauthors()}}(this)}]},o.prototype.skipNameOnlyCoauthors=function(){return 0===Academia.RegPath.suggestionsByCoauthor.length||Academia.RegPath.suggestionsByCoauthor.coauthor_pagination},o.prototype.skipAll=function(){return this.pageManager.nextPage()},o.prototype.incrementSubstep=function(){return this.trigger("substeps_complete",1)},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.PageManagerView=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.initialize=function(t){return this.steps=t.steps,this.backUrl=t.backUrl,this.skipUrl=t.skipUrl,this.headerText=t.headerText,t.showProgress&&(this.progressBar=new Academia.RegPath.ProgressBar({el:"#reg-path-progress-bar",steps:this.stepsForProgressBar()})),null!=t.routerRoot?this.setupRouter(t.routerRoot):(this.currentStepIndex=0,this.shouldSkipCurrentView().done(function(t){return function(e){return e?t.showNextStep():t.setCurrentView()}}(this)))},o.prototype.setCurrentView=function(){var t,e;return null!=(t=this.currentView)&&t.remove(),this.currentView=new this.steps[this.currentStepIndex].viewClass(this.steps[this.currentStepIndex].options),this.listenToOnce(this.currentView,"step_complete",this.showNextStep),this.listenToOnce(this.currentView,"go_back",this.showPreviousStep),$.contains(document.documentElement,this.currentView.el)||this.$el.html(this.currentView.el),null!=(e=this.router)&&e.navigate(this.steps[this.currentStepIndex].path),null!=this.progressBar&&(this.progressBar.expandToStep(this.stepsForProgressBar(this.currentStepIndex)),this.listenTo(this.currentView,"substeps_complete",this.incrementSubstepProgress)),null!=this.headerText&&this.currentView.headerText?this.headerText.html(this.currentView.headerText):void 0
},o.prototype.setupRouter=function(t){var e;return e={},_.each(this.steps,function(t){return function(o,i){return e[o.path]=function(){return t.currentStepIndex=_.clone(i),t.shouldSkipCurrentView().done(function(e){return e?t.showNextStep():t.setCurrentView()})}}}(this)),e[""]=function(t){return function(){return t.currentStepIndex=0,t.shouldSkipCurrentView().done(function(e){return e?t.showNextStep():t.setCurrentView()})}}(this),this.router=new(Backbone.Router.extend({routes:e})),Backbone.History.started?void 0:Backbone.history.start({root:t})},o.prototype.showNextStep=function(){return this.currentStepIndex++,this.steps[this.currentStepIndex]?this.shouldSkipCurrentView().done(function(t){return function(e){return e?t.showNextStep():t.setCurrentView()}}(this)):void this.nextPage()},o.prototype.showPreviousStep=function(){return this.currentStepIndex--,this.currentStepIndex<0?this.previousPage():this.shouldSkipCurrentView().done(function(t){return function(e){return e?t.showPreviousStep():t.setCurrentView()}}(this))},o.prototype.shouldSkipCurrentView=function(){var t;return null==this.steps[this.currentStepIndex].shouldSkip?$.when(!1):(t=$.when(this.steps[this.currentStepIndex].shouldSkip()),t.then(null,function(){return!0}),t)},o.prototype.nextPage=function(){var t;return t=this.skipUrl,_.isFunction(t)&&(t=t()),window.location.href=t||"/"},o.prototype.previousPage=function(){var t;return t=this.backUrl,_.isFunction(t)&&(t=t()),window.location.href=t||"/"},o.prototype.stepsForProgressBar=function(t){return null==t&&(t=this.steps.length),0===t?0:_.chain(this.steps.slice(0,+(t-1)+1||9e9)).map(function(t){return t.subSteps||1}).reduce(function(t,e){return t+e}).value()},o.prototype.incrementSubstepProgress=function(t){var e,o;return o=this.stepsForProgressBar(this.currentStepIndex)+t,null!=(e=this.progressBar)?e.expandToStep(o):void 0},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.ProgressBar=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.initialize=function(t){return this.steps=t.steps,this.currentIndex=0,this.ui={$completed:this.$(".js-progress-bar-completed"),$pct:$(".js-progress-bar-pct-complete")},this.updatePercentIndicator(0)},o.prototype.expandToStep=function(t){var e,o;if(t!==this.currentIndex)return e=t>=this.steps-1?100:100*t/(this.steps-1),o=e+"%",t>this.currentIndex?this.ui.$completed.animate({width:o}):this.ui.$completed.css({width:o}),this.updatePercentIndicator(e),this.currentIndex=t},o.prototype.updatePercentIndicator=function(t){return this.ui.$pct.length>0?this.ui.$pct.text(Math.round(t)+"% Complete"):void 0},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.SetInstitutionView=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/set_institution",o.prototype.initialize=function(t){return null==t&&(t={}),this.showHeadline=t.showHeadline,this.affiliationEditor=new AffiliationEditor.AffiliationEditView({model:Academia.RegPath.affiliation,steppedRender:!0,alwaysPrimary:!0,formClass:"margin-top-8x",saveClass:"btn btn-default btn-block btn-lg margin-top-8x",saveAction:function(t){return function(){return t.trigger("step_complete")}}(this),cancelClass:"hidden"}),this.render()},o.prototype.render=function(){return this.$el.html(JST[this.template]({headline:this.getHeadline()})),this.postRender(),this},o.prototype.postRender=function(){return this.ui={$affiliationEditor:this.$(".js-reg-path-affiliation-editor"),$headline:this.$(".js-reg-path-affiliation-headline")},this.ui.$affiliationEditor.html(this.affiliationEditor.el),this.listenTo(Academia.RegPath.affiliation,"change:position",this.resetHeadline)},o.prototype.resetHeadline=function(){return this.ui.$headline.text(this.getHeadline())},o.prototype.getHeadline=function(){var t,e;if(this.showHeadline)return t=null!=(e=Academia.RegPath.affiliation.get("position"))?e.id:void 0,8===t?"Where did you get your highest degree?":7===t||3===t?"Where do you study?":"Add Your Affiliation"},o.prototype.remove=function(){return this.affiliationEditor.remove(),o.__super__.remove.apply(this,arguments)},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.SuggestedCoauthorView=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/suggested_coauthor",o.prototype.tagName="li",o.prototype.className="no-select container-fluid list-group-item reg-path-suggestion-row",o.prototype.events={"click .js-toggle-accept":"_toggleAcceptagedState","click .js-coauthor-review-page-paper-count":"_toggleWorkListCollapse","click .js-reject-tag":"_rejectClicked"},o.prototype.initialize=function(){return this._worksExpanded=!1,this.listenTo(this.model,"change:accept change:tags",function(t){return function(){return 0===t.model.get("tags").length?void t.remove():t.render()}}(this))},o.prototype.render=function(){return this.$el.html(JST[this.template]({work:this.model.toJSON(),expanded:this.model.get("tags").length&&this._worksExpanded})),this._postRender(),this},o.prototype._postRender=function(){return this.ui={$workListContainer:this.$(".js-coauthor-review-page-works-container"),$workListToggleDropdownIcon:this.$(".js-coauthor-review-page-dropdown-icon")}},o.prototype._toggleAcceptagedState=function(t){return this.model.set("accept",!this.model.get("accept")),t.stopPropagation()},o.prototype._toggleWorkListCollapse=function(){return"undefined"!=typeof expanded&&null!==expanded&&expanded,this._worksExpanded=!this._worksExpanded,this.ui.$workListToggleDropdownIcon.toggleClass("fa-chevron-up",this._worksExpanded).toggleClass("fa-chevron-down",!this._worksExpanded),this.ui.$workListContainer.collapse(this._worksExpanded?"show":"hide")},o.prototype._rejectClicked=function(t){var e;return e=$(t.target).data("work-id"),this.model.rejectTagAsSuggestion(e)},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.SuggestedInterestView=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/discover_research_follow_interest",o.prototype.render=function(){return this.$el.html(JST[this.template]({interest:this.model})),this},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.SuggestedUserView=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/discover_research_follow_user",o.prototype.render=function(){return this.$el.html(JST[this.template]({user:this.model})),this},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.SuggestedWorkView=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/suggested_work",o.prototype.tagName="li",o.prototype.className="no-select container-fluid list-group-item reg-path-suggestion-row",o.prototype.events={"click .js-reg-path-suggestion-row":"_toggleModelClaimedState"},o.prototype.initialize=function(){return this.model.on("change:claimStatus",function(t){return function(){return t.render(),t.ui.$workTitle.trunk8({lines:2})}}(this)),this.render()},o.prototype.render=function(){return this.$el.html(JST[this.template]({title:this.model.get("title"),isClaimed:this.model.isClaimed()})),this.postRender(),this},o.prototype.postRender=function(){return this.ui={$workTitle:this.$(".js-cluster-review-page-work-title")}},o.prototype._toggleModelClaimedState=function(){return this.model.isClaimed()?this.model.set("claimStatus","anticlaim"):this.model.set("claimStatus","claim")},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.SutdDownload=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/sutd_download",o.prototype.events={"click .js-download-link":"autoBookmark"},o.prototype.initialize=function(t){return this.download=t.download,this.render()},o.prototype.render=function(){return this.$el.html(JST[this.template]({download:this.download,iconClass:this.iconClass()})),this},o.prototype.iconClass=function(){return"pdf"===this.download.file_extension?"fa-file-pdf-o":"fa-file-text-o"},o.prototype.autoBookmark=function(){var t;return t=new AcademiaSharing.Bookmark({content_type:"Work",content_id:this.download.work_id,source:"sutd",from_download_at:new Date}),t.save().always(function(e){return function(){var o;return o=new AcademiaSharing.SuccessNoticeView({model:t}),o.on("close",function(){return e.trigger("step_complete")}),o.show()}}(this))},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.UploadPapersPageView=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/upload_papers_page",o.prototype.events={"click .js-reg-path-upload-papers-save-button":"saveWorks","click .js-reg-path-upload-papers-skip-button":"skipForward","click .js-reg-path-upload-papers-back-button":"goBack","dragover .js-reg-path-upload-papers-upload-box":"dragoverUploadBox"},o.prototype.initialize=function(t){var e;return this.valueProp=t.valueProp,this.academiaMonthlyVisitors=t.academiaMonthlyVisitors,this.workViews=[],this.debouncedRemoveDragoverClass=_.debounce(function(t){return function(){return t.removeDragoverClass()}}(this),50),(e=Academia.RegPath).worksUploaded||(e.worksUploaded=new Backbone.Collection([],{model:Academia.RegPath.WorkUploadModel})),this.collection=Academia.RegPath.worksUploaded,this.listenTo(this.collection,"add",function(t){return function(e){return t.addWork(e)}}(this)),this.listenTo(this.collection,"add remove change:uploaded",function(t){return function(){return t.updateSubmitButton()}}(this)),this.render()},o.prototype.render=function(){return this.$el.html(JST[this.template]({headline:this.headline(),subhead:this.subhead(),uploadButtonText:this.uploadButtonText()})),this.postRender()},o.prototype.uploadButtonText=function(){return"generic"===this.valueProp?"CHOOSE FILE(S)":"UPLOAD PAPER(S)"},o.prototype.headline=function(){return"generic"===this.valueProp?"Upload A Recent Paper":"Get More Citations"},o.prototype.subhead=function(){return"generic"===this.valueProp?this.academiaMonthlyVisitors+" students and researchers like you benefit each month from the free research on Academia.edu.":'Papers claimed and uploaded on Academia.edu receive 73% more<sup><a href="https://www.academia.edu/12297791/Open_Access_Meets_Discoverability_Citations_to_Articles_Posted_to_Academia.edu" target="_blank">*</a></sup> citations over 5 years.'},o.prototype.postRender=function(){var t;return this.ui={$workList:this.$(".js-reg-path-upload-papers-work-list"),$uploadBox:this.$(".js-reg-path-upload-papers-upload-box"),$uploadInput:this.$(".js-reg-path-upload-papers-upload-input"),$saveButton:this.$(".js-reg-path-upload-papers-save-button"),$skipButton:this.$(".js-reg-path-upload-papers-skip-button")},this.uploader=new app.views.Uploader_v2({dropZone:this.ui.$uploadBox,input:this.ui.$uploadInput,source:"reg_path_upload_papers"}),this.setupUnloadListener(),t=_.debounce(function(t){return function(){return t.handleFileValidationError()}}(this),100),this.fileValidationErrors=[],this.listenTo(this.uploader,"error",function(e){return function(o,i){return e.fileValidationErrors.push({errors:o,file:i}),t()}}(this)),this.listenTo(this.uploader,"add",function(t){return function(e){return e.model=t.collection.create({file_name:e.name})}}(this))},o.prototype.handleFileValidationError=function(){var t;return t="",_.each(this.fileValidationErrors,function(e){return t+='There was an error uploading "'+e.file.name+'"!\n',_.each(e.errors,function(e){return e.file_type?t+="> Invalid file type\n":e.file_size?t+="> File is too large\n":e.file_name_length?t+="> File name is too long\n":void 0})}),alert(t),this.fileValidationErrors=[]},o.prototype.setupUnloadListener=function(){return $(window).on("beforeunload.uploadPapersPageView",function(t){return function(){return 1===t.collection.length?"You've uploaded a paper without saving it.":t.collection.length>1?"You've uploaded "+t.collection.length+" papers without saving them.":void 0}}(this))},o.prototype.removeUnloadListener=function(){return $(window).off("beforeunload.uploadPapersPageView")},o.prototype.addWork=function(t){var e;return e=new Academia.RegPath.UploadPapersWorkRowView({model:t}),this.workViews.push(e),this.ui.$workList.append(e.el)},o.prototype.updateSubmitButton=function(){var t;return 0===this.collection.length?(this.ui.$saveButton.addClass("hidden"),void this.ui.$skipButton.removeClass("hidden")):(this.ui.$saveButton.removeClass("hidden"),this.ui.$skipButton.addClass("hidden"),t=this.collection.every(function(){return function(t){return t.get("uploaded")}}(this)),t?this.ui.$saveButton.attr("disabled",!1):this.ui.$saveButton.attr("disabled",!0))},o.prototype.dragoverUploadBox=function(){return this.ui.$uploadBox.addClass("dragover"),this.debouncedRemoveDragoverClass()},o.prototype.removeDragoverClass=function(){return this.ui.$uploadBox.removeClass("dragover")},o.prototype.saveWorks=function(){var t;return this.ui.$saveButton.button("loading"),t=this.collection.invoke("saveWork"),$.when.apply($,t).fail(function(){return function(){return alert("Failed to save papers!")}}(this)).done(function(t){return function(){return t.removeUnloadListener(),t.trigger("step_complete")}}(this)).always(function(t){return function(){return t.ui.$saveButton.button("loading"),t.saving=!1}}(this))},o.prototype.goBack=function(){return this.removeUnloadListener(),this.trigger("go_back")},o.prototype.skipForward=function(){return this.removeUnloadListener(),this.trigger("step_complete")},o.prototype.remove=function(){return this.removeUnloadListener(),this.uploader.remove(),_.chain(this.workViews).compact().invoke("remove"),o.__super__.remove.apply(this,arguments)},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.UploadPapersWorkRowView=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/upload_papers_paper_row",o.prototype.className="panel panel-flat",o.prototype.events={"click .js-reg-path-upload-papers-delete-work":"deleteAttachment"},o.prototype.initialize=function(){return this.render(),this.listenTo(this.model,"destroy",function(t){return function(){return t.remove()}}(this)),this.listenTo(this.model,"change:uploadProgress",function(t){return function(e){return t.updateProgressBar(e.get("uploadProgress"))}}(this)),this.listenTo(this.model,"change:title",function(t){return function(e){return t.ui.$titleInput.val(e.get("title"))}}(this)),this.listenTo(this.model,"titleParseFinished",function(t){return function(){return t.ui.$titleInput.attr("disabled",!1)}}(this)),this.listenTo(this.model,"change:uploaded",function(t){return function(){return t.ui.$uploadProgressBarWrapper.fadeOut(function(){return t.ui.$uploadInputBarWrapper.show().fadeIn()})}}(this)),this.listenTo(this.model,"fail",function(t){return function(){return alert('Upload of "'+t.model.get("title")+'" failed'),t.model.destroy()}}(this))},o.prototype.render=function(){return this.$el.html(JST[this.template]({work:this.model.toJSON()})),this.postRender()},o.prototype.postRender=function(){return this.ui={$uploadProgressBar:this.$(".js-reg-path-upload-papers-upload-progress"),$titleInput:this.$(".js-reg-path-upload-papers-work-title"),$uploadProgressBarWrapper:this.$(".js-reg-path-upload-progress-section-wrapper"),$uploadInputBarWrapper:this.$(".js-reg-path-upload-input-section-wrapper")}},o.prototype.deleteAttachment=function(){return this.model.destroy()},o.prototype.updateProgressBar=function(t){return this.ui.$uploadProgressBar.css("width",100*t+"%")},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.VerifyAccount=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.template="reg_path/templates/verify_account",o.prototype.events={"click .js-connect-with-google-button":"googleButtonClicked","click .js-connect-with-yahoo-button":"yahooButtonClicked","click .js-verify-account-button":"verifyButtonClicked"},o.prototype.initialize=function(){return this.render()},o.prototype.render=function(){return this.$el.html(JST[this.template]({showYahoo:Aedu.User.current.yahoo_email})),this.postRender(),this},o.prototype.postRender=function(){return this.ui={$googleButton:this.$(".js-connect-with-google-button"),$googleIcon:this.$(".js-google-icon"),$verifyButton:this.$(".js-verify-account-button"),$enterPasswordInput:this.$(".js-enter-password-input"),$enterPasswordFormGroup:this.$(".js-enter-password-form-group"),$reEnterPasswordInput:this.$(".js-re-enter-password-input"),$reEnterPasswordFormGroup:this.$(".js-re-enter-password-form-group"),$yahooButton:this.$(".js-connect-with-yahoo-button"),$yahooIcon:this.$(".js-yahoo-icon")}},o.prototype.yahooButtonClicked=function(){return this.disableYahooButton(),$.ajax({url:$r.friend_finder_enter_email_url({type:"EmailImporter",yahoo:!0,domain:document.domain,email:Aedu.User.current.email}),type:"POST",error:function(t){return function(){return t.notify("verify-account-yahoo-request-token-error")}}(this),success:function(t){return function(e){return t.notify("verify-account-yahoo-request-token-success"),window.location=e.auth_url}}(this)})},o.prototype.googleButtonClicked=function(){return this.disableGoogleButton(),Google.authorize().done(function(t){return function(e){return Google.get_user_info().done(function(o){var i;return i=Google.register_connected(e,o),i.done(function(){return t.model.google_connected=!0,t.notify("verify-account-google-connected"),t.trigger("step_complete")}),i.fail(function(e){return t.unDisableButtons(),alert((null!=e?e.responseText:void 0)||"Sorry, something went wrong! Please refresh the page and try again.")})}).fail(function(){return t.errorAddingGoogleContacts()})}}(this)).fail(function(t){return function(){return t.errorAddingGoogleContacts()}}(this))},o.prototype.errorAddingGoogleContacts=function(){return Aedu.User.current.google_connect_error=!0,this.notify("verify-account-google-failed"),alert("Sorry, looks like there was a problem connecting to google. Please try refreshing the page or entering a password instead."),this.unDisableButtons()},o.prototype.verifyButtonClicked=function(){return this.disableVerifyButton(),this.validatePasswords()?$.ajax({url:$r.api_v0_set_password_path({subdomain_param:"api",password:this.ui.$enterPasswordInput.val()}),type:"POST",success:function(t){return function(e){return e.success?(t.notify("verify-account-password-set"),t.trigger("step_complete")):(t.unDisableButtons(),e.errors&&$a.log(e.errors),alert("Sorry, something went wrong! Please refresh the page and try again."))}}(this)}):(this.informUserThatValidationFailed(),this.unDisableButtons())},o.prototype.validatePasswords=function(){return""!==this.ui.$enterPasswordInput.val()&&this.ui.$enterPasswordInput.val()===this.ui.$reEnterPasswordInput.val()},o.prototype.informUserThatValidationFailed=function(){return this.ui.$enterPasswordFormGroup.addClass("has-error"),this.ui.$reEnterPasswordFormGroup.addClass("has-error"),alert("Password fields cannot be blank and must match each other.")},o.prototype.disableYahooButton=function(){return this.ui.$yahooButton.addClass("disabled"),this.ui.$yahooIcon.removeClass("fa-yahoo").addClass("fa-spinner fa-spin")},o.prototype.disableGoogleButton=function(){return this.ui.$googleButton.addClass("disabled"),this.ui.$googleIcon.removeClass("fa-google-plus").addClass("fa-spinner fa-spin")},o.prototype.disableVerifyButton=function(){return this.ui.$verifyButton.addClass("disabled"),this.ui.$verifyButton.html('<i class="fa fa-lg fa-spinner fa-spin" />'),this.ui.$enterPasswordFormGroup.hasClass("has-error")&&this.ui.$enterPasswordFormGroup.removeClass("has-error"),this.ui.$reEnterPasswordFormGroup.hasClass("has-error")?this.ui.$reEnterPasswordFormGroup.removeClass("has-error"):void 0},o.prototype.unDisableButtons=function(){return this.ui.$googleButton.removeClass("disabled"),this.ui.$verifyButton.removeClass("disabled"),this.ui.$googleIcon.removeClass("fa-spinner fa-spin").addClass("fa-google-plus"),this.ui.$verifyButton.html("VERIFY ACCOUNT")},o.prototype.notify=function(t){return Academia.RegPath.broccoli.notify(t)},o}(Backbone.View)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.AugmentableWorks=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.url=function(){return $r.api_v0_user_works_url({user_id:$current_user.id,suggest_tags:!0,editable:!0})},o.prototype.model=Academia.RegPath.AugmentableWork,o.prototype.initialize=function(t,e){return this.source=null!=e?e.source:void 0,this.suggestionSource=null!=e?e.suggestionSource:void 0,this.workId=null!=e?e.workId:void 0,o.__super__.initialize.apply(this,arguments)},o.prototype.parse=function(t){var e,o;return e=_.find(t.works,function(t){return t.id===this.workId}),o=_.sortBy(_.without(t.works,e),function(t){var e;return e=_.filter(t.suggested_co_author_tags,function(t){return!t.tagged_user_id}),-e.length+t.co_author_tags.length/100}),e&&o.unshift(e),_(o).map(function(t){return function(e){return new Academia.RegPath.AugmentableWork(e,{includeSuggestions:!0,source:t.source,suggestionSource:t.suggestionSource})}}(this))},o}(Backbone.Collection)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.SuggestedInterests=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.modelName="interest",o.prototype.url=$r.api_v0_registration_interests_path({subdomain_param:"api"}),o.prototype.parse=function(t){return null!=t?t.interests:void 0},o}(Academia.RegPath.SuggestionCollection)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.SuggestedUsers=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.modelName="user",o.prototype.url=$r.api_v0_registration_followees_path({subdomain_param:"api"}),o.prototype.parse=function(t){return null!=t?t.followees:void 0},o}(Academia.RegPath.SuggestionCollection)}.call(this),function(){var t=function(t,o){function i(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return i.prototype=o.prototype,t.prototype=new i,t.__super__=o.prototype,t},e={}.hasOwnProperty;Academia.RegPath.AugmentableWork=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.url=function(){return $r.api_v0_work_path({id:this.get("id"),subdomain_param:"api"})},o.prototype.initialize=function(t,e){return o.__super__.initialize.apply(this,arguments),this._initAuthors(e),this._initResearchInterests(e)},o.prototype._initAuthors=function(t){var e;return this.authors=new Works.CoauthorTags(this.get("co_author_tags"),{work_id:this.get("id"),source:t.source,includeOwner:$current_user}),t.includeSuggestions?(e=this.get("suggested_co_author_tags"),_(e).each(function(){return function(e){return e.source=t.suggestionSource}}(this)),this.authors.add(e)):void 0},o.prototype._initResearchInterests=function(t){return this.researchInterests=new Works.ResearchInterests(this.get("research_interests"),{work_id:this.get("id")}),t.includeSuggestions?this.researchInterests.add(this.get("suggested_research_interests")):void 0},o.prototype.toJSON=function(){return{work:o.__super__.toJSON.apply(this,arguments)}},o.prototype.validate=function(){return $h.isBlank(this.get("title"))?"Title is required":void 0},o.prototype.save=function(){return this.set("co_author_tags",this.authors.toJSON()),this.set("research_interests",this.researchInterests.toJSON()),o.__super__.save.apply(this,arguments)},o}(Backbone.Model)}.call(this),function(){var t,e,o,i,n,r,s=function(t,e){function o(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},a={}.hasOwnProperty;t=.6,n=.4,r=12e3,o=24,i=r/o,e=n/o,Academia.RegPath.WorkUploadModel=function(o){function n(){return n.__super__.constructor.apply(this,arguments)}return s(n,o),n.prototype.sync=function(){return!1},n.prototype.initialize=function(){return this._suggestTitleFromFileName(),this.on("progress",function(e){return function(o){var i;return i=o.loaded/o.total,e.set("uploadProgress",i*t)}}(this)),this.on("done",function(t){return function(e){return t.set("attachment",new Works.Attachment(e.result.attachment)),t._beginTitleParsing()}}(this))},n.prototype.saveWork=function(){return $.ajax({type:"POST",dataType:"json",contentType:"application/json",url:$r.api_v0_works_path({subdomain_param:"api"}),data:JSON.stringify(this._dataToSave())})},n.prototype._dataToSave=function(){return{work:{title:this.get("title")},section_name:"Papers",attachments:[this.get("attachment").attributes],research_interests:[],source:"reg_path_upload_papers"}},n.prototype._suggestTitleFromFileName=function(){var t;return t=this._title_from_filename(this.get("file_name")),this.set({suggestion:t,title:t}),this.title_parsed=!1},n.prototype._title_from_filename=function(t){return t=t.replace(/(\.[a-z]+)*$/g,""),t=t.replace(/([a-z])([A-Z])/g,"$1 $2"),t=t.replace(/_/g," "),t=t.replace(/(\w)\.(\w)/g,"$1 $2"),t=t.replace(/\s+/g," "),t=t.charAt(0).toUpperCase()+t.slice(1),0===t.length?"Untitled":t},n.prototype._beginTitleParsing=function(){var t,o;return o=new Works.AttachmentParser({attachment_id:this.get("attachment").get("id"),timeout:r}),o.run().then(function(t){return function(e){return e?(t.set({suggestion:e,title:e}),t.title_parsed=!0):t._suggestTitleFromFileName()}}(this)).fail(function(t){return function(){return t._suggestTitleFromFileName()}}(this)).always(function(e){return function(){return clearInterval(t),e.set("uploadProgress",1),e.set("uploaded",!0),e.trigger("titleParseFinished")}}(this)),t=setInterval(function(t){return function(){var o;return o=t.get("uploadProgress")+e,t.set("uploadProgress",o)}}(this),i)},n}(Backbone.Model)}.call(this),function(){Academia.RegPath.SignupToDownload=function(){function t(t){this.downloadData=t.download,this.monthlyVisitors=t.monthlyVisitors,this.uploadValueProp=t.uploadValueProp,this.setupUI(),this.hidePositionGridIfNeeded(),this.initializeModels(),this.initializePageManager(),this.showWelcomeMessage()}return t.prototype.maxShownClusters=4,t.prototype.worksToTag=5,t.prototype.initializeModels=function(){return Academia.RegPath.affiliation=new Backbone.Model(c.User.current.affiliation()),Academia.RegPath.suggestedClusters=new Works.SuggestedClusters([],{highConfidenceThreshold:.75,source:"reg_path_claim_your_papers"}),Academia.RegPath.suggestedCoauthors=new Works.SuggestedCoauthors([],{source:"reg_path_coauthor_review"}),Academia.RegPath.worksUploaded=new Backbone.Collection([],{model:Academia.RegPath.WorkUploadModel}),Academia.RegPath.suggestedClusters.fetch()},t.prototype.initializePageManager=function(){return new Academia.RegPath.PageManagerView({el:this.ui.$stepContainer,skipUrl:function(){return c.User.current.url},backUrl:"/"+this.downloadData.work_id,routerRoot:"/RegisterToDownload",showProgress:!0,steps:[{path:"CurrentPosition",viewClass:Academia.RegPath.CurrentPositionGrid,options:{el:this.ui.$positionGrid}},{path:"ClaimPapers",viewClass:Academia.RegPath.ClusterCollectionController,shouldSkip:function(t){return function(){return t.shouldSkipPaperClaim()}}(this),options:{maxShownClusters:this.maxShownClusters},subSteps:this.maxShownClusters},{path:"ReviewCoauthors",viewClass:Academia.RegPath.CoauthorReviewPage,shouldSkip:function(t){return function(){return t.shouldSkipPaperClaim()||0===Academia.RegPath.suggestedCoauthors.length}}(this)},{path:"UploadPapers",viewClass:Academia.RegPath.UploadPapersPageView,shouldSkip:function(t){return function(){return t.shouldSkipPaperUpload()}}(this),options:{academiaMonthlyVisitors:this.monthlyVisitors,valueProp:this.uploadValueProp}},{path:"AddCoauthors",viewClass:Academia.RegPath.AddTagsPageView,shouldSkip:function(t){return function(){return t.shouldSkipPaperUpload()||0===Academia.RegPath.worksUploaded.length}}(this),options:{worksToTag:this.worksToTag},subSteps:this.worksToTag},{path:"Institution",viewClass:Academia.RegPath.SetInstitutionView,shouldSkip:function(t){return function(){return t.nonInstitutionalPosition()}}(this),options:{showHeadline:!0}},{path:"DiscoverResearch",viewClass:Academia.RegPath.DiscoverResearchPage},{path:"Download",viewClass:Academia.RegPath.SutdDownload,options:{download:this.downloadData}}]})},t.prototype.setupUI=function(){return this.ui={$stepContainer:$("#reg-path-step-container"),$positionGrid:$("#current-position-grid")}},t.prototype.hidePositionGridIfNeeded=function(){return"#CurrentPosition"!==window.location.hash?this.ui.$positionGrid.addClass("hidden"):void 0},t.prototype.showWelcomeMessage=function(){return new Academia.RegPath.WelcomeNotice({message:"Thanks for joining the Academia.edu community! Your download will be ready in a few moments."})},t.prototype.nonInstitutionalPosition=function(){var t;return t=Academia.RegPath.affiliation.get("category"),"independent"===t||"not"===t},t.prototype.nonResearcherPosition=function(){var t;return"not"===Academia.RegPath.affiliation.get("category")?!0:7===(null!=(t=Academia.RegPath.affiliation.get("position"))?t.id:void 0)},t.prototype.shouldSkipPaperClaim=function(){return this.nonResearcherPosition()?!0:Academia.RegPath.suggestedClusters.fetched&&0===Academia.RegPath.suggestedClusters.getHighConfidenceClusters().length},t.prototype.shouldSkipPaperUpload=function(){return this.nonResearcherPosition()?!0:Academia.RegPath.suggestedClusters.getTotalClaimedCount()>0},t}()}.call(this),function(){Academia.RegPath.TaggedCoauthor=function(){function t(t){this.invitingCoauthor=null!=t?t.invitingCoauthor:void 0,Academia.RegPath.eventDispatcher=_.clone(Backbone.Events),this.setupUI(),this.startListeningForEvents(),this.initializeModels(),this.initializePageManager(),this.showWelcomeMessage()}return t.prototype.maxShownClusters=4,t.prototype.setupUI=function(){return this.ui={$stepContainer:$("#reg-path-step-container"),$positionGrid:$("#current-position-grid")}},t.prototype.startListeningForEvents=function(){return Academia.RegPath.broccoli=new Aedu.Broccoli("coauthors_flow"),Academia.RegPath.broccoli.enable({listenForLocationHashChange:!0})
},t.prototype.initializeModels=function(){return Academia.RegPath.affiliation=new Backbone.Model(c.User.current.affiliation())},t.prototype.initializePageManager=function(){return new Academia.RegPath.PageManagerView({el:this.ui.$stepContainer,skipUrl:c.User.current.url,routerRoot:"/AcceptCoauthorTag",showProgress:!0,steps:this.flowSteps()})},t.prototype.showWelcomeMessage=function(){return new Academia.RegPath.CoauthorWelcomeNotice(this.invitingCoauthor)},t.prototype.nonInstitutionalPosition=function(){var t;return t=Academia.RegPath.affiliation.get("category"),"independent"===t||"not"===t},t.prototype.alreadyGoogleConnected=function(){return Aedu.User.current.google_connected===!0||Aedu.User.current.google_connect_error===!0},t.prototype.flowSteps=function(){return[{path:"OtherPapers",viewClass:Academia.RegPath.OtherPapersController,options:{skipUrl:"/AcceptCoauthorTag#VerifyAccount"},subSteps:3},{path:"VerifyAccount",viewClass:Academia.RegPath.VerifyAccount,options:{model:Aedu.User.current},shouldSkip:function(t){return function(){return t.alreadyGoogleConnected()}}(this)},{path:"CurrentPosition",viewClass:Academia.RegPath.CurrentPositionGrid,options:{el:this.ui.$positionGrid}},{path:"Institution",viewClass:Academia.RegPath.SetInstitutionView,shouldSkip:function(t){return function(){return t.nonInstitutionalPosition()}}(this)},{path:"DiscoverResearch",viewClass:Academia.RegPath.DiscoverResearchPage,subSteps:2}]},t}()}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/add_tags_page"]=function(){var t=[];return t.push('<div class="clearfix text-center margin-bottom-9x"><h3 class="text-bold margin-top-0x">Add Your Co-Authors</h3><p class="text-italic">Add research interests so we can distribute your work more widely, and tag co-authors to share credit.</p></div><div class="container-fluid"><div class="row"><div class="col-xs-8 col-xs-offset-2"><div class="js-reg-path-add-tags-work-container"><div class="text-center"><h4>Loading your papers...</h4></div><div class="margin-bottom-2x"></div><div class="text-center"><i class="fa fa-spinner fa-spin fa-3x"></i></div></div></div></div></div>'),t.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/add_tags_work"]=function(t){var e,o=[],i=t||{};return function(t,i,n,r,s,a){o.push('<div class="panel panel-flat margin-0x"><div class="panel-body padding-6x">'),a>1&&o.push('<div class="margin-bottom-2x pull-right"><small class="text-gray">Paper '+jade.escape(null==(e=r+1)?"":e)+" of "+jade.escape(null==(e=a)?"":e)+"</small></div>"),o.push('<div class="form-group"><label><small class="text-gray">Title</small></label><input'+jade.attr("value",s.title,!0,!1)+' class="js-reg-path-tags-work-title form-control text-bold text-gray-dark"/></div><div class="form-group"><label><small class="text-gray">Authors</small></label><div class="reg-path-tags-input-wrapper select2-no-default-pills"><input id="authors-input" placeholder="Add a co-author..." type="hidden" class="form-control reg-path-tags-text-input padding-0x"/><div class="reg-path-tags-pills-container padding-4x bg-off-white"><ul class="js-reg-path-tags-coauthors-list list-pills list-inline"></ul></div></div></div><div class="form-group margin-0x"><label><small class="text-gray">Research Interests</small></label><div class="reg-path-tags-input-wrapper select2-no-default-pills"><input id="interests-input" placeholder="Add a research interest..." type="hidden" class="form-control reg-path-tags-text-input padding-0x"/><div class="reg-path-tags-pills-container padding-4x bg-off-white"><ul class="js-reg-path-tags-interests-list list-pills list-inline"></ul></div></div></div></div></div><div class="clearfix"><div id="validation-error" class="text-wide-letter-space text-danger pull-right hidden"><i class="fa fa-warning"></i>&nbsp;&nbsp;<span class="js-validation-text"></span></div></div><div class="clearfix margin-top-8x"><form><div class="pull-left">'),r>0&&o.push('<button data-broccoli-component="add-coauthors-back-button" class="js-reg-path-tags-to-previous-work btn btn-lg btn-none dim pull-left padding-left-0x"><i class="fa fa-angle-left"></i>&nbsp;&nbsp;&nbsp;<span class="text-bold text-gray-dark text-uppercase">BACK</span></button>'),o.push('</div><div class="pull-right">'),a-1>r?(n="SAVE & CONTINUE",i="btn-primary",t="add-coauthors-continue-button"):(n="DONE",i="btn-success",t="add-coauthors-done-button"),o.push('<button data-loading-text="&lt;i class=&quot;fa fa-spinner fa-spin fa-2x&quot;&gt;&lt;/i&gt;" type="submit"'+jade.attr("data-broccoli-component",t,!0,!1)+jade.cls(["js-reg-path-tags-submit-work","btn","btn-lg","pull-right","margin-top-4x",i],[null,null,null,null,null,!0])+'><div class="text-bold text-uppercase">'+jade.escape(null==(e=n)?"":e)+"</div></button></div></form></div>")}.call(this,"broccoliLabel"in i?i.broccoliLabel:"undefined"!=typeof broccoliLabel?broccoliLabel:void 0,"btnClass"in i?i.btnClass:"undefined"!=typeof btnClass?btnClass:void 0,"btnText"in i?i.btnText:"undefined"!=typeof btnText?btnText:void 0,"currentCollectionIndex"in i?i.currentCollectionIndex:"undefined"!=typeof currentCollectionIndex?currentCollectionIndex:void 0,"work"in i?i.work:"undefined"!=typeof work?work:void 0,"worksCount"in i?i.worksCount:"undefined"!=typeof worksCount?worksCount:void 0),o.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/cluster_review_page"]=function(t){var e,o=[],i=t||{};return function(t){o.push('<div class="cluster-review-page"><div class="row cluster-review-page-content"><div class="col-xs-12"><div class="row"><div class="col-xs-12 col-md-8 col-md-offset-2"><div class="row"><div class="clearfix text-center margin-bottom-2x"><div class="col-xs-12"><h3 class="text-bold">Confirm Your Papers</h3><p class="text-italic">Papers claimed and uploaded on Academia.edu receive 73% more<sup><a href="https://www.academia.edu/12297791/Open_Access_Meets_Discoverability_Citations_to_Articles_Posted_to_Academia.edu" target="_blank">*</a></sup> citations over 5 years.</p></div></div></div><div class="row"><div class="reg-path-suggestion-module panel"><div class="reg-path-suggestion-module-header bg-off-white panel-heading no-select"><div class="row"><div class="col-xs-12 col-sm-6"><div class="cluster-review-page-header-item"><div class="js-cluster-review-page-toggle-wrapper clickable"><span class="cluster-review-page-toggle-all-checkbox"><input type="checkbox" value="Toggle All" checked="checked" class="js-cluster-review-page-toggle-all-checkbox"/></span>&nbsp;&nbsp;<small class="text-gray">Select All</small></div></div></div><div class="col-xs-12 col-sm-6"><div class="cluster-review-page-confirmed-count-container pull-right hidden-xs"><span class="cluster-review-page-header-item text-bold text-uppercase text-gray-light"><small>Confirmed &nbsp;&nbsp;</small></span><span'+jade.cls(["cluster-review-page-confirmed-count","badge",t>0?"bg-blue-light":"bg-gray-light"],[null,null,!0])+">"+jade.escape(null==(e=t)?"":e)+'</span></div></div></div></div><ul class="reg-path-suggestion-module-collection-view-container js-cluster-review-page-works-collection list-group"></ul></div></div></div></div><div class="row"><div class="col-xs-12 col-sm-10"><div class="row"><button type="button" class="btn btn-lg btn-primary pull-right js-cluster-review-page-next-cluster cluster-review-page-next-cluster"><span class="h6 text-bold text-wide-letter-space text-uppercase"></span><div class="js-cluster-review-page-finish-spinner hidden"><i class="fa fa-spinner fa-spin fa-lg"></i></div><button type="button" class="btn btn-lg btn-none pull-right text-gray-dark js-cluster-review-page-next-cluster-with-none"><span class="h6">None of these are mine</span></button></button></div></div></div></div></div></div>')}.call(this,"confirmedCount"in i?i.confirmedCount:"undefined"!=typeof confirmedCount?confirmedCount:void 0),o.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/coauthor_review_page"]=function(){var t=[];return t.push('<div class="coauthor-review-page"><div class="row coauthor-review-page-content"><div class="col-xs-12"><div class="row"><div class="col-xs-12 col-sm-8 col-sm-offset-2"><div class="row"><div class="clearfix text-center margin-bottom-2x"><div class="col-xs-12"><h3 class="text-bold">Confirm Your Co-Authors</h3></div></div><ul class="panel list-group reg-path-suggestion-module-collection-view-container js-coauthor-review-page-coauthors-collection"></ul></div></div></div></div></div><div class="row"><div class="col-xs-12 col-sm-10"><div class="row"><button type="button" class="btn btn-lg btn-primary pull-right js-coauthor-review-page-finish reg-path-suggestions-finish-button"><span class="h6 text-bold text-wide-letter-space text-uppercase"></span><div class="js-coauthor-review-page-finish-spinner hidden"><i class="fa fa-spinner fa-spin fa-lg"></i></div></button><button type="button" class="btn btn-lg btn-none pull-right text-gray-dark js-coauthor-review-page-reject-all"><span class="h6">None of these are correct</span></button></div></div></div></div>'),t.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/combined_claim/combined_claim_coauthor"]=function(t){var e,o=[],i={},n=t||{};return function(t,n,r,s){i.coauthorAvatar=function(){this&&this.block,this&&this.attributes||{};o.push(void 0!=r.photo_url?"<img"+jade.attr("src",r.photo_url,!0,!1)+' class="img-rounded suggested-coauthor-avatar-small"/>':"<div"+jade.cls(["suggested-coauthor-initials-container","margin-0x","padding-2x","media_v2",n],[null,null,null,null,!0])+'><div class="suggested-coauthor-initials-text media-middle margin-0x h3 text-white text-bold">'+jade.escape(null==(e=r.initials)?"":e)+"</div></div>")},i.coauthorHeader=function(){var i=(this&&this.block,this&&this.attributes||{},t.t("reg_path.templates.suggested_coauthor_with_works.wrote_papers",{name:r.name,count:r.papers.length}));o.push('<p class="text-gray-darker margin-bottom-1x"><span class="text-bold">'+jade.escape(null==(e=i)?"":e)+"</span>"),r.obfuscated_email&&o.push('<p class="h6 margin-vertical-0x text-gray">'+jade.escape(null==(e=r.obfuscated_email)?"":e)+"</p>"),o.push("</p>")},i.paperList=function(){var i=(this&&this.block,this&&this.attributes||{},t.t("reg_path.templates.suggested_coauthor_with_works.show_more_papers"));o.push('<ul class="suggested-coauthor-paper-titles-list list-unstyled margin-bottom-0x margin-right-2x">'),function(){var t=r.papers;if("number"==typeof t.length)for(var i=0,n=t.length;n>i;i++){var s=t[i];o.push("<li"+jade.attr("title",s.title,!0,!1)+' class="js-combined-claim-coauthor-paper-title-li js-tooltip text-truncate"><i class="fa fa-file-text-o text-gray-light margin-right-1x"></i><span class="text-gray margin-top-0x">'+jade.escape(null==(e=s.title)?"":e)+"</span></li>")}else{var n=0;for(var i in t){n++;var s=t[i];o.push("<li"+jade.attr("title",s.title,!0,!1)+' class="js-combined-claim-coauthor-paper-title-li js-tooltip text-truncate"><i class="fa fa-file-text-o text-gray-light margin-right-1x"></i><span class="text-gray margin-top-0x">'+jade.escape(null==(e=s.title)?"":e)+"</span></li>")}}}.call(this),r.papers.length>3&&o.push('<li class="js-combined-claim-coauthor-toggle-paper-titles-list"><a class="js-combined-claim-coauthor-toggle-paper-titles-list-text text-primary">'+jade.escape(null==(e=i)?"":e)+"</a></li>"),o.push("</ul>")},i.claimCheckbox=function(){var t=(this&&this.block,this&&this.attributes||{},s?"fa-check-square text-success":"fa-square-o text-gray-light");o.push('<i data-broccoli-component="combined-claim-suggested-coauthor-checkbox"'+jade.cls(["fa","fa-lg","js-combined-claim-coauthor-claim-checkbox","suggested-coauthor-claim-checkbox",t],[null,null,null,null,!0])+"></i>")},o.push('<div class="panel panel-flat combined-claim-panel clickable"><div class="panel-body js-clickable-paper-area"><div class="media_v2 margin-bottom-2x"><div class="media-left media-middle">'),i.coauthorAvatar(),o.push('</div><div class="media-body media-middle padding-horizontal-2x">'),i.coauthorHeader(),o.push('</div><div class="media-right media-middle">'),i.claimCheckbox(),o.push('</div></div><hr class="margin-vertical-2x"/>'),i.paperList(),o.push("</div></div>")}.call(this,"I18n"in n?n.I18n:"undefined"!=typeof I18n?I18n:void 0,"bgClass"in n?n.bgClass:"undefined"!=typeof bgClass?bgClass:void 0,"coauthor"in n?n.coauthor:"undefined"!=typeof coauthor?coauthor:void 0,"isClaimed"in n?n.isClaimed:"undefined"!=typeof isClaimed?isClaimed:void 0),o.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/combined_claim/combined_claim_confirm_button"]=function(t){var e,o=[],i=t||{};return function(t,i,n,r,s){var a=s||0===r?"disabled":"",l=t.t(i?"reg_path.templates.combined_claim_footer.confirm_allclaimed":"reg_path.templates.combined_claim_footer.confirm_selectedclaimed");o.push("<button"+jade.attr("data-broccoli-component","combined-claim-confirm-button"+n,!0,!1)+jade.cls(["js-combined-claim-confirm-button","confirm-button","btn","btn-lg","btn-success","margin-left-2x",a],[null,null,null,null,null,null,!0])+">"),o.push(s?'<i class="fa fa-spinner fa-spin fa-lg"></i>':'<span class="h6 text-bold text-wide-letter-space text-uppercase">'+jade.escape(null==(e=l)?"":e)+'</span><span class="confirm-button-claim-count h6 text-bold padding-horizontal-2x margin-left-2x">'+jade.escape(null==(e=r)?"":e)+"</span>"),o.push("</button>")}.call(this,"I18n"in i?i.I18n:"undefined"!=typeof I18n?I18n:void 0,"allClaimed"in i?i.allClaimed:"undefined"!=typeof allClaimed?allClaimed:void 0,"broccoliSuffix"in i?i.broccoliSuffix:"undefined"!=typeof broccoliSuffix?broccoliSuffix:void 0,"numClaimed"in i?i.numClaimed:"undefined"!=typeof numClaimed?numClaimed:void 0,"spinnerActivated"in i?i.spinnerActivated:"undefined"!=typeof spinnerActivated?spinnerActivated:void 0),o.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/combined_claim/combined_claim_control_bar"]=function(){var t=[],e="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3";return t.push('<div class="row"><div'+jade.cls(["padding-horizontal-0x","border-top-gray-lighter",e],[null,null,!0])+'><div class="pull-left padding-left-5x valign-wrapper js-combined-claim-control-bar-text-container"></div><div class="pull-right valign-wrapper js-combined-claim-control-bar-select-all-checkbox-container"></div></div></div>'),t.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/combined_claim/combined_claim_control_bar_select_all_checkbox"]=function(t){var e,o=[],i=t||{};return function(t,i){var n=t.t("reg_path.templates.combined_claim_control_bar.select_all"),r=i?"fa-check-square text-success":"fa-square-o text-gray-light";o.push('<div class="js-combined-claim-select-all-container padding-right-4x clickable valign-item"><small class="padding-right-2x text-gray">'+jade.escape(null==(e=n)?"":e)+"</small><i"+jade.cls(["fa","fa-lg","js-combined-claim-select-all-checkbox",r],[null,null,null,!0])+"></i></div>")}.call(this,"I18n"in i?i.I18n:"undefined"!=typeof I18n?I18n:void 0,"allClaimed"in i?i.allClaimed:"undefined"!=typeof allClaimed?allClaimed:void 0),o.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/combined_claim/combined_claim_control_bar_text"]=function(t){var e,o=[],i=t||{};return function(t,i){var n=t.t("reg_path.templates.combined_claim_control_bar.numcoauthors_co_authors",{numCoauthors:i});o.push('<small class="valign-item text-gray">'+jade.escape(null==(e=n)?"":e)+"</small>")}.call(this,"I18n"in i?i.I18n:"undefined"!=typeof I18n?I18n:void 0,"numCoauthors"in i?i.numCoauthors:"undefined"!=typeof numCoauthors?numCoauthors:void 0),o.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/combined_claim/combined_claim_footer"]=function(t){var e=[],o=t||{};return function(t){var o="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3";e.push('<div class="row bg-off-white padding-3x border-top-gray-lighter"><div'+jade.cls(["padding-horizontal-0x",o],[null,!0])+">"),e.push(t?'<div class="js-combined-claim-opt-in-container-wrapper pull-left"></div><div class="js-combined-claim-confirm-button-container pull-right"></div><div class="js-combined-claim-skip-button-container pull-right"></div>':'<div class="js-combined-claim-skip-button-container pull-left"></div><div class="js-combined-claim-confirm-button-container pull-right"></div>'),e.push("</div></div>")}.call(this,"optInABTest"in o?o.optInABTest:"undefined"!=typeof optInABTest?optInABTest:void 0),e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/combined_claim/combined_claim_header"]=function(t){var e,o=[],i=t||{};return function(t,i,n){var r=1==n?t.t("reg_path.templates.combined_claim_page.title"):t.t("reg_path.templates.combined_claim_page.next_page_title",{numCoauthors:i}),s=t.t("reg_path.templates.combined_claim_page.subtitle",{numCoauthors:i});o.push('<h3 class="margin-0x text-center text-bold text-gray-darker">'+jade.escape(null==(e=r)?"":e)+'</h3><p class="margin-top-2x margin-bottom-0x text-center h6 text-gray-dark text-italic">'+jade.escape(null==(e=s)?"":e)+"</p>")}.call(this,"I18n"in i?i.I18n:"undefined"!=typeof I18n?I18n:void 0,"numCoauthors"in i?i.numCoauthors:"undefined"!=typeof numCoauthors?numCoauthors:void 0,"page"in i?i.page:"undefined"!=typeof page?page:void 0),o.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/combined_claim/combined_claim_opt_in_checkbox"]=function(t){var e,o=[],i=t||{};return function(t,i){var n=i?"fa-check-square text-success":"fa-square-o text-gray-light",r=i?"":"combined-claim-opted-out-label",s=t.t("reg_path.combined_claim.opt_in_checkbox.label_text");o.push('<div class="combined-claim-opt-in-container margin-left-2px valign-wrapper"><div data-broccoli-component="combined-claim-opt-in" class="js-combined-claim-opt-in-checkbox-container clickable valign-item"><i'+jade.cls(["fa","js-combined-claim-opt-in-checkbox","margin-right-2x",n],[null,null,null,!0])+"></i><small"+jade.cls(["text-gray",r],[null,!0])+">"+jade.escape(null==(e=s)?"":e)+'</small><i class="fa fa-question-circle margin-left-2x text-gray js-opt-in-info"></i></div></div>')}.call(this,"I18n"in i?i.I18n:"undefined"!=typeof I18n?I18n:void 0,"userOptedIn"in i?i.userOptedIn:"undefined"!=typeof userOptedIn?userOptedIn:void 0),o.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/combined_claim/combined_claim_opt_in_popover"]=function(t){var e,o=[],i=t||{};return function(t){o.push('<div class="padding-1x"><small class="text-gray">'+jade.escape(null==(e=t.t("reg_path.combined_claim.opt_in_checkbox.popover_info_text"))?"":e)+"</small></div>")}.call(this,"I18n"in i?i.I18n:"undefined"!=typeof I18n?I18n:void 0),o.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/combined_claim/combined_claim_page"]=function(){var t=[],e="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3";return t.push('<div class="container-fluid"><div class="row margin-vertical-8x"><div'+jade.cls(["js-combined-claim-header","padding-horizontal-0x",e],[null,null,!0])+'></div></div></div><!-- to account for negative margin of the control bar due to affix--><div class="margin-bottom-13x"></div><div class="js-combined-claim-control-bar combined-claim-control-bar bg-gray-lightest"></div><div class="container-fluid"><div class="row bg-gray-lightest padding-bottom-3x"><div'+jade.cls(["padding-horizontal-0x",e],[null,!0])+'><div class="js-combined-claim-collection"></div></div></div></div><!-- to provide space between the last panel and the footer--><div class="padding-8x bg-gray-lightest"></div><div class="js-combined-claim-footer combined-claim-footer"></div>'),t.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/combined_claim/combined_claim_skip_button"]=function(t){var e,o=[],i=t||{};return function(t,i,n){var r=t.t("reg_path.templates.combined_claim_footer.skip");o.push("<button"+jade.attr("data-broccoli-component","combined-claim-skip-button"+i,!0,!1)+' class="js-combined-claim-skip-button btn btn-lg btn-none text-gray">'),o.push(n?'<i class="fa fa-spinner fa-spin fa-lg"></i>':'<span class="h6 text-uppercase">'+jade.escape(null==(e=r)?"":e)+"</span>"),o.push("</button>")}.call(this,"I18n"in i?i.I18n:"undefined"!=typeof I18n?I18n:void 0,"broccoliSuffix"in i?i.broccoliSuffix:"undefined"!=typeof broccoliSuffix?broccoliSuffix:void 0,"spinnerActivated"in i?i.spinnerActivated:"undefined"!=typeof spinnerActivated?spinnerActivated:void 0),o.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/discover_research_connect_buttons"]=function(t){var e=[],o=t||{};return function(t,o,i,n,r,s){e.push('<div class="row"><div class="col-xs-4">'),o=t?"btn-default disabled":"btn-outline-facebook",e.push('<button id="discover-research-facebook" data-broccoli-component="discover-research-facebook-button"'+jade.cls(["btn","btn-lg","btn-block","btn-v-center-content","text-bold",o],[null,null,null,null,null,!0])+"><i"+jade.cls(["fa","fa-lg",t?"fa-check":"fa-facebook"],[null,null,!0])+'></i>&nbsp;&nbsp;&nbsp;\nFACEBOOK</button></div><div class="col-xs-4">'),n=i?"btn-default disabled":"btn-outline-google",e.push('<button id="discover-research-google" data-broccoli-component="discover-research-google-button"'+jade.cls(["btn","btn-lg","btn-block","btn-v-center-content","text-bold",n],[null,null,null,null,null,!0])+"><i"+jade.cls(["fa","fa-lg",i?"fa-check":"fa-google-plus"],[null,null,!0])+'></i>&nbsp;&nbsp;&nbsp;\nGOOGLE</button></div><div class="col-xs-4">'),s=r?"btn-default disabled":"btn-outline-twitter",e.push('<button id="discover-research-twitter" data-broccoli-component="discover-research-twitter-button"'+jade.cls(["btn","btn-lg","btn-block","btn-v-center-content","text-bold",s],[null,null,null,null,null,!0])+"><i"+jade.cls(["fa","fa-lg",r?"fa-check":"fa-twitter"],[null,null,!0])+"></i>&nbsp;&nbsp;&nbsp;\nTWITTER</button></div></div>")}.call(this,"facebookConnected"in o?o.facebookConnected:"undefined"!=typeof facebookConnected?facebookConnected:void 0,"fb_class"in o?o.fb_class:"undefined"!=typeof fb_class?fb_class:void 0,"googleConnected"in o?o.googleConnected:"undefined"!=typeof googleConnected?googleConnected:void 0,"google_class"in o?o.google_class:"undefined"!=typeof google_class?google_class:void 0,"twitterConnected"in o?o.twitterConnected:"undefined"!=typeof twitterConnected?twitterConnected:void 0,"twitter_class"in o?o.twitter_class:"undefined"!=typeof twitter_class?twitter_class:void 0),e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/discover_research_follow_interest"]=function(t){var e,o=[],i=t||{};return function(t,i,n){o.push('<div class="valign-item"><div class="bg-gray-lighter avatar-md avatar-rectangle margin-left-2x margin-right-3x text-center valign-wrapper"><i class="fa fa-inverse fa-tag valign-item"></i></div></div><div class="valign-item"><strong class="text-gray-dark text-truncate">'+jade.escape(null==(e=n.name)?"":e)+'</strong><span class="text-gray-light text-truncate">'+jade.escape(null==(e=t.commaizeInt(n.follower_count))?"":e)+jade.escape(null==(e=i.t("reg_path.templates.discover_research_follow_interest.followers"))?"":e)+"</span></div>")}.call(this,"$h"in i?i.$h:"undefined"!=typeof $h?$h:void 0,"I18n"in i?i.I18n:"undefined"!=typeof I18n?I18n:void 0,"interest"in i?i.interest:"undefined"!=typeof interest?interest:void 0),o.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/discover_research_follow_user"]=function(t){var e,o=[],i=t||{};return function(t,i,n,r){if(o.push('<div class="valign-item"><img'+jade.attr("src",r.photo,!0,!1)+' class="avatar-md avatar-rectangle margin-left-2x margin-right-3x"/></div><div class="valign-item"><strong class="text-gray-dark text-truncate">'+jade.escape(null==(e=r.display_name)?"":e)+'</strong><span class="text-gray-light text-truncate">'),r.is_affiliated()&&r.department)o.push(jade.escape(null==(e=r.department.university.name)?"":e));else if(r.has_research_interests()){var s=n(r.interests.slice(0,3)).map(function(t){return t.name});o.push(jade.escape(null==(e=t.to_sentence(s))?"":e))}else o.push(jade.escape(null==(e=i.t("reg_path.templates.discover_research_follow_user.independent_researcher"))?"":e));o.push("</span></div>")}.call(this,"$h"in i?i.$h:"undefined"!=typeof $h?$h:void 0,"I18n"in i?i.I18n:"undefined"!=typeof I18n?I18n:void 0,"_"in i?i._:"undefined"!=typeof _?_:void 0,"user"in i?i.user:"undefined"!=typeof user?user:void 0),o.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/discover_research_page"]=function(t){var e,o=[],i=t||{};return function(t){o.push('<div class="row"><div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2"><div class="clearfix text-center"><h3 class="text-bold">'+jade.escape(null==(e=t.t("reg_path.templates.discover_research_page.discover_more_research"))?"":e)+'</h3><p class="text-italic">'+jade.escape(null==(e=t.t("reg_path.templates.discover_research_page.follow_researchers_and_interests"))?"":e)+'</p></div><div id="discover-research-page-contents"><div class="margin-top-8x"><div class="hr-heading"><span class="hr-heading-text">'+jade.escape(null==(e=t.t("reg_path.templates.discover_research_page.find_colleagues_friends"))?"":e)+'</span></div></div><div class="margin-top-8x"><div id="discover-research-connect-buttons"></div></div><div class="margin-top-8x"><div class="hr-heading"><span class="hr-heading-text">'+jade.escape(null==(e=t.t("reg_path.templates.discover_research_page.researchers_interests"))?"":e)+'</span></div></div><div class="margin-top-8x"><div id="discover-research-follow-suggestions"></div></div><div class="row margin-top-8x"><div class="col-xs-4 col-sm-6"><a id="discover-research-back" data-broccoli-component="discover-research-back-button" class="text-bold text-gray pull-left margin-top-5x clickable"><i class="fa fa-arrow-left"></i>'+jade.escape(null==(e=t.t("reg_path.templates.discover_research_page.back"))?"":e)+'</a></div><div class="col-xs-4 col-sm-3"><a id="discover-research-skip" data-broccoli-component="discover-research-skip-button" class="text-bold text-gray pull-right margin-top-5x clickable hidden">'+jade.escape(null==(e=t.t("reg_path.templates.discover_research_page.skip"))?"":e)+'</a></div><div class="col-xs-4 col-sm-3"><button id="discover-research-finish" data-broccoli-component="discover-research-follow-button" data-loading-text="&lt;i class=&quot;fa fa-spinner fa-spin&quot;&gt;&lt;/i&gt;" class="btn btn-primary btn-lg reg-path-suggestions-finish-button text-bold pull-right disabled">'+jade.escape(null==(e=t.t("reg_path.templates.discover_research_page.follow",{count:0}))?"":e)+'</button></div></div></div><div class="row margin-top-8x"></div></div></div>')}.call(this,"I18n"in i?i.I18n:"undefined"!=typeof I18n?I18n:void 0),o.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/discover_research_suggestion"]=function(t){var e,o=[],i=t||{};return function(t,i,n){o.push('<div class="row padding-1x"><div class="col-xs-10 col-sm-11"><div class="valign-wrapper reg-path-suggestion-text-wrapper">'+(null==(e=n.render().el.innerHTML)?"":e)+'</div></div><div class="col-xs-2 col-sm-1">'),i=t?"fa-check-circle":"fa-plus-circle",o.push("<i"+jade.cls(["fa","fa-lg","reg-path-suggestion-panel-checkbox","clickable","js-reg-path-suggestion-row",i],[null,null,null,null,null,!0])+"></i></div></div>")}.call(this,"accepted"in i?i.accepted:"undefined"!=typeof accepted?accepted:void 0,"icon"in i?i.icon:"undefined"!=typeof icon?icon:void 0,"suggestionView"in i?i.suggestionView:"undefined"!=typeof suggestionView?suggestionView:void 0),o.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/discover_research_suggestions_loader"]=function(t){var e,o=[],i=t||{};return function(t){o.push('<div class="panel margin-bottom-2x"><div class="row padding-4x text-center text-uppercase text-gray-dark text-bold"><i class="fa fa-spinner fa-spin fa-lg"></i>&nbsp;&nbsp;'+jade.escape(null==(e=t)?"":e)+"...</div></div>")}.call(this,"text"in i?i.text:"undefined"!=typeof text?text:void 0),o.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/discover_research_suggestions_none"]=function(t){var e,o=[],i=t||{};return function(t,i){o.push('<div class="row padding-4x text-center"><p>'+jade.escape(null==(e=t.t("reg_path.templates.discover_research_suggestions_none.sorry_we_couldn_t"))?"":e)+"</p>"),i.User.current.facebook_connected&&i.User.current.google_connected&&i.User.current.twitter_connected||o.push("<p>"+jade.escape(null==(e=t.t("reg_path.templates.discover_research_suggestions_none.try_connecting_another_account"))?"":e)+"</p>"),o.push("</div>")}.call(this,"I18n"in i?i.I18n:"undefined"!=typeof I18n?I18n:void 0,"c"in i?i.c:"undefined"!=typeof c?c:void 0),o.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/name_only_coauthors/name_only_coauthor"]=function(){var t=[];return t.push('<div class="panel panel-flat combined-claim-panel"><div class="panel-body media_v2"><div class="media-left media-middle"><div class="js-name-only-coauthor-avatar"></div></div><div class="media-body media-middle padding-horizontal-2x"><div class="col-xs-5"><div class="row"><div class="js-name-only-coauthor-info"></div></div></div><div class="col-xs-6 col-xs-offset-1"><div class="row"><div class="js-name-only-coauthor-email"></div></div></div></div></div></div>'),t.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/name_only_coauthors/name_only_coauthor_avatar"]=function(t){var e,o=[],i=t||{};return function(t,i){o.push(void 0!=i.photo_url?"<img"+jade.attr("src",i.photo_url,!0,!1)+' class="suggested-coauthor-avatar-small img-rounded"/>':"<div"+jade.cls(["suggested-coauthor-initials-container","margin-0x","padding-2x","media_v2",t],[null,null,null,null,!0])+'><div class="suggested-coauthor-initials-text media-middle margin-0x h3 text-white text-bold">'+jade.escape(null==(e=i.initials)?"":e)+"</div></div>")}.call(this,"bgClass"in i?i.bgClass:"undefined"!=typeof bgClass?bgClass:void 0,"coauthor"in i?i.coauthor:"undefined"!=typeof coauthor?coauthor:void 0),o.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/name_only_coauthors/name_only_coauthor_email_input"]=function(t){var e=[],o=t||{};return function(t,o){e.push('<input type="email" style="width:100%;"'+jade.attr("value",o.email,!0,!1)+jade.attr("placeholder",t.t("reg_path.name_only_coauthors.coauthor_email_input.placeholder"),!0,!1)+' class="form-control js-name-only-coauthor-email-input padding-1x margin-top-1x"/><span class="js-name-only-coauthor-email-input-checkmark name-only-coauthor-email-input-checkmark fa fa-check text-success hidden"></span>')}.call(this,"I18n"in o?o.I18n:"undefined"!=typeof I18n?I18n:void 0,"coauthor"in o?o.coauthor:"undefined"!=typeof coauthor?coauthor:void 0),e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/name_only_coauthors/name_only_coauthor_info"]=function(t){var e,o=[],i=t||{};return function(t,i,n){var r=t.t("reg_path.name_only_coauthors.coauthor_info."+(n?"email_confirmed":"no_email")),s=n?"name-only-coauthors-text-success":"name-only-coauthors-text-warning";o.push('<p class="text-gray-darker margin-bottom-0x"><span class="text-bold text-truncate">'+jade.escape(null==(e=i.name)?"":e)+"</span></p><div"+jade.cls(["h6","margin-vertical-1x","text-bold",s],[null,null,null,!0])+">"+jade.escape(null==(e=r)?"":e)+"</div>")}.call(this,"I18n"in i?i.I18n:"undefined"!=typeof I18n?I18n:void 0,"coauthor"in i?i.coauthor:"undefined"!=typeof coauthor?coauthor:void 0,"validEmail"in i?i.validEmail:"undefined"!=typeof validEmail?validEmail:void 0),o.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/name_only_coauthors/name_only_coauthors_control_bar"]=function(t){var e,o=[],i=t||{};return function(t,i){var n="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3",r=t.t("reg_path.name_only_coauthors.control_bar.add_emails_for_remaining",{count:i});o.push('<div class="row"><div'+jade.cls(["padding-horizontal-0x","border-top-gray-lighter",n],[null,null,!0])+'><div class="pull-left padding-left-5x valign-wrapper"><small class="valign-item text-gray">'+jade.escape(null==(e=r)?"":e)+"</small></div></div></div>")}.call(this,"I18n"in i?i.I18n:"undefined"!=typeof I18n?I18n:void 0,"numCoauthors"in i?i.numCoauthors:"undefined"!=typeof numCoauthors?numCoauthors:void 0),o.join("")
}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/name_only_coauthors/name_only_coauthors_footer"]=function(t){var e,o=[],i={},n=t||{};return function(t){i.skipButton=function(){var i=(this&&this.block,this&&this.attributes||{},t.t("reg_path.templates.combined_claim_footer.skip"));o.push('<button data-broccoli-component="name-only-coauthors-skip-button" class="js-skip-button btn btn-lg btn-none pull-left text-gray"><span class="js-skip-button-text h6 text-uppercase">'+jade.escape(null==(e=i)?"":e)+'</span><div class="js-skip-button-spinner hidden"><i class="fa fa-spinner fa-spin fa-lg"></i></div></button>')},i.saveButton=function(){var i=(this&&this.block,this&&this.attributes||{},t.t("affiliation_editor.templates.affiliation_edit.save"));o.push('<button data-broccoli-component="name-only-coauthors-save-button" class="js-save-button confirm-button btn btn-lg btn-clear-muted disabled pull-right"><span class="h6 text-bold text-wide-letter-space text-uppercase">'+jade.escape(null==(e=i)?"":e)+"</span></button>")};var n="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3";o.push('<div class="row bg-off-white padding-3x border-top-gray-lighter"><div'+jade.cls(["padding-horizontal-0x",n],[null,!0])+">"),i.skipButton(),i.saveButton(),o.push("</div></div>")}.call(this,"I18n"in n?n.I18n:"undefined"!=typeof I18n?I18n:void 0),o.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/name_only_coauthors/name_only_coauthors_header"]=function(t){var e,o=[],i={},n=t||{};return function(t,n,r,s){i.connectGoogleButton=function(){var i=(this&&this.block,this&&this.attributes||{},"got_contacts"==s?"hidden":""),n="connected"==s?"hidden":"",r="connected"==s?"":"hidden",a=t.t("reg_path.name_only_coauthors.header.google_connect_button_text");o.push('<div data-broccoli-component="name-only-coauthors-google-connect-button"'+jade.cls(["js-connect-google-button","btn","btn-google","padding-3x",i],[null,null,null,null,!0])+"><i"+jade.cls(["fa","fa-lg","fa-google-plus","margin-right-2x",n],[null,null,null,null,!0])+"></i><span"+jade.cls(["js-connect-google-button-text","h6","text-bold",n],[null,null,null,!0])+">"+jade.escape(null==(e=a)?"":e)+"</span><span"+jade.cls(["js-connect-google-button-spinner",r],[null,!0])+'><i class="fa fa-spinner fa-spin fa-lg"></i></span></div>')};var a=t.t("reg_path.templates.combined_claim_page.title"),l=t.t("reg_path.name_only_coauthors.header.subtitle");o.push('<h3 class="margin-0x text-center text-bold text-gray-darker">'+jade.escape(null==(e=a)?"":e)+'</h3><p class="margin-top-2x margin-bottom-0x text-center h6 text-gray-dark text-italic">'+jade.escape(null==(e=l)?"":e)+"</p><div"+jade.cls(["alert","margin-top-8x","margin-bottom-0x","padding-vertical-6x","text-center",n],[null,null,null,null,null,!0])+'><div class="h5 text-bold padding-bottom-2x">'+jade.escape(null==(e=r)?"":e)+"</div>"),i.connectGoogleButton(),o.push("</div>")}.call(this,"I18n"in n?n.I18n:"undefined"!=typeof I18n?I18n:void 0,"alertClass"in n?n.alertClass:"undefined"!=typeof alertClass?alertClass:void 0,"alertMessage"in n?n.alertMessage:"undefined"!=typeof alertMessage?alertMessage:void 0,"headerState"in n?n.headerState:"undefined"!=typeof headerState?headerState:void 0),o.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/name_only_coauthors/name_only_coauthors_page"]=function(){var t=[],e="col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3";return t.push('<div class="container-fluid"><div class="row margin-vertical-8x"><div'+jade.cls(["js-name-only-coauthors-header","padding-horizontal-0x",e],[null,null,!0])+'></div></div></div><!-- to account for negative margin of the control bar due to affix--><div class="margin-bottom-13x"></div><div class="js-name-only-coauthors-control-bar combined-claim-control-bar bg-gray-lightest"></div><div class="container-fluid"><div class="row bg-gray-lightest padding-bottom-3x"><div'+jade.cls(["padding-horizontal-0x",e],[null,!0])+'><div class="js-name-only-coauthors-collection"></div></div></div></div><!-- to provide space between the last panel and the footer--><div class="padding-8x bg-gray-lightest"></div><div class="js-name-only-coauthors-footer combined-claim-footer"></div>'),t.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/no_suggested_coauthors"]=function(){var t=[];return t.push('<div class="no-suggested-coauthors-panel panel-body text-center"><div class="row"><div class="col-xs-12"><h3>No Remaining Co-authors</h3></div></div></div>'),t.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/set_institution"]=function(t){var e,o=[],i=t||{};return function(t){t&&o.push('<div class="row text-center margin-bottom-3x"><h4 class="js-reg-path-affiliation-headline text-bold">'+jade.escape(null==(e=t)?"":e)+"</h4></div>"),o.push('<div class="row"><div class="js-reg-path-affiliation-editor colxs-12 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3"></div></div>')}.call(this,"headline"in i?i.headline:"undefined"!=typeof headline?headline:void 0),o.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/step_loading"]=function(t){var e,o=[],i=t||{};return function(t){o.push('<div class="row text-center"><h4>'+jade.escape(null==(e=t)?"":e)+'</h4></div><div class="row lg-top-buffer text-center"><i class="fa fa-spinner fa-spin fa-3x"></i></div>')}.call(this,"loadingText"in i?i.loadingText:"undefined"!=typeof loadingText?loadingText:void 0),o.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/suggested_coauthor"]=function(t){var e,o=[],i=t||{};return function(t,i,n,r){o.push('<div class="row js-reg-path-suggestion-row"><div class="col-xs-2 col-sm-1"><i'+jade.cls(["js-toggle-accept","fa","fa-lg","reg-path-suggestion-panel-checkbox","clickable",r.accept?"fa-check-circle":"fa-plus-circle"],[null,null,null,null,null,!0])+'></i></div><div class="col-xs-8 col-sm-8 padding-0x"><div class="row"><div class="col-xs-12"><div class="valign-wrapper reg-path-suggestion-text-wrapper"><div class="valign-item"><span class="text-bold text-truncate">'+jade.escape(null==(e=r.name)?"":e)+'</span><span class="coauthor-review-page-coauthor-email text-gray text-truncate">'+jade.escape(null==(e=r.obfuscated_email)?"":e)+'</span></div></div></div></div></div><div class="col-xs-2 col-sm-3"><div class="coauthor-review-page-paper-count-container clickable pull-right js-coauthor-review-page-paper-count"><span class="coauthor-review-page-paper-count-text text-bold text-gray-light hidden-xs">'+jade.escape(null==(e=t.t("reg_path.templates.suggested_coauthor.papers",{count:r.tags.length}))?"":e)+"</span>&nbsp;&nbsp;<i"+jade.cls(["js-coauthor-review-page-dropdown-icon","coauthor-review-page-dropdown-icon","fa","text-gray-light",i?"fa-chevron-up":"fa-chevron-down"],[null,null,null,null,!0])+'></i></div></div><div class="container-fluid"><div class="row bg-off-white coauthor-review-work-list-wrapper"><div class="col-xs-12"><div'+jade.cls(["collapse","js-coauthor-review-page-works-container",i?"in":""],[null,null,!0])+'><br/><div class="panel"><ul class="list-group">'),function(){var t=r.tags;if("number"==typeof t.length)for(var i=0,n=t.length;n>i;i++){var s=t[i];o.push('<li class="list-group-item"><div class="row"><div class="col-xs-10"><span class="coauthor-review-page-work-title text-serif text-gray-dark js-coauthor-review-page-work-title">'+jade.escape(null==(e=s.title)?"":e)+'</span></div><div class="coauthor-review-page-work-trash"><i'+jade.attr("data-work-id",s.work_id,!0,!1)+' class="js-reject-tag fa fa-lg fa-trash-o clickable text-gray-light"></i></div></div></li>')}else{var n=0;for(var i in t){n++;var s=t[i];o.push('<li class="list-group-item"><div class="row"><div class="col-xs-10"><span class="coauthor-review-page-work-title text-serif text-gray-dark js-coauthor-review-page-work-title">'+jade.escape(null==(e=s.title)?"":e)+'</span></div><div class="coauthor-review-page-work-trash"><i'+jade.attr("data-work-id",s.work_id,!0,!1)+' class="js-reject-tag fa fa-lg fa-trash-o clickable text-gray-light"></i></div></div></li>')}}}.call(this),o.push("</ul></div></div></div></div></div></div>")}.call(this,"I18n"in i?i.I18n:"undefined"!=typeof I18n?I18n:void 0,"expanded"in i?i.expanded:"undefined"!=typeof expanded?expanded:void 0,"undefined"in i?i.undefined:void 0,"work"in i?i.work:"undefined"!=typeof work?work:void 0),o.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/suggested_work"]=function(t){var e,o=[],i=t||{};return function(t,i){o.push('<div class="row js-reg-path-suggestion-row"><div class="col-xs-2 col-sm-1"><i'+jade.cls(["fa","fa-lg","reg-path-suggestion-panel-checkbox","clickable",t?"fa-check-circle":"fa-plus-circle"],[null,null,null,null,!0])+'></i></div><div class="col-xs-10 col-sm-11 padding-0x"><div class="valign-wrapper reg-path-suggestion-text-wrapper"><div class="valign-item"><span class="cluster-review-page-work-title js-cluster-review-page-work-title text-serif">'+jade.escape(null==(e=i)?"":e)+"</span></div></div></div></div>")}.call(this,"isClaimed"in i?i.isClaimed:"undefined"!=typeof isClaimed?isClaimed:void 0,"title"in i?i.title:"undefined"!=typeof title?title:void 0),o.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/sutd_download"]=function(t){var e,o=[],i=t||{};return function(t,i,n){o.push('<div class="row"><div class="col-xs-12 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3"><div class="row text-center"><h4>Your download is ready for:</h4><h4 class="text-serif">'+jade.escape(null==(e=i.title)?"":e)+'</h4></div><div class="row text-center margin-top-8x"><a'+jade.attr("href",i.url,!0,!1)+' class="js-download-link btn btn-block btn-success btn-lg text-bold text-truncate"><i'+jade.cls(["fa",n],[null,!0])+"></i>&nbsp;&nbsp;"+jade.escape(null==(e=i.file_name)?"":e)+'</a></div><div class="row text-center margin-top-12x"><a'+jade.attr("href",t.User.current.url,!0,!1)+' class="text-gray text-bold">CONTINUE TO YOUR PROFILE\n&nbsp;&nbsp;<i class="fa fa-chevron-right"></i></a></div></div></div>')}.call(this,"c"in i?i.c:"undefined"!=typeof c?c:void 0,"download"in i?i.download:"undefined"!=typeof download?download:void 0,"iconClass"in i?i.iconClass:"undefined"!=typeof iconClass?iconClass:void 0),o.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/upload_papers_page"]=function(t){var e,o=[],i=t||{};return function(t,i,n){o.push('<div class="row"><div class="col-xs-8 col-xs-offset-2"><div class="text-center"><h4 class="margin-top-3x text-bold">'+jade.escape(null==(e=t)?"":e)+'</h4><p class="text-italic">'+(null==(e=i)?"":e)+'</p></div><div class="margin-bottom-12x"></div><div class="reg-path-upload-papers-upload-box js-reg-path-upload-papers-upload-box panel panel-flat margin-bottom-8x"><div class="panel-body"><div class="text-center margin-10x"><a class="btn btn-success reg-path-upload-papers-upload-button text-uppercase text-bold btn-lg">'+jade.escape(null==(e=n)?"":e)+'<input type="file" multiple="true" class="reg-path-upload-papers-upload-input js-reg-path-upload-papers-upload-input"/></a><br/><p class="text-gray margin-top-2x margin-bottom-0x">You can also drag and drop multiple files here.</p></div></div></div><div class="js-reg-path-upload-papers-work-list"></div><div class="row"><div class="col-xs-3"><button class="js-reg-path-upload-papers-back-button btn btn-link btn-lg text-uppercase text-bold text-gray padding-left-0x link-unstyled"><i class="fa fa-arrow-left"></i>&nbsp;&nbsp;\nBACK</button></div><div class="col-xs-3 col-xs-offset-6 margin-bottom-4x"><button data-loading-text="&lt;i class=\'fa fa-spinner fa-spin fa-2x\'&gt;&lt;/i&gt;" class="js-reg-path-upload-papers-save-button btn btn-primary btn-block text-uppercase btn-lg text-bold hidden">SAVE</button><button class="js-reg-path-upload-papers-skip-button btn btn-link btn-lg text-uppercase text-bold text-gray padding-right-0x link-unstyled pull-right">I don\'t have any</button></div></div></div></div>')}.call(this,"headline"in i?i.headline:"undefined"!=typeof headline?headline:void 0,"subhead"in i?i.subhead:"undefined"!=typeof subhead?subhead:void 0,"uploadButtonText"in i?i.uploadButtonText:"undefined"!=typeof uploadButtonText?uploadButtonText:void 0),o.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/upload_papers_paper_row"]=function(t){var e=[],o=t||{};return function(t){e.push('<div class="panel-body padding-6x"><div style="display:none;" class="js-reg-path-upload-input-section-wrapper"><div class="row"><div class="col-xs-12"><label class="margin-bottom-3x">Title</label><div class="pull-right"><i class="js-reg-path-upload-papers-delete-work fa fa-trash clickablep fa-lg text-gray"></i></div></div></div><div class="row"><div class="col-xs-12"><div class="form-group margin-bottom-0x"><input type="text" disabled="disabled"'+jade.attr("value",t.title,!0,!1)+' class="js-reg-path-upload-papers-work-title form-control"/></div></div></div></div><div class="row js-reg-path-upload-progress-section-wrapper"><div class="col-xs-12"><div class="reg-path-upload-papers-upload-progress-wrapper progress margin-bottom-0x"><div class="js-reg-path-upload-papers-upload-progress progress-bar progress-bar-success progress-bar-striped active"></div></div></div></div></div>')}.call(this,"work"in o?o.work:"undefined"!=typeof work?work:void 0),e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["reg_path/templates/verify_account"]=function(t){var e,o=[],i=t||{};return function(t,i){var n="col-xs-4 col-xs-offset-4";o.push('<div class="container-fluid"><div class="row"><div'+jade.cls([n],[!0])+'><div class="row margin-bottom-15x"><div class="text-center"><h3 class="text-bold">'+jade.escape(null==(e=t.t("reg_path.templates.verify_account.verify_your_account"))?"":e)+"</h3>"),o.push(i?'<p class="h6 text-gray-dark text-italic">'+jade.escape(null==(e=t.t("reg_path.templates.verify_account.yahoo_subtitle"))?"":e)+"</p>":'<p class="h6 text-gray-dark text-italic">'+jade.escape(null==(e=t.t("reg_path.templates.verify_account.subtitle"))?"":e)+"</p>"),o.push('</div></div><div class="row">'),o.push(i?'<button data-broccoli-component="verify-account-yahoo-connect-button" class="btn btn-lg btn-block btn-yahoo text-bold js-connect-with-yahoo-button"><i class="fa fa-lg fa-yahoo margin-right-3x js-yahoo-icon"></i><small>'+jade.escape(null==(e=t.t("reg_path.templates.verify_account.yahoo_button"))?"":e)+"</small></button>":'<button data-broccoli-component="verify-account-google-connect-button" class="btn btn-lg btn-block btn-google text-bold js-connect-with-google-button"><i class="fa fa-lg fa-google-plus margin-right-3x js-google-icon"></i><small>'+jade.escape(null==(e=t.t("reg_path.templates.verify_account.google_button"))?"":e)+"</small></button>"),o.push('</div><div class="row margin-vertical-10x"><div class="hr-heading"><span class="hr-heading-text">'+jade.escape(null==(e=t.t("reg_path.templates.verify_account.hr_heading_text"))?"":e)+'</span></div></div><div class="row margin-bottom-10x"><div class="form-group js-enter-password-form-group"><input type="password"'+jade.attr("placeholder",t.t("reg_path.templates.verify_account.enter_password"),!0,!1)+' class="form-control margin-bottom-2x js-enter-password-input"/></div><div class="form-group js-re-enter-password-form-group"><input type="password"'+jade.attr("placeholder",t.t("reg_path.templates.verify_account.retype_password"),!0,!1)+' class="form-control js-re-enter-password-input"/></div></div><div class="row"><button data-broccoli-component="verify-account-password-button" class="btn btn-lg btn-block btn-primary text-bold js-verify-account-button">'+jade.escape(null==(e=t.t("reg_path.templates.verify_account.verify_account"))?"":e)+"</button></div></div></div></div>")}.call(this,"I18n"in i?i.I18n:"undefined"!=typeof I18n?I18n:void 0,"showYahoo"in i?i.showYahoo:"undefined"!=typeof showYahoo?showYahoo:void 0),o.join("")}}.call(this);