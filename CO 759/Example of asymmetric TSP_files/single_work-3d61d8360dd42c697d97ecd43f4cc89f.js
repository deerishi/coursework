+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});var s=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(s,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.collapse"),o=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);!s&&o.toggle&&"show"==e&&(e=!e),s||n.data("bs.collapse",s=new i(this,o)),"string"==typeof e&&s[e]()})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.transitioning=null,this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};i.VERSION="3.2.0",i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var i=t.Event("show.bs.collapse");if(this.$element.trigger(i),!i.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var s=n.data("bs.collapse");if(s&&s.transitioning)return;e.call(n,"hide"),s||n.data("bs.collapse",null)}var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var r=t.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(350)[o](this.$element[0][r])}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(n,this)).emulateTransitionEnd(350):n.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=t.fn.collapse;t.fn.collapse=e,t.fn.collapse.Constructor=i,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var n,s=t(this),o=s.attr("data-target")||i.preventDefault()||(n=s.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),a=t(o),r=a.data("bs.collapse"),l=r?"toggle":s.data(),u=s.attr("data-parent"),c=u&&t(u);r&&r.transitioning||(c&&c.find('[data-toggle="collapse"][data-parent="'+u+'"]').not(s).addClass("collapsed"),s[a.hasClass("in")?"addClass":"removeClass"]("collapsed")),e.call(a,l)})}(jQuery),function(){this.MobileRegPath||(this.MobileRegPath={}),this.MobileRegPath.notifier=new c.Server.Notification("msutd"),this.MobileRegPath.notifier.notifyAndLog=function(t,e){return null==e&&(e={}),$a.log(t),this.notify({event_type:t,location:null!=e.location?e.location:void 0,attachment_id:null!=e.attachment_id?e.attachment_id:void 0,auvid:$auvid})}}.call(this),function(){this.JST||(this.JST={}),this.JST["mobile_reg_path/templates/layout"]=function(t){var e=[],i=t||{};return function(t){e.push('<div id="mobile_reg_path" class="DesignSystem"><div class="full-screen-modal-header u-pv4x u-textAlignCenter"><img'+jade.attr("src",""+t("academia-logo-redesign-2015.svg"),!0,!1)+jade.attr("onerror","this.onerror=null;this.src="+t("academia-logo-redesign-2015.png"),!0,!1)+' class="swp-mobile-signup-modal-header-logo"/><span class="swp-mobile-signup-modal-header-close u-positionAbsolute close-full-screen-modal u-clickable u-fontSize18 u-textColorGrayDark">&times;</span></div><div class="container-fluid"><div class="row"><div class="col-xs-12"><div class="full-screen-modal-page-header u-textAlignCenter u-mv4x"><span class="modal-page-header js-modal-page-header u-fontSize16"></span></div></div><div class="col-xs-12"><div class="full-screen-modal-page-content u-p0x"></div></div></div></div></div>')}.call(this,"$image_url"in i?i.$image_url:"undefined"!=typeof $image_url?$image_url:void 0),e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["mobile_reg_path/templates/no_suggested_users"]=function(){var t=[];return t.push('<li class="u-pv8x"><div class="u-fontSize24 u-textColorGray u-lineHeight1_3">None of your friends are on Academia</div></li>'),t.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["mobile_reg_path/templates/pages/enter_email_page"]=function(){var t=[];return t.push('<form class="js-mobile-signup-modal-email-form"><input type="email" placeholder="Email" class="js-email TextInput"/><div class="u-mt3x"><input type="submit" disabled="disabled" value="Submit" class="js-submit-email Button Button--block Button--disabled"/></div></form>'),t.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["mobile_reg_path/templates/pages/enter_name_page"]=function(){var t=[];return t.push('<form class="js-mobile-signup-modal-final-form"><input type="text" placeholder="First Name" id="user_first_name" class="TextInput js-first-name"/><div class="u-mt3x"><input type="text" placeholder="Last Name" id="user_last_name" class="TextInput js-last-name"/></div><div class="u-mt3x"><input type="password" placeholder="Password" id="user_password" class="TextInput js-password"/></div><div class="u-mt3x"><input type="submit" disabled="disabled" value="Submit" class="js-submit-name Button Button--block Button--green"/></div></form>'),t.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["mobile_reg_path/templates/pages/sent_email_page"]=function(){var t=[];return t.push('<div class="u-textAlignCenter u-mb4x"><i class="fa fa-check-circle-o u-textColorGreen u-fontSize16"></i>&nbsp;&nbsp;<span class="u-textColorGreen u-fontWeight700 u-fontSize16">Email Sent</span></div><button class="js-sent-email-finished Button Button--inverseGray Button--mobile-xxl Button--block">Continue Reading</button>'),t.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["mobile_reg_path/templates/pages/sent_email_with_fb_page"]=function(){var t=[];return t.push('<div class="u-textAlignCenter"><i class="fa fa-check-circle-o u-textColorGreen u-fontSize16"></i>&nbsp;&nbsp;<span class="u-textColorGreen u-fontWeight700 u-fontSize16">Email Sent</span></div><div class="u-mb6x"><button class="js-swp-mobile-signup-fb-connect Button Button--facebook Button--block u-mt4x"><i class="fa fa-facebook"></i>&nbsp;&nbsp; Find Friends</button></div><div class="js-suggested-academics u-fontSize20 u-pb6x hidden u-textAlignCenter">Suggested Academics</div><ul class="js-user-suggestions-list swp-mobile-signup-user-suggestions-list list-unstyled"></ul><div class="swp-mobile-signup-close-fb-bar u-p4x u-bgColorWhite js-mobile-follow-all hidden"><button class="js-sent-email-finished Button Button--green Button--lg Button--block">follow all</button></div>'),t.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["mobile_reg_path/templates/suggested_user"]=function(t){var e,i=[],n=t||{};return function(t,n){var s=n.user;i.push('<div class="u-displayFlex u-alignItemsCenter"><img'+jade.attr("src",s.photo,!0,!1)+' class="Avatar Avatar--sm u-mr2x"/><div class="u-flexGrow1 u-textTruncate"><div class="u-fontSize14 u-textTruncate u-fontWeight700">'+jade.escape(null==(e=s.display_name)?"":e)+'</div><div class="u-fontSize13 u-textTruncate">'+jade.escape(null==(e=t)?"":e)+'</div></div><div class="u-ml2x"><button'+jade.attr("data-follow-user-id",s.id,!0,!1)+' data-follow-user-source="mobile_signup_to_download"'+jade.attr("style",n.followedByCurrentUser?"display: none":!1,!0,!1)+' class="Button Button Button--green Button--sm u-ph2x">Follow</button><button'+jade.attr("data-unfollow-user-id",s.id,!0,!1)+jade.attr("style",n.followedByCurrentUser?!1:"display: none",!0,!1)+' class="Button Button--inverseGreen Button--sm u-ph2x">Following</button></div></div>')}.call(this,"reason"in n?n.reason:"undefined"!=typeof reason?reason:void 0,"suggestion"in n?n.suggestion:"undefined"!=typeof suggestion?suggestion:void 0),i.join("")}}.call(this),function(){this.MobileRegPath.Layout=Backbone.View.extend({template:"mobile_reg_path/templates/layout",events:{"click .close-full-screen-modal":"closeMobileRegPath","click .js-sent-email-finished":function(){return this.closeMobileRegPath(!1)}},initialize:function(t){return this.container=$("#full-screen-modal"),this.attachment_id=t.attachment_id,this.model=new MobileRegPath.newUser({attachment_id:this.attachment_id,user_source:"mobile_download"}),this.container.html(this.render().el),this.container.fadeIn()},render:function(){return this.$el.html(JST[this.template]()),this.postRender(),this},postRender:function(){return this.ui={$headerText:this.$(".js-modal-page-header"),$pageContent:this.$(".full-screen-modal-page-content")},this.initializePageManager()},resetModel:function(){return this.model=new MobileRegPath.NewUser({attachment_id:this.attachment_id,user_source:"mobile_download"})},closeMobileRegPath:function(t){return null==t&&(t=!0),t&&MobileRegPath.notifier.notifyAndLog("download_closed",{attachment_id:this.attachment_id,location:this.pageManager.currentView.el.id}),this.container.fadeOut(),this.container.html(""),MobileRegPath.close=!1,"sent-email-page"===this.pageManager.currentView.el.id||"sent-email-fb-page"===this.pageManager.currentView.el.id?$(".js-swp-mobile-get-pdf-footer").remove():void 0},steps:function(){return[{viewClass:MobileRegPath.EnterEmailPage,options:{model:this.model}},{viewClass:MobileRegPath.EnterNamePage,shouldSkip:function(t){return function(){return t.skipNamePage()}}(this),options:{model:this.model}},{viewClass:MobileRegPath.SentEmailPage,shouldSkip:function(t){return function(){return t.skipSentEmailPage()}}(this),options:{model:this.model}},{viewClass:MobileRegPath.SentEmailWithFbPage,shouldSkip:function(t){return function(){return t.skipSentEmailFbPage()}}(this),options:{model:this.model}}]},initializePageManager:function(){return this.pageManager=new Academia.RegPath.PageManagerView({el:this.ui.$pageContent,steps:this.steps(),headerText:this.ui.$headerText})},skipNamePage:function(){return MobileRegPath.user_exists||!1},skipSentEmailPage:function(){return MobileRegPath.user_confirmed||!1},skipSentEmailFbPage:function(){return MobileRegPath.user_exists||!MobileRegPath.user_confirmed}})}.call(this),function(){this.MobileRegPath.EnterEmailPage=Backbone.View.extend({id:"email-page",stepNumber:1,headerText:"Enter your email address",template:"mobile_reg_path/templates/pages/enter_email_page",events:{"submit .js-mobile-signup-modal-email-form":"submitEmail","change input.js-email":"toggleSubmitButton","keydown input.js-email":"toggleSubmitButton","keyup input.js-email":"toggleSubmitButton","keydown input.js-email":"logEmailTyping"},initialize:function(){return this.sentLog=!1,this.render()},render:function(){return this.$el.html(JST[this.template]()),this.postRender()},postRender:function(){return $(".js-modal-page-header").html=this.headerText,this.ui={$email:this.$(".js-email"),$submit:this.$(".js-submit-email")},this.ui.$email.focus()},checkEmail:function(){return $.ajax({type:"POST",url:$r.partial_create_registrations_path(),data:{partial_registration:{email:this.model.get("email"),attachment_id:this.model.get("attachment_id")}}})},saveEmail:function(){return this.model.set({email:this.ui.$email.val()})},submitEmail:function(t){return t.preventDefault(),MobileRegPath.notifier.notifyAndLog("attempted_submit_email"),this.saveEmail(),this.checkEmail().done(function(t){return function(e){return e.email_invalid===!0?(alert("Please enter a valid email"),MobileRegPath.notifier.notifyAndLog("validation_failure",{attachment_id:t.model.get("attachment_id"),error:"email_invalid"})):e.user_exists===!0?(MobileRegPath.notifier.notifyAndLog("email_valid",{attachment_id:t.model.get("attachment_id"),location:"existing_user"}),MobileRegPath.user_exists=!0,t.trigger("step_complete")):(MobileRegPath.notifier.notifyAndLog("email_valid",{attachment_id:t.model.get("attachment_id"),location:"new_user"}),MobileRegPath.user_exists=!1,t.trigger("step_complete"))}}(this)).fail(function(){return alert("Something went wrong")})},disableSubmitButton:function(){return this.ui.$submit.attr("disabled",!0).removeClass("Button--green").addClass("Button--disabled")},enableSubmitButton:function(){return this.ui.$submit.removeAttr("disabled").removeClass("Button--disabled").addClass("Button--green")},toggleSubmitButton:function(){return this.ui.$email.val().length>0?this.enableSubmitButton():this.disableSubmitButton()},logEmailTyping:function(){return this.sentLog||MobileRegPath.notifier.notifyAndLog("started_typing",{attachment_id:this.model.get("attachment_id"),location:"user_email"}),this.sentLog=!0}})}.call(this),function(){this.MobileRegPath.EnterNamePage=Backbone.View.extend({id:"name-page",stepNumber:2,headerText:"Enter your name and password",template:"mobile_reg_path/templates/pages/enter_name_page",events:{"submit .js-mobile-signup-modal-final-form":"toNextPage","change input":"toggleSubmitButtonAndLog","keydown input":"toggleSubmitButtonAndLog","keyup input":"toggleSubmitButtonAndLog"},initialize:function(){return this.log={user_first_name:!1,user_last_name:!1,user_password:!1},this.render()},render:function(){return this.$el.html(JST[this.template]()),this.postRender(),this},postRender:function(){return this.ui={$password:this.$(".js-password"),$submit:this.$(".js-submit-name"),$first_name:this.$(".js-first-name"),$last_name:this.$(".js-last-name")},this.ui.$first_name.focus()},saveFields:function(){return this.model.set({password:this.ui.$password.val(),first_name:this.ui.$first_name.val(),last_name:this.ui.$last_name.val()})},generateErrorMessages:function(t){var e;return 0===t.length?"Something went wrong":(e=[],t.forEach(function(t){return"user[display_name]"!==t[0]?e.push(t[1]):void 0}),e.join("\n"))},toNextPage:function(t){return t.preventDefault(),MobileRegPath.notifier.notifyAndLog("attempted_submit"),this.saveFields(),this.model.save().done(function(t){return function(e){var i,n,s;return s=e[0],i=e[1],n=e[2],s?(window.$current_user=JSON.parse(i.user),Aedu.User.set_current($current_user),Aedu.User.current.unconfirmed?(t.MobileRegPath.user_confirmed=!1,t.tigger("step_complete")):(MobileRegPath.user_confirmed=!0,t.trigger("step_complete"))):(MobileRegPath.notifier.notifyAndLog("validation_failure",{error:JSON.stringify(n)}),alert(t.generateErrorMessages(n)))}}(this)).fail(function(){return alert("Something went wrong")})},disableSubmitButton:function(){return this.ui.$submit.attr("disabled",!0).removeClass("Button--green").addClass("Button--disabled")},enableSubmitButton:function(){return this.ui.$submit.removeAttr("disabled").removeClass("Button--disabled").addClass("Button--green")},toggleSubmitButtonAndLog:function(t){return this.ui.$password.val().length>0&&this.ui.$first_name.val().length>0&&this.ui.$last_name.val().length>0?this.enableSubmitButton():this.disableSubmitButton(),this.log[t.target.id]?void 0:(MobileRegPath.notifier.notifyAndLog("started_typing",{location:t.target.id}),this.log[t.target.id]=!0)}})}.call(this),function(){this.MobileRegPath.SentEmailPage=Backbone.View.extend({id:"sent-email-page",stepNumber:3,headerText:" ",template:"mobile_reg_path/templates/pages/sent_email_page",initialize:function(){return this.render()},render:function(){return this.$el.html(JST[this.template]()),this}})}.call(this),function(){this.MobileRegPath.SentEmailWithFbPage=Backbone.View.extend({id:"sent-email-fb-page",stepNumber:3,headerText:" ",template:"mobile_reg_path/templates/pages/sent_email_with_fb_page",events:{"click .js-swp-mobile-signup-fb-connect":"connectFB","click .js-sent-email-finished":"toNextPage"},initialize:function(){return this.suggestedUsers=new Academia.RegPath.SuggestedUsers,this.render()},connectFB:function(){var t,e;return e=function(t){return Facebook.register_connected(t)},t=function(){var t;return t=$r.api_v0_user_following_index_path({user_id:$current_user.id,subdomain_param:"api"}),$.getJSON(t)},Facebook.authorize().then(e).then(t).done(function(t){return function(e){var i,n,s,o;for(s=e.following,i=0,n=s.length;n>i;i++)o=s[i],Aedu.User.current.record_follow_of(o.id);return t.suggestedUsers.fetch(),t.disableFacebookButton(),alert("Facebook connect success")}}(this)).fail(function(){return alert("Facebook connect fail")})},render:function(){return this.$el.html(JST[this.template]()),this.postRender()},postRender:function(){return this.userSuggestionsView=new MobileRegPath.SuggestedUserListView({collection:this.suggestedUsers})},toNextPage:function(){return this.suggestedUsers.save(),this.trigger("step_complete")},disableFacebookButton:function(){return $(".js-swp-mobile-signup-fb-connect").removeClass("Button--facebook").addClass("Button--disabled").attr("disabled",!0).html("<i class='fa fa-facebook'></i>&nbsp;&nbsp; connected")}})}.call(this),function(){this.MobileRegPath.SuggestedUserView=Backbone.View.extend({tagName:"li",className:"u-borderTop1 u-borderColorGray u-pt2x u-mt2x",template:"mobile_reg_path/templates/suggested_user",initialize:function(){var t;return t=$a.is_logged_in()&&(Aedu.User.current.follows(this.model.get("user").id)||0===this.model.get("sources").length||_.contains(this.model.get("sources"),"AuthorsBookmarked")),this.model.set("followedByCurrentUser",t),this.render()},render:function(){return this.$el.html(JST[this.template]({suggestion:this.model.toJSON(),reason:this.reason(this.model.get("sources"))})),this},reason:function(t){var e,i;return _.contains(t,"Owner")?"Author":_.contains(t,"AuthorsBookmarked")?"Co-Author":0===t.length?"Facebook Friend":(i=this.model.get("user"),"independant"!==i.domain_name&&i.department?i.department.university.name:i.interests.length>0?(e=_.chain(i.interests).first(3).pluck("name").value(),$h.to_sentence(e)):"Independent Researcher")}})}.call(this),function(){this.MobileRegPath.SuggestedUserListView=Backbone.View.extend({el:$("ul.js-user-suggestions-list"),initialize:function(){return this.changeButton=!0,this.listenTo(this.collection,"sync",function(t){return function(){var e;return e=t.collection.filter(function(t){return MobileRegPath.author===t.get("user").id&&t.get("sources").push("Owner"),_.contains(MobileRegPath.workCoauthors,t.get("user").id)&&t.get("sources").push("AuthorsBookmarked"),!0}),t.collection.reset(e),t.collection.length>0?(t.collection.each(function(e){return t.addUser(e),t.changeButton?t.changeButton=t.checkSource(e):void 0}),t.showFollowAllButton(),t.changeButton?t.changeFollowAllToContinue():void 0):t.noResults()}}(this))},addUser:function(t){var e;return e=new MobileRegPath.SuggestedUserView({model:t}),$(this.$el.selector).append(e.el)},noResults:function(){return $(this.$el.selector).append(JST["mobile_reg_path/templates/no_suggested_users"])},showFollowAllButton:function(){return $(".js-mobile-follow-all").removeClass("hidden"),$(".js-suggested-academics").removeClass("hidden")},changeFollowAllToContinue:function(){return $(".js-sent-email-finished").removeClass("Button--green").addClass("Button--inverseGray").text("continue")},checkSource:function(t){return _.contains(t.get("sources"),"AuthorsBookmarked")||0===t.get("sources").length}})}.call(this),function(){this.MobileRegPath.newUser=Backbone.Model.extend({save:function(){return this.savingToServer?void 0:(this.savingToServer=!0,$.ajax({type:"POST",dataType:"json",contentType:"application/json",url:$r.registrations_path(),data:this.dataForSave(),complete:function(t){return function(){return t.savingToServer=!1}}(this)}))},dataForSave:function(){var t;return t={user:{email:this.get("email"),first_name:this.get("first_name"),last_name:this.get("last_name"),password:this.get("password")},doc_id:this.get("attachment_id"),user_source:this.get("user_source"),splash:this.get("splash"),login_redirect:this.get("login_redirect")},JSON.stringify(t)}})}.call(this),function(){this.SingleWork={preview_controller:null,register_preview_view:function(t,e){return this.preview_controller.register_view(t,e)},show_preview:function(t){return this.preview_controller.show(t)}}}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var s in i)e.call(i,s)&&(t[s]=i[s]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;SingleWork.AttachmentPreviewController=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.events={"click .js-preview-attachment-button[data-preview-attachment-id]":"previewLinkClicked"},i.prototype.initialize=function(t){var e;return t.attachment&&(this.attachment=t.attachment,this.updateUI()),t.multiple_viewable_attachments?(e=this,new HoverPopover({el:".js-viewable-attachments-button",show_delay:200,hide_delay:300,html:!0,content:this.getPopoverContent,on_shown:function(){return e.$popover_el=this.$el}})):void 0},i.prototype.previewLinkClicked=function(t){var e;return e=$(t.currentTarget).data("preview-attachment-id"),this.attachment.id!==e?(this.attachment.id=e,this.attachment.index=$(t.currentTarget).data("preview-attachment-index"),this.updateUI()):void 0},i.prototype.updateUI=function(){return SingleWork.show_preview(this.attachment.id),this.$(".js-preview-attachment-button[data-preview-attachment-id] .js-active-attachment-preview").removeClass("active-preview"),$(".js-work-download-button-container[data-preview-attachment-id]").addClass("hidden"),this.$(".js-preview-attachment-button[data-preview-attachment-id='"+this.attachment.id+"'] .js-active-attachment-preview").addClass("active-preview"),$(".js-work-download-button-container[data-preview-attachment-id='"+this.attachment.id+"']").removeClass("hidden"),this.$(".js-viewable-attachments-preview-index").text(this.attachment.index+1)},i.prototype.getPopoverContent=function(){return $(".js-viewable-attachments-popover-content").html()},i}(Backbone.View)}.call(this),function(){SingleWork.CoauthorTagApi=function(){function t(){}return t.accept=function(t,e){return this._setAccepted(t,e,!0)},t.ignore=function(t,e){return this._setAccepted(t,e,!1)},t.reset=function(t,e){return this._setAccepted(t,e,null)},t._setAccepted=function(t,e,i){return $.ajax({type:"PUT",dataType:"json",contentType:"application/json",url:$r.api_v0_work_co_author_tag_path({subdomain_param:"api",id:t,work_id:e}),data:JSON.stringify({accepted:i,coauthor_invite:this._tokenFromUrl()})})},t._tokenFromUrl=function(){var t,e,i,n;return e=$a.decompose_url(window.location.href),n=e[0],t=e[1],i=_.find(t,function(t){return"coauthor_invite"===t[0]}),null!=i?i[1]:void 0},t}()}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var s in i)e.call(i,s)&&(t[s]=i[s]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;SingleWork.CoauthorTagIgnoreModal=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.events={"click #coauthor-tag-undo-ignore":"undoIgnore"},i.prototype.show=function(){return this.$el.modal("show"),this},i.prototype.render=function(){return this.$el.modal({show:!1}),this},i.prototype.undoIgnore=function(){return this.$el.modal("hide"),SingleWork.CoauthorTagApi.reset(this.options.tag_id,this.options.work_id),SingleWork.ExternalCoauthorTagModal.open(this.options.tag_id,this.options.work_id)},i}(Backbone.View)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var s in i)e.call(i,s)&&(t[s]=i[s]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;SingleWork.CoauthorTagToolbar=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.id="coauthor-tag-request-toolbar",i.prototype.template="single_work/templates/coauthor_request_toolbar_ds",i.prototype.className="row coauthor-tag-request-toolbar-ds DesignSystem alert clearfix",i.prototype.events={"click .js-ignore-coauthor-tag-request":"ignoreCoauthorRequest","click .js-accept-coauthor-tag-request":"acceptCoauthorRequest"},i.prototype.initialize=function(t){return this.options=t},i.prototype.render=function(){return this.$el.html(JST[this.template]()),this},i.prototype.close=function(){return $(".work-body-wrapper").removeClass("coauthor-toolbar-present"),this.remove()},i.prototype.alertSuccess=function(){return this.$el.removeClass("alert-warning alert-danger"),this.$el.addClass("alert-success text-center"),this.$(".coauthor-tag-request-prompt").text("You have successfully been added as a co-author!"),this.hideActions()},i.prototype.alertError=function(){return this.$el.removeClass("alert-warning"),this.$el.addClass("alert-danger"),this.$(".coauthor-tag-request-prompt").text("Oops! We encountered an error and failed to process your request.")},i.prototype.hideActions=function(){return this.$(".js-coauthor-ignore").hide(),this.$(".js-coauthor-accept").hide(),this.$(".js-coauthor-msg").removeClass("col-xs-9").addClass("col-xs-12").addClass("u-textAlignCenter")},i.prototype.acceptCoauthorRequest=function(){},i.prototype.ignoreCoauthorRequest=function(){},i}(Backbone.View)}.call(this),function(){SingleWork.CsvView=function(){function t(t){this.container=t.container,this.identifier=t.identifier,this.attachment_id=t.attachment_id,this.$container=$(this.container),this.content=null}return t.prototype.show=function(){var t;return this.$container.find(".info_box").hide(),this.$container.find(".csv_preview_loader").show(),null!==this.content?this.$container.html(this.content):(t=$r.attachment_csv_preview_path({attachment_id:this.attachment_id}),$.ajax({url:t,dataType:"json",success:function(t){return function(e){return t.content=e.content,t.$container.html(t.content)}}(this),error:function(t){return function(){return t.$container.find(".csv_preview_loader").hide(),t.$container.find(".info_box").show()}}(this)}))},t}()}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var s in i)e.call(i,s)&&(t[s]=i[s]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;SingleWork.ExternalCoauthorTagModal=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.open=function(t,e,i,n){var s,o;return s=new SingleWork.ExternalCoauthorTagModal({el:".js-coauthor-invite-modal",tag_id:t,work_id:e,coauthor:i,abTestsHash:n}),s.render().show(),o=new SingleWork.ExternalCoauthorTagToolbar({tag_id:t,work_id:e,ab_tests_hash:n}),$(".work-body-wrapper").prepend(o.render().el)},i.prototype.events={"click .js-coauthor-invite-accept-button":"acceptCoauthorRequest"},i.prototype.initialize=function(){return this.abTestsHash=this.options.abTestsHash,this.notify("external_coauthor_invite_modal_render"),i.__super__.initialize.apply(this,arguments),this.coauthor=this.options.coauthor},i.prototype.show=function(){return this.$el.modal("show"),this},i.prototype.render=function(){return this.$el.modal({show:!1}),this.postRender(),this},i.prototype.postRender=function(){return this.ui={$acceptButtonText:this.$(".js-coauthor-invite-accept-text"),$acceptButtonSpinner:this.$(".js-coauthor-invite-accept-spinner")}},i.prototype.showSignupModal=function(){return this.$el.modal("hide"),$(".coauthor-verify-modal").modal("show")},i.prototype.acceptCoauthorRequest=function(){var t;return this.notify("external_coauthor_invite_accept",{location:"modal"}),(null!=(t=this.coauthor)?t.eligibleForAutoRegister():void 0)?this.autoRegisterUser():this.showSignupModal()},i.prototype.autoRegisterUser=function(){return this.showAcceptSpinner(),this.coauthor.autoRegister().fail(function(t){return function(){return t.hideAcceptSpinner(),t.showSignupModal()}}(this))},i.prototype.hideAcceptSpinner=function(){return this.ui.$acceptButtonText.removeClass("hidden"),this.ui.$acceptButtonSpinner.addClass("hidden")},i.prototype.showAcceptSpinner=function(){return this.ui.$acceptButtonText.addClass("hidden"),this.ui.$acceptButtonSpinner.removeClass("hidden")},i.prototype.alertSuccess=function(){return this.$el.removeClass("alert-warning alert-danger"),this.$el.addClass("alert-success text-center"),this.$(".coauthor-tag-request-prompt").text("You have successfully been added as a co-author!"),this.hideActions()},i.prototype.alertError=function(){return this.$el.removeClass("alert-warning"),this.$el.addClass("alert-danger"),this.$(".coauthor-tag-request-prompt").text("Oops! We encountered an error and failed to process your request.")},i.prototype.notify=function(t,e){var i;return null==e&&(e={}),i=new c.Server.Notification("coauthors_flow"),i.notify({event:t,work_id:this.options.work_id,tag_id:this.options.tag_id,location:null!=e.location?e.location:void 0,ab_tests:this.abTestsHash})},i}(Backbone.View)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var s in i)e.call(i,s)&&(t[s]=i[s]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;SingleWork.ExternalCoauthorTagToolbar=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.acceptCoauthorRequest=function(){return this.notify("external_coauthor_invite_accept",{location:"toolbar"}),this.showSignupModal()},i.prototype.ignoreCoauthorRequest=function(){return SingleWork.CoauthorTagApi.ignore(this.options.tag_id,this.options.work_id),this.close()},i.prototype.showSignupModal=function(){return $(".coauthor-verify-modal").modal("show")},i.prototype.render=function(){return UserSource.remember("coauthor_invite"),this.notify("external_coauthor_invite_toolbar_render"),i.__super__.render.apply(this,arguments)},i.prototype.notify=function(t,e){var i;return null==e&&(e={}),i=new c.Server.Notification("coauthors_flow"),i.notify({event:t,work_id:this.options.work_id,tag_id:this.options.tag_id,location:null!=e.location?e.location:void 0,ab_tests:this.options.ab_tests_hash})},i}(SingleWork.CoauthorTagToolbar)}.call(this),function(){SingleWork.IFrameView=function(){function t(t){this.container=t.container,this.identifier=t.identifier,this.$container=$(this.container)}return t}()}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var s in i)e.call(i,s)&&(t[s]=i[s]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;SingleWork.InternalCoauthorTagToolbar=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.autoAccept=function(){return this.acceptCoauthorRequest()},i.prototype.acceptCoauthorRequest=function(){return $a.is_logged_in()?SingleWork.CoauthorTagApi.accept(this.options.tag_id,this.options.work_id).done(function(t){return function(){return t.alertSuccess()}}(this)).fail(function(t){return function(){return t.alertError()}}(this)):$("#nav_log_in").click()},i.prototype.ignoreCoauthorRequest=function(){return $a.is_logged_in()?SingleWork.CoauthorTagApi.ignore(this.options.tag_id,this.options.work_id).done(function(t){return function(){return t.close()}}(this)).fail(function(t){return function(){return t.alertError()}}(this)):$("#nav_log_in").click()},i}(SingleWork.CoauthorTagToolbar)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var s in i)e.call(i,s)&&(t[s]=i[s]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;SingleWork.PendingExternalCoauthor=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.initialize=function(){return UserSource.remember("coauthor_invite"),i.__super__.initialize.apply(this,arguments)},i.prototype.eligibleForAutoRegister=function(){return this.get("allow_one_click_register")&&this.get("first_name")&&this.get("last_name")&&this.get("email")&&this.get("token")},i.prototype.autoRegister=function(){var t;return t=new $.Deferred,$.ajax({type:"POST",url:"/registrations",data:{user:{first_name:this.get("first_name"),last_name:this.get("last_name"),email:this.get("email")},no_password:!0,coauthor_token:this.get("token"),coauthor_work:this.get("work_id"),user_source:"coauthor_invite"},dataType:"json",xhrFields:{withCredentials:!0}}).done(function(){return function(e){var i,n,s;
return s=e[0],i=e[1],n=e[2],s?(t.resolve(),document.location.href="/StartRegPath"):t.reject()}}(this)).fail(function(){return function(){return t.reject()}}(this)),t},i}(Backbone.Model)}.call(this),function(){SingleWork.PreviewController=function(){function t(){this.views={},this.current_identifier=null}return t.prototype.show=function(t){return this.current_identifier&&this._hide_view(this.current_identifier),this.current_identifier=t,this._show_view(t)},t.prototype.register_view=function(t,e){if(null!=this.views[t])throw"Can't register multiple views for the same identifier!";return this.views[t]=e,this.current_identifier===t?this._show_view(t):void 0},t.prototype._show_view=function(t){var e;return this._view_container(t).show(),null!=(e=this.views[t])&&"function"==typeof e.show?e.show():void 0},t.prototype._hide_view=function(t){var e;return null!=(e=this.views[t])&&"function"==typeof e.tear_down&&e.tear_down(),this._view_container(t).hide()},t.prototype._view_container=function(t){return $(".attachment_preview[data-attachment="+t+"]")},t}(),SingleWork.preview_controller=new SingleWork.PreviewController}.call(this),function(){SingleWork.RepoView=function(){function t(t){this._set_repo_widths(),_.each(this.constructor_options,function(e){return function(i){return e[i]=t[i]}}(this)),this.$container=$(this.container)}return t.prototype.constructor_options=["container","user","repo","identifier"],t.prototype.defaults={expanded:"966px",unexpanded:"760px"},t.prototype.show=function(){return $a.ie8()?this.unsupported_browser():req("repo",function(t){return function(){return t.$container.append("<div class='inner_repo'></div>"),t.$repo=t.$container.find(".inner_repo"),t.$repo.width(t.defaults.unexpanded),t.$repo.repo({user:t.user,name:t.repo}),t.$repo.on("not_found",function(){return t.not_found()}),t.$repo.on("api_limited",function(){return t.api_limited()})}}(this))},t.prototype.not_found=function(){var t;return null!=(t=this.$repo)&&t.find(".repo").hide(),this.$container.find(".not_found").show()},t.prototype.api_limited=function(){var t;return null!=(t=this.$repo)&&t.find(".repo").hide(),this.$container.find(".api_limited").show()},t.prototype.unsupported_browser=function(){var t;return null!=(t=this.$repo)&&t.find(".repo").hide(),this.$container.find(".unsupported_browser").show()},t.prototype.tear_down=function(){return this.$repo.remove()},t.prototype._set_repo_widths=function(){var t;return t=$.trim($("#site").attr("class").replace("fixed","")),"w_1160"===t?(this.defaults.expanded="1060px",this.defaults.unexpanded="880px"):"w_1340"===t?(this.defaults.expanded="1246px",this.defaults.unexpanded="1050px"):"w_1780"===t?(this.defaults.expanded="1680px",this.defaults.unexpanded="1500px"):void 0},t}()}.call(this),function(){this.JST||(this.JST={}),this.JST["single_work/templates/coauthor_request_toolbar"]=function(){var t=[];return t.push('<span class="coauthor-tag-request-prompt">You have been tagged as a co-author!</span><div class="coauthor-tag-request-actions pull-right"><span class="js-ignore-coauthor-tag-request ignore-coauthor-tag-request clickable">IGNORE</span><button class="js-accept-coauthor-tag-request btn btn-lg btn-success accept-coauthor-tag-request u-textUppercase">ACCEPT</button></div>'),t.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["single_work/templates/coauthor_request_toolbar_ds"]=function(){var t=[];return t.push('<div style="line-height:44px" class="js-coauthor-msg col-xs-9 u-fontSize14 u-fontWeight700"><span>You have been tagged as a co-author!</span></div><div style="line-height:44px" class="js-coauthor-ignore col-xs-1 u-textColorGray"><div class="js-ignore-coauthor-tag-request ignore-coauthor-tag-request clickable">IGNORE</div></div><div class="js-coauthor-accept col-xs-2"><button class="js-accept-coauthor-tag-request Button Button--green Button--block accept-coauthor-tag-request"><span>ACCEPT</span></button></div>'),t.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["single_work/templates/facebook_connect_with_dismiss"]=function(t){var e,i=[],n=t||{};return function(t,n,s){i.push('<div class="DesignSystem"><div class="modal js-inactive-user-facebook-connect"><div class="modal-dialog"><div class="modal-content swp-facebook-modal-content"><div class="modal-header u-p6x"><button aria-label="Close" data-dismiss="modal" type="button" class="close"><span aria-hidden="true" class="close-icon">\xd7</span></button><h3 class="modal-title u-textAlignCenter">'+jade.escape(null==(e=n)?"":e)+'</h3></div><div class="modal-body u-p10x"><p class="u-mt0x u-mb8x">To access "'+jade.escape(null==(e=s)?"":e)+'," log in below</p><div class="row"><div class="col-md-6 col-md-offset-3"><button class="js-fb-button Button Button--facebook Button--lg Button--block u-p0x u-mv6x"><i class="fa fa-lg fa-facebook-square"></i><span class="u-fontSize11">&nbsp;&nbsp;'+jade.escape(null==(e=t)?"":e)+"</span></button></div></div></div></div></div></div></div>")}.call(this,"buttonText"in n?n.buttonText:"undefined"!=typeof buttonText?buttonText:void 0,"headerText"in n?n.headerText:"undefined"!=typeof headerText?headerText:void 0,"title"in n?n.title:"undefined"!=typeof title?title:void 0),i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["single_work/templates/splash_download_feedback_form"]=function(t){var e,i=[],n=t||{};return function(t,n){i.push('<div class="a-fadeInDown"><div class="container-fluid"><div class="row u-mb4x"><div class="col-xs-8 col-xs-offset-2"><div class="media_v2"><div class="media-left media-middle"><img'+jade.attr("src",t,!0,!1)+' class="Avatar Avatar--md"/></div><div class="media-body"><div class="u-textColorGrayDarker"><div>Help&nbsp;<span class="u-fontWeight700">'+jade.escape(null==(e=n)?"":e)+'</span>&nbsp;learn more </div><div>about who is downloading their work:</div></div></div></div></div></div><form class="js-splash-download-feedback-form container-fluid"><div class="row"><div class="col-xs-8 col-xs-offset-2">   <div class="row u-mb4x"><div class="col-xs-12 u-ph0x">         <input placeholder="Your Occupation" class="TextInput TextInput--xl js-download-message-occupation swp-splash-single-step-singup-input"/></div></div><div class="row u-mb4x"><div class="col-xs-12 u-ph0x"> <textarea placeholder="What sparked your interest in the paper?" rows="4" class="TextArea TextArea--disableResize js-download-message-comment swp-splash-single-step-singup-input u-pl5x"></textarea></div></div><div class="row"><div class="col-xs-12 u-ph0x"> <button type="submit" class="Button Button--block Button--lg">Send</button></div></div></div></div></form></div></div>')}.call(this,"image"in n?n.image:"undefined"!=typeof image?image:void 0,"name"in n?n.name:"undefined"!=typeof name?name:void 0),i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["single_work/templates/splash_signup_completed"]=function(t){var e=[],i=t||{};return function(t,i,n,s){e.push('<div class="a-fadeInDown"><div class="u-textAlignCenter u-mb8x"><div class="row"><div class="col-xs-10 col-xs-offset-1">'),e.push("pdf"==t?'<h4 class="u-mb3x u-textColorGrayDarker u-fontWeight700">PDF Sent! Would you like to boost your citations?</h4>':'<h4 class="u-mb3x u-textColorGrayDarker u-fontWeight700">File Sent! Would you like to boost your citations?</h4>'),e.push('<h5 style="line-height:20px" class="u-textColorGrayDark">A&nbsp;<a href="https://www.academia.edu/12297791/Open_Access_Meets_Discoverability_Citations_to_Articles_Posted_to_Academia.edu" class="u-linkUnstyled u-textDecorationUnderline">recent study</a>&nbsp;found that papers uploaded to Academia.edu receive a 73% boost in citations over 5 years.</h5></div></div></div><div class="container-fluid"><div class="row"><div class="col-xs-10 col-xs-offset-1"><div class="row u-mb13x u-textColorGrayDark u-fontWeight700"><div class="col-xs-4 u-ph0x u-textAlignCenter"><div class="clearfix"><img'+jade.attr("src",i("single_work_splash/upload.svg"),!0,!1)+'/></div><span class="u-mt1x">Upload Paper</span></div><div class="col-xs-4 u-ph0x u-textAlignCenter"><div class="clearfix"><img'+jade.attr("src",i("single_work_splash/sessions.svg"),!0,!1)+'/></div><span class="u-mt1x">Get Feedback</span></div><div class="col-xs-4 u-ph0x u-textAlignCenter"><div class="clearfix"><img'+jade.attr("src",i("single_work_splash/citations.svg"),!0,!1)+'/></div><span class="u-mt1x">Increase Citations</span></div></div>'),n&&e.push('<div class="row u-mb4x"><div class="col-xs-6 u-pl0x u-pr2x"><a'+jade.attr("href",s+"/Papers?s=splash#add",!0,!1)+' class="button Button Button--block Button--xl Button--green u-textColorWhite"><i class="fa fa-lg fa-arrow-up u-mr2x"></i>Upload A Paper</a></div><div class="col-xs-6 u-pl2x u-pr0x"><a'+jade.attr("href",s,!0,!1)+' class="button Button Button--block Button--xl Button--blue u-textColorWhite"><i class="fa fa-lg fa-user u-mr2x"></i>View Account</a></div></div>'),e.push("</div></div></div></div>")}.call(this,"file_type"in i?i.file_type:"undefined"!=typeof file_type?file_type:void 0,"image_url_helper"in i?i.image_url_helper:"undefined"!=typeof image_url_helper?image_url_helper:void 0,"logged_in"in i?i.logged_in:"undefined"!=typeof logged_in?logged_in:void 0,"user_url"in i?i.user_url:"undefined"!=typeof user_url?user_url:void 0),e.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["single_work/templates/splash_single_step_signup_form"]=function(t){var e,i=[],n=t||{};return function(t,n){i.push('<div class="a-fadeInDown"><div class="u-textAlignCenter u-mb2x"><h4 class="u-textColorGrayDarker u-fontWeight700">Sign Up to Download</h4></div>'),i.push(n?'<div class="container-fluid u-mv6x"><div class="row"><div class="col-xs-8 col-xs-offset-2"><div class="row"><div class="col-xs-6 u-pl0x u-pr1x"><div class="google-button-connect"><button class="js-swp-splash-single-step-signup-google-button Button Button--google Button--lg Button--block u-p0x"><i class="fa fa-lg fa-google-plus"></i><span>&nbsp;&nbsp;Connect</span></button></div></div><div class="col-xs-6 u-pr0x u-pl1x"><div class="facebook-button-connect"><button class="js-swp-splash-single-step-signup-facebook-button Button Button--facebook Button--lg Button--block u-p0x"><i class="fa fa-lg fa-facebook-square"></i><span>&nbsp;&nbsp;Connect</span></button></div></div></div></div></div></div><div class="container-fluid"><div class="row"><div class="col-xs-8 col-xs-offset-2 u-ph0x"><div class="hr-heading login-hr-heading u-mb6x"><span class="hr-heading-text">or</span></div></div></div></div><form class="js-swp-splash-single-step-signup-form container-fluid"><div class="row"><div class="col-xs-8 col-xs-offset-2"><div class="row u-mb4x"><div class="col-xs-12 u-ph0x"><input placeholder="Email" type="email" id="user_email" class="TextInput TextInput--xl js-swp-splash-single-step-signup-email swp-splash-single-step-singup-input"/></div></div><div class="row"><div class="col-xs-12 collapse js-swp-splash-signup-email-form-collapsed"><div class="row u-mb4x"><div class="col-xs-6 u-pl0x u-pr2x"><input placeholder="First Name" id="user_first_name" class="TextInput TextInput--xl js-swp-splash-single-step-signup-first-name swp-splash-single-step-singup-input"/></div><div class="col-xs-6 u-pl2x u-pr0x"><div class="u-positionRelative"><input placeholder="Last Name" id="user_last_name" class="TextInput TextInput--xl js-swp-splash-single-step-signup-last-name swp-splash-single-step-singup-input"/></div></div></div><div class="row u-mb4x"><div class="col-xs-12 u-ph0x"><input type="password" placeholder="Password" id="user_password" class="TextInput TextInput--xl js-swp-splash-single-step-signup-password swp-splash-single-step-singup-input"/></div></div><div class="row"><div class="col-xs-12 u-ph0x"><button type="submit" data-broccoli-component="sutd-work-splash-signup-button" class="swp-splash-signup-submit Button Button--block Button--lg Button--green"><i'+jade.cls(["fa","fa-lg","fa-"+("pdf"===t?"file-pdf-o":"file-text-o")],[null,null,!0])+"></i>&nbsp;&nbsp;\nGET "+jade.escape(null==(e="pdf"===t?"PDF":"FILE")?"":e)+'</button></div></div></div></div><div class="row"><div class="col-xs-12 u-ph0x u-textAlignCenter"><div class="u-textColorGrayDark u-pt2x">Already have an account?\n&nbsp;<a href="/login" class="u-linkUnstyled u-textDecorationUnderline">Sign in</a></div></div></div></div></div></form>':'<form class="js-swp-splash-single-step-signup-form container-fluid u-mt8x"><div class="row"><div class="col-xs-8 col-xs-offset-2"><div class="row u-mb4x"><div class="col-xs-6 u-pl0x u-pr2x"><input placeholder="First Name" id="user_first_name" class="TextInput TextInput--xl js-swp-splash-single-step-signup-first-name swp-splash-single-step-singup-input"/></div><div class="col-xs-6 u-pl2x u-pr0x"><div class="u-positionRelative"><input placeholder="Last Name" id="user_last_name" class="TextInput TextInput--xl js-swp-splash-single-step-signup-last-name swp-splash-single-step-singup-input"/></div></div></div><div class="row u-mb4x"><div class="col-xs-12 u-ph0x"><input placeholder="Email" type="email" id="user_email" class="TextInput TextInput--xl js-swp-splash-single-step-signup-email swp-splash-single-step-singup-input"/></div></div><div class="row u-mb4x"><div class="col-xs-12 u-ph0x"><input type="password" placeholder="Password" id="user_password" class="TextInput TextInput--xl js-swp-splash-single-step-signup-password swp-splash-single-step-singup-input"/></div></div><div class="row"><div class="col-xs-12 u-ph0x"><button type="submit" data-broccoli-component="sutd-work-splash-signup-button" class="swp-splash-signup-submit Button Button--block Button--lg Button--green"><i'+jade.cls(["fa","fa-lg","fa-"+("pdf"===t?"file-pdf-o":"file-text-o")],[null,null,!0])+"></i>&nbsp;&nbsp;\nGET "+jade.escape(null==(e="pdf"===t?"PDF":"FILE")?"":e)+'</button></div></div><div class="row"><div class="col-xs-12 u-ph0x u-textAlignCenter"><div class="u-textColorGrayDark u-pt2x">Already have an account?\n&nbsp;<a href="/login" class="u-linkUnstyled u-textDecorationUnderline">Sign in</a></div></div></div></div></div></form>'),i.push("</div>")}.call(this,"attachment_type"in n?n.attachment_type:"undefined"!=typeof attachment_type?attachment_type:void 0,"show_oauth_buttons"in n?n.show_oauth_buttons:"undefined"!=typeof show_oauth_buttons?show_oauth_buttons:void 0),i.join("")}}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var s in i)e.call(i,s)&&(t[s]=i[s]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;SingleWork.VerifyFulltextModal=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.initialize=function(t){return this.workId=t.workId,this.attachmentId=t.attachmentId,this.notifier=new Aedu.Server.Notification("paper_uploads"),i.__super__.initialize.call(this,{mainText:"Confirm full-text attachment",confirmButtonText:"CONFIRM",cancelButtonText:"REMOVE",confirmButtonClasses:"btn-success",subText:"Is this the text of your paper, "+t.title+"?"}),this.once("confirm",function(t){return function(){return t.notifyEvent("fulltext_confirmed")}}(this)),this.once("cancel",function(t){return function(){return t.removeAttachment(),t.notifyEvent("fulltext_removed")}}(this)),this.notifyEvent("verify_fulltext_shown")},i.prototype.notifyEvent=function(t){return this.notifier.notify({event:t,user_id:c.User.current.id,work_id:this.workId,attachment_id:this.attachmentId})},i.prototype.removeAttachment=function(){var t;return t=$r.api_v0_attachment_path({id:this.attachmentId,subdomain_param:"api"}),$.post(t,{_method:"DELETE"},function(t){return function(){return window.location="/"+t.workId}}(this))},i}(ConfirmModal)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var s in i)e.call(i,s)&&(t[s]=i[s]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;SingleWork.InactiveUserFacebookConnectModal=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.events={"click .js-fb-button":"authorizeFacebook"},i.prototype.template=function(){return"single_work/templates/facebook_connect_with_dismiss"},i.prototype.initialize=function(t){return this.title=t.title,Facebook.get_login_status(function(t){return function(e){return"not_authorized"===e.status||"unknown"===e.status?t.render():void 0}}(this))},i.prototype.render=function(){var t,e,i,n,s;return t=this.getBucket(),s=t.split(":")[0],i=t.split(":")[1],n="View Paper","login_to_view_paper"===s&&(n="Log in to View Paper"),e="Continue with Facebook","login_with_facebook"===i&&(e="Log in with Facebook"),this.$el.append(JST[this.template()]({title:this.title,headerText:n,buttonText:e})),this.postRender(),this.ui.modal.modal("show"),this},i.prototype.getBucket=function(){return Academia.Split.startAndRecord("swp_fb_modal_test","login_to_view_paper:login_with_facebook","login_to_view_paper:continue_with_facebook","view_paper:login_with_facebook","view_paper:continue_with_facebook")},i.prototype.postRender=function(){return this.ui={modal:this.$(".js-inactive-user-facebook-connect")}},i.prototype.authorizeFacebook=function(){return Academia.Split.recordSplit("swp_fb_modal_test",!0),Facebook.authorize().done(function(t){return function(e){return Facebook.register_connected(e).done(function(){return t.ui.modal.modal("hide")})}}(this))},i}(Backbone.View)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var s in i)e.call(i,s)&&(t[s]=i[s]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;SingleWork.SplashDownloadFeedbackForm=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.template="single_work/templates/splash_download_feedback_form",i.prototype.events={"submit .js-splash-download-feedback-form":"submitFeedback"},i.prototype.initialize=function(t){return this.image=$image_url(t.author_photo),this.name=t.author_name,this.redirect=t.redirect,this.render()},i.prototype.render=function(){return this.$el.html(JST[this.template]({name:this.name,image:this.image})),this.postRender()},i.prototype.postRender=function(){return this.ui={$occupation:this.$(".js-download-message-occupation"),$message:this.$(".js-download-message-comment")}},i.prototype.saveResponse=function(){return $.ajax({type:"POST",dataType:"json",url:$r.record_from_downloader_to_author_message_registrations_path(),data:{occupation:this.ui.$occupation.val(),message:this.ui.$message.val(),attachment_id:this.model.get("attachment_id"),work_id:this.model.get("work_id")}})},i.prototype.submitFeedback=function(t){return t.preventDefault(),this.saveResponse().done(function(t){return function(e){return e.success?window.location.replace(t.redirect):t.displayErrors()}}(this)).fail(function(){return alert("Something went wrong")})},i.prototype.displayErrors=function(){return this.ui.$occupation.removeClass("TextInput--error").css({"padding-top":0}),this.ui.$message.removeClass("TextInput--error").css({"padding-top":"14px"}),this.$(".js-swp-splash-input-inner-error").remove(),this.ui.$occupation.val()||this.ui.$occupation.addClass("TextInput--error").after(this.renderErrorHTML("Please enter your occupation")).css({"padding-top":10}),this.ui.$message.val()?void 0:this.ui.$message.addClass("TextInput--error").after(this.renderErrorHTML("Please enter a message")).css({"padding-top":20})},i.prototype.renderErrorHTML=function(t){return"<div class='js-swp-splash-input-inner-error swp-splash-input-inner-error u-textColorRed a-fadeInDownShort'>"+t+"</div>"},i}(Backbone.View)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var s in i)e.call(i,s)&&(t[s]=i[s]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;SingleWork.SplashSignupCompleted=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.template="single_work/templates/splash_signup_completed",i.prototype.render=function(){return this.$el.html(JST[this.template]({file_type:this.model.get("attachment_type"),image_url_helper:$image_url,user_url:null!=Aedu.User.current?Aedu.User.current.url:void 0,logged_in:null!=Aedu.User.current})),this},i}(Backbone.View)}.call(this),function(){var t=function(t,i){function n(){this.constructor=t}for(var s in i)e.call(i,s)&&(t[s]=i[s]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;SingleWork.SplashSingleStepSignupForm=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.template="single_work/templates/splash_single_step_signup_form",i.prototype.events={"submit .js-swp-splash-single-step-signup-form":"submitSignup","keydown .js-swp-splash-single-step-signup-first-name":"logTyping","keydown .js-swp-splash-single-step-signup-email":"logTyping","keydown .js-swp-splash-single-step-signup-last-name":"logTyping","keydown .js-swp-splash-single-step-signup-password":"logTyping","focus .js-swp-splash-single-step-signup-email":"expandEmailForm"},i.prototype.initialize=function(t){return this.log={user_email:!1,user_first_name:!1,user_last_name:!1,user_password:!1},this.notifier=new c.Server.Notification("sutd"),this.authorName=t.author_name,this.authorPhoto=t.author_photo,this.showMessage=t.show_message,this.render({attachment_type:t.attachment_type,show_oauth_buttons:t.show_oauth_buttons||!1})},i.prototype.render=function(t){return this.$el.html(JST[this.template](t)),this.postRender()},i.prototype.postRender=function(){return this.ui={$first_name:this.$(".js-swp-splash-single-step-signup-first-name"),$last_name:this.$(".js-swp-splash-single-step-signup-last-name"),$password:this.$(".js-swp-splash-single-step-signup-password"),$email:this.$(".js-swp-splash-single-step-signup-email"),$emailForm:this.$(".js-swp-splash-signup-email-form-collapsed"),$googleButton:this.$(".js-swp-splash-single-step-signup-google-button"),$facebookButton:this.$(".js-swp-splash-single-step-signup-facebook-button")},new Academia.Auth.OauthButton.Connect.Facebook({el:this.ui.$facebookButton,track:!0,registrationParams:{doc_id:this.model.get("attachment_id"),splash:!0}}),new Academia.Auth.OauthButton.Connect.Google({el:this.ui.$googleButton,track:!0,registrationParams:{doc_id:this.model.get("attachment_id"),splash:!0}})},i.prototype.expandEmailForm=function(){return this.ui.$emailForm.collapse("show")},i.prototype.saveFields=function(){return this.model.set({email:this.ui.$email.val()}),this.model.set({first_name:this.ui.$first_name.val()}),this.model.set({last_name:this.ui.$last_name.val()}),this.model.set({password:this.ui.$password.val()}),this.model.set({splash:!0})},i.prototype.renderErrorHTML=function(t){return"<div class='js-swp-splash-input-inner-error swp-splash-input-inner-error u-textColorRed a-fadeInDownShort'>"+t+"</div>"},i.prototype.displayErrors=function(t){var e;return e=$(this.ui.$first_name).add(this.ui.$last_name).add(this.ui.$password).add(this.ui.$email),e.removeClass("TextInput--error").css({"padding-top":0}),this.$(".js-swp-splash-input-inner-error").remove(),_.each(t,function(t){return function(e){var i,n;return n=e[0],i=e[1],"user[email]"===n&&t.showErrorForInput(t.ui.$email,i),"user[first_name]"===n&&t.showErrorForInput(t.ui.$first_name,i),"user[last_name]"===n&&t.showErrorForInput(t.ui.$last_name,i),"user[password]"===n?t.showErrorForInput(t.ui.$password,i):void 0}}(this))},i.prototype.showErrorForInput=function(t,e){return t.addClass("TextInput--error").after(this.renderErrorHTML(e.replace(/\./g,""))).css({"padding-top":10})},i.prototype.submitSignup=function(t){return t.preventDefault(),this.saveFields(),this.model.save().done(function(t){return function(e){var i,n,s;return s=e[0],i=e[1],n=e[2],s?t.showMessage?t.nextPage=new SingleWork.SplashDownloadFeedbackForm({el:".js-swp-splash-paper-preview-wrapper",author_name:t.authorName,author_photo:t.authorPhoto,redirect:i.redirect,model:t.model}):window.location.replace(i.redirect):(t.notify("validation_failure",{error:JSON.stringify(n)}),t.displayErrors(n))}}(this)).fail(function(){return alert("Something went wrong")})},i.prototype.notify=function(t,e){return null==e&&(e={}),this.notifier.notify({event_type:t,attachment_id:this.model.get("attachment_id"),auvid:$auvid,location:null!=e.location?e.location:void 0,error:null!=e.error?e.error:void 0})},i.prototype.logTyping=function(t){return this.log[t.target.id]||this.notify("started_typing",{location:t.target.id}),this.log[t.target.id]=!0},i}(Backbone.View)}.call(this),function(){Aedu.SignupToDownload||(Aedu.SignupToDownload={}),Aedu.SignupToDownload.notifier=new c.Server.Notification("sutd"),Aedu.SignupToDownload.notifier.notifyAndLog=function(t,e){return null==e&&(e={}),$a.log(t),this.notify({event_type:t,attachment_id:e.attachment_id?e.attachment_id:void 0,auvid:$auvid,location:e.location?e.location:void 0,error:e.error?e.error:void 0})}}.call(this),function(){this.JST||(this.JST={}),this.JST["signup_to_download/templates/layout"]=function(t){var e,i=[],n=t||{};return function(t,n,s,o,a,r){i.push('<div class="DesignSystem"><div style="width:460px" class="modal-dialog"><div class="modal-content u-overflowHidden"><div class="modal-header container-fluid u-border0 u-p10x u-pb0x"><div class="row u-mb10x"><div class="col-xs-8 col-xs-offset-2"><div class="u-textAlignCenter u-fontSize20 u-fontWeight700 u-textColorGrayDarker">'+jade.escape(null==(e=r)?"":e)+"</div></div>"),a&&i.push('<div class="col-xs-2"><button data-dismiss="modal" class="js-close-full-modal u-floatRight Close u-fontSize24">&times;</button></div>'),i.push('</div></div><div class="modal-body container-fluid u-p10x u-pt0x"><div class="row u-mb10x"><div class="col-xs-12"><div class="u-textAlignCenter"><div style="line-height:30px" class="u-textColorGrayDark u-fontSize18 u-fontWeight400 u-fontSerif">'+jade.escape(null==(e=o)?"":e)+'</div></div></div></div><div class="row u-mb5x"><div class="col-xs-6 u-pr2x"><button id="google-signup-button" class="Button Button--google Button--block Button--lg"><i class="fa fa-google-plus fa-lg"></i>&nbsp;&nbsp;Connect</button></div><div class="col-xs-6 u-pl2x"><button id="fb-signup-button" class="Button Button--facebook Button--block Button--lg"><i class="fa fa-facebook-square fa-lg"></i>&nbsp;&nbsp;Connect</button></div></div><div class="row u-mb5x"><div class="col-xs-12"><div class="hr-heading login-hr-heading"><span class="hr-heading-text">or</span></div></div></div><form class="js-modal-title-form container-fluid"><div class="row u-mb5x"><div class="col-xs-12 u-ph0x TextInputWrapper--icon u-floatLeft"><input placeholder="Email" type="email" id="user_email" class="TextInput TextInput--xl js-modal-title-email swp-splash-single-step-singup-input"/><i class="fa fa-envelope-o u-textColorGrayDark js-modal-title-envelope"></i></div></div><div class="row"><div class="col-xs-12 collapse js-modal-title-form-collapsed"><div class="row u-mb5x"><div class="col-xs-6 u-pl0x u-pr2x"><input placeholder="First Name" id="user_first_name" class="TextInput TextInput--xl js-modal-title-first-name swp-splash-single-step-singup-input"/></div><div class="col-xs-6 u-pl2x u-pr0x"><div class="u-positionRelative"><input placeholder="Last Name" id="user_last_name" class="TextInput TextInput--xl js-modal-title-last-name swp-splash-single-step-singup-input"/></div></div></div><div class="row u-mb5x"><div class="col-xs-12 u-ph0x"><input type="password" placeholder="Password" id="user_password" class="TextInput TextInput--xl js-modal-title-password swp-splash-single-step-singup-input"/></div></div><div class="row u-mb5x"><div class="col-xs-12 u-ph0x"><button type="submit" class="js-modal-signup-submit swp-splash-signup-submit Button Button--block Button--lg Button--green">'),i.push(n?jade.escape(null==(e=n)?"":e):"<i"+jade.cls(["fa","fa-lg","pdf"===t?"fa-file-pdf-o":"fa-file-text-o"],[null,null,!0])+"></i>&nbsp;&nbsp;\nGET "+jade.escape(null==(e="pdf"===t?"PDF":"FILE")?"":e)),i.push('</button></div></div></div></div><div class="row"><div class="col-xs-12 u-ph0x u-textAlignCenter"><div class="u-fontWeight500 u-fontSize11 u-textColorGray">By signing up, you agree to our\n&nbsp;<a href="/terms" class="js-modal terms-link u-linkUnstyled u-textDecorationUnderline">terms</a>&nbsp;&bull; Already have an account?\n&nbsp;<a'+jade.attr("href",s,!0,!1)+' class="u-linkUnstyled u-textDecorationUnderline">Sign in</a></div></div></div></form></div></div></div></div>')}.call(this,"attachmentType"in n?n.attachmentType:"undefined"!=typeof attachmentType?attachmentType:void 0,"buttonText"in n?n.buttonText:"undefined"!=typeof buttonText?buttonText:void 0,"loginUrl"in n?n.loginUrl:"undefined"!=typeof loginUrl?loginUrl:void 0,"message"in n?n.message:"undefined"!=typeof message?message:void 0,"showCloseButton"in n?n.showCloseButton:"undefined"!=typeof showCloseButton?showCloseButton:void 0,"title"in n?n.title:"undefined"!=typeof title?title:void 0),i.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["signup_to_download/templates/layout_line"]=function(t){var e,i=[],n=t||{};return function(t,n,s,o,a,r){i.push('<div class="DesignSystem"><div style="width:460px" class="modal-dialog"><div class="modal-content u-overflowHidden"><div class="modal-header container-fluid u-p0x"><div class="row u-pv6x"><div class="col-xs-8 col-xs-offset-2"><div class="u-textAlignCenter u-fontSize14 u-fontWeight700 u-textColorGrayDarkest u-textUppercase u-textLetterSpacing1">'+jade.escape(null==(e=r)?"":e)+"</div></div>"),a&&i.push('<div class="col-xs-2"><button data-dismiss="modal" class="js-close-full-modal u-floatRight Close u-fontWeight400 u-fontSize20 u-mr4x">&times;</button></div>'),i.push('</div></div><div class="modal-body container-fluid u-p10x"><div class="row u-mb10x"><div class="col-xs-12"><div class="u-textAlignCenter"><div class="u-textColorGrayDarkest u-lineHeight1_4 u-fontSerif u-fontSize22">'+jade.escape(null==(e=o)?"":e)+'</div></div></div></div><div class="row u-mb5x"><div class="col-xs-6 u-pr2x"><button id="google-signup-button" class="Button Button--google Button--block Button--lg"><i class="fa fa-google-plus fa-lg"></i>&nbsp;&nbsp;Connect</button></div><div class="col-xs-6 u-pl2x"><button id="fb-signup-button" class="Button Button--facebook Button--block Button--lg"><i class="fa fa-facebook-square fa-lg"></i>&nbsp;&nbsp;Connect</button></div></div><div class="row u-mb5x"><div class="col-xs-12"><div class="hr-heading login-hr-heading"><span class="hr-heading-text">or</span></div></div></div><form class="js-modal-title-form container-fluid"><div class="row u-mb5x"><div class="col-xs-12 u-ph0x TextInputWrapper--icon u-floatLeft"><input placeholder="Email" type="email" id="user_email" class="TextInput TextInput--xl js-modal-title-email swp-splash-single-step-singup-input"/><i class="fa fa-envelope-o u-textColorGrayDark js-modal-title-envelope"></i></div></div><div class="row"><div class="col-xs-12 collapse js-modal-title-form-collapsed"><div class="row u-mb5x"><div class="col-xs-6 u-pl0x u-pr2x"><input placeholder="First Name" id="user_first_name" class="TextInput TextInput--xl js-modal-title-first-name swp-splash-single-step-singup-input"/></div><div class="col-xs-6 u-pl2x u-pr0x"><div class="u-positionRelative"><input placeholder="Last Name" id="user_last_name" class="TextInput TextInput--xl js-modal-title-last-name swp-splash-single-step-singup-input"/></div></div></div><div class="row u-mb5x"><div class="col-xs-12 u-ph0x"><input type="password" placeholder="Password" id="user_password" class="TextInput TextInput--xl js-modal-title-password swp-splash-single-step-singup-input"/></div></div><div class="row u-mb5x"><div class="col-xs-12 u-ph0x"><button type="submit" class="js-modal-signup-submit swp-splash-signup-submit Button Button--block Button--lg Button--green">'),i.push(n?jade.escape(null==(e=n)?"":e):"<i"+jade.cls(["fa","fa-lg","pdf"===t?"fa-file-pdf-o":"fa-file-text-o"],[null,null,!0])+"></i>&nbsp;&nbsp;\nGET "+jade.escape(null==(e="pdf"===t?"PDF":"FILE")?"":e)),i.push('</button></div></div></div></div><div class="row"><div class="col-xs-12 u-ph0x u-textAlignCenter"><div class="u-fontWeight400 u-fontSize12 u-textColorGrayDark">Already have an account?\n&nbsp;<a'+jade.attr("href",s,!0,!1)+' class="u-linkUnstyled u-textDecorationUnderline u-textColorBlue">Log in</a></div></div></div></form></div></div></div></div>')}.call(this,"attachmentType"in n?n.attachmentType:"undefined"!=typeof attachmentType?attachmentType:void 0,"buttonText"in n?n.buttonText:"undefined"!=typeof buttonText?buttonText:void 0,"loginUrl"in n?n.loginUrl:"undefined"!=typeof loginUrl?loginUrl:void 0,"message"in n?n.message:"undefined"!=typeof message?message:void 0,"showCloseButton"in n?n.showCloseButton:"undefined"!=typeof showCloseButton?showCloseButton:void 0,"title"in n?n.title:"undefined"!=typeof title?title:void 0),i.join("")
}}.call(this),function(){Aedu.SignupToDownload.Layout=Backbone.View.extend({template:"signup_to_download/templates/layout",template_line:"signup_to_download/templates/layout_line",className:"modal fade",events:{"focus .js-modal-title-email":"expandEmailForm","click .js-modal-signup-submit":"submitSignup","click .js-modal-terms-link":"termsClicked","keydown .js-modal-title-first-name":"logTyping","keydown .js-modal-title-last-name":"logTyping","keydown .js-modal-title-password":"logTyping","keydown .js-modal-title-email":"logTyping"},initialize:function(t){return null==t&&(t={}),this.model=new MobileRegPath.newUser({attachment_id:t.attachmentId,login_redirect:t.loginRedirect,user_source:t.userSource}),this.ab_test=t.ab_test||"no_line",this.data={loginUrl:t.loginUrl||"/login",message:t.message,attachmentType:null!=t.attachmentType?t.attachmentType:void 0,title:t.title,buttonText:t.buttonText,showCloseButton:t.showCloseButton},this.log={user_email:!1,user_first_name:!1,user_last_name:!1,user_password:!1},this.render(this.data)},render:function(t){return this.$el.html("no_line"===this.ab_test?JST[this.template](t):JST[this.template_line](t)),this.postRender()},postRender:function(){return this.ui={$emailForm:this.$(".js-modal-title-form-collapsed"),$googleButton:this.$("#google-signup-button"),$facebookButton:this.$("#fb-signup-button"),$firstName:this.$(".js-modal-title-first-name"),$lastName:this.$(".js-modal-title-last-name"),$password:this.$(".js-modal-title-password"),$email:this.$(".js-modal-title-email"),$envelope:this.$(".js-modal-title-envelope")},new Academia.Auth.OauthButton.Connect.Facebook({el:this.ui.$facebookButton,track:!0,registrationParams:{doc_id:this.model.get("attachment_id")}}),new Academia.Auth.OauthButton.Connect.Google({el:this.ui.$googleButton,track:!0,registrationParams:{doc_id:this.model.get("attachment_id")}}),this.$el.modal({backdrop:"static",keyboard:!1}),this.$el.on("hidden.bs.modal",function(){return Aedu.SignupToDownload.notifier.notifyAndLog("download_closed")})},expandEmailForm:function(){return this.ui.$emailForm.collapse("show")},submitSignup:function(t){return t.preventDefault(),Aedu.SignupToDownload.notifier.notifyAndLog("attempted_submit"),this.saveFields(),this.model.savingToServer?void 0:this.model.save().done(function(t){return function(e){var i,n,s;return s=e[0],i=e[1],n=e[2],s?window.location.replace(i.redirect):(Aedu.SignupToDownload.notifier.notifyAndLog("validation_failure",{error:JSON.stringify(n)}),t.displayErrors(n))}}(this)).fail(function(){return alert("Something went wrong")})},saveFields:function(){return this.model.set({email:this.ui.$email.val(),first_name:this.ui.$firstName.val(),last_name:this.ui.$lastName.val(),password:this.ui.$password.val()})},renderErrorHTML:function(t){return"<div class='js-swp-splash-input-inner-error swp-splash-input-inner-error u-textColorRed a-fadeInDownShort'>"+t+"</div>"},displayErrors:function(t){var e;return e=$(this.ui.$firstName).add(this.ui.$lastName).add(this.ui.$password).add(this.ui.$email),e.removeClass("TextInput--error").css({"padding-top":0}),this.ui.$envelope.css({"padding-top":0}),this.$(".js-swp-splash-input-inner-error").remove(),_.each(t,function(t){return function(e){var i,n;return n=e[0],i=e[1],"user[email]"===n&&t.showErrorForEmail(t.ui.$email,i),"user[first_name]"===n&&t.showErrorForInput(t.ui.$firstName,i),"user[last_name]"===n&&t.showErrorForInput(t.ui.$lastName,i),"user[password]"===n?t.showErrorForInput(t.ui.$password,i):void 0}}(this))},showErrorForInput:function(t,e){return t.addClass("TextInput--error").after(this.renderErrorHTML(e.replace(/\./g,""))).css({"padding-top":10})},showErrorForEmail:function(t,e){return t.addClass("TextInput--error").css({"padding-top":10}),this.ui.$envelope.after(this.renderErrorHTML(e.replace(/\./g,""))).css({"padding-top":5})},termsClicked:function(){return Aedu.SignupToDownload.notifier.notifyAndLog("terms",{auvid:$auvid})},logTyping:function(t){return this.log[t.target.id]?void 0:(Aedu.SignupToDownload.notifier.notifyAndLog("started_typing",{location:t.target.id}),this.log[t.target.id]=!0)}})}.call(this);